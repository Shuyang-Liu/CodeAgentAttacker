{
  "info": {
    "total_observations": 7,
    "python_observations": 0,
    "text_observations": 7,
    "ast_operators_applied": 0,
    "text_perturbation_applied": 6,
    "skipped": 1
  },
  "perturbations": [
    {
      "action": "find testbed -type f -print && echo \"---- classes matching 'Choices' ----\" && grep -R --line-number -E \"class .*Choices\" testbed || true",
      "original": "find: 'testbed': No such file or directory\n",
      "perturbed": "find: 'testbed': No such file or directory",
      "applied_operators": [
        "text_perturbation"
      ]
    },
    {
      "action": "ls -la && echo \"---- search for Choices classes ----\" && grep -R --line-number -E \"class .*Choices\" . || true",
      "original": "total 176\ndrwxrwxrwx   1 root root  4096 Sep 10 10:35 .\ndrwxr-xr-x   1 root root  4096 Nov 30 01:24 ..\n-rw-r--r--   1 root root   782 Sep 10 10:27 .editorconfig\n-rw-r--r--   1 root root    86 Sep 10 10:27 .eslintignore\n-rw-r--r--   1 root root  1165 Sep 10 10:27 .eslintrc\ndrwxrwxrwx   8 root root  4096 Sep 10 10:35 .git\n-rw-r--r--   1 root root   297 Sep 10 10:27 .gitattributes\n-rw-r--r--   1 root root   353 Sep 10 10:27 .gitignore\n-rw-r--r--   1 root root   164 Sep 10 10:27 .hgignore\ndrwxrwxrwx   2 root root  4096 Sep 10 10:27 .tx\n-rw-r--r--   1 root root 37001 Sep 10 10:27 AUTHORS\n-rw-r--r--   1 root root  1115 Sep 10 10:27 CONTRIBUTING.rst\ndrwxr-xr-x   2 root root  4096 Sep 10 10:35 Django.egg-info\n-rw-r--r--   1 root root    51 Sep 10 10:27 FUNDING.yml\n-rw-r--r--   1 root root   353 Sep 10 10:27 Gruntfile.js\n-rw-r--r--   1 root root   236 Sep 10 10:27 INSTALL\n-rw-r--r--   1 root root  1552 Sep 10 10:27 LICENSE\n-rw-r--r--   1 root root 13221 Sep 10 10:27 LICENSE.python\n-rw-r--r--   1 root root   307 Sep 10 10:27 MANIFEST.in\n-rw-r--r--   1 root root  1900 Sep 10 10:27 README.rst\ndrwxrwxrwx  19 root root  4096 Sep 10 10:35 django\ndrwxrwxrwx  13 root root  4096 Sep 10 10:27 docs\ndrwxrwxrwx   2 root root  4096 Sep 10 10:27 extras\ndrwxrwxrwx   5 root root  4096 Sep 10 10:27 js_tests\n-rw-r--r--   1 root root   347 Sep 10 10:27 package.json\ndrwxrwxrwx   2 root root  4096 Sep 10 10:27 scripts\n-rw-r--r--   1 root root  2121 Sep 10 10:27 setup.cfg\n-rw-r--r--   1 root root  2368 Sep 10 10:27 setup.py\ndrwxrwxrwx 212 root root 12288 Sep 10 10:27 tests\n-rw-r--r--   1 root root  1535 Sep 10 10:27 tox.ini\n---- search for Choices classes ----\n./tests/apps/tests.py:94:            \"'apps.apps' does not contain a class 'NoSuchConfig'. Choices are: \"\n./tests/admin_filters/tests.py:316:        class BookmarkChoicesAdmin(ModelAdmin):\n./tests/migrations/test_writer.py:196:    class NestedChoices(models.TextChoices):\n./tests/migrations/test_writer.py:354:        class TextChoices(models.TextChoices):\n./tests/migrations/test_writer.py:358:        class IntegerChoices(models.IntegerChoices):\n./tests/migrations/test_writer.py:362:        class DateChoices(datetime.date, models.Choices):\n./tests/model_forms/tests.py:2682:class CustomFieldWithQuerysetButNoLimitChoicesTo(forms.Field):\n./tests/model_forms/tests.py:2694:class LimitChoicesToTests(TestCase):\n./tests/invalid_models_tests/test_ordinary_fields.py:210:        class ThingWithIterableChoices(models.Model):\n./tests/model_fields/tests.py:106:class ChoicesTests(SimpleTestCase):\n./tests/model_fields/tests.py:200:class GetChoicesTests(SimpleTestCase):\n./tests/model_fields/tests.py:231:class GetChoicesOrderingTests(TestCase):\n./tests/model_fields/tests.py:281:class GetChoicesLimitChoicesToTests(TestCase):\n./tests/model_fields/test_integerfield.py:192:    class Choices(models.IntegerChoices):\n./tests/model_fields/test_charfield.py:32:        class Event(models.TextChoices):\n./tests/model_fields/test_charfield.py:49:    class Choices(models.TextChoices):\n./tests/admin_views/tests.py:4970:class LimitChoicesToInAdminTest(TestCase):\n./tests/forms_tests/tests/test_forms.py:2920:        class ChoicesField(MultiValueField):\n./tests/model_enums/tests.py:12:class Suit(models.IntegerChoices):\n./tests/model_enums/tests.py:19:class YearInSchool(models.TextChoices):\n./tests/model_enums/tests.py:27:class Vehicle(models.IntegerChoices):\n./tests/model_enums/tests.py:35:class Gender(models.TextChoices):\n./tests/model_enums/tests.py:43:class ChoicesTests(SimpleTestCase):\n./tests/model_enums/tests.py:125:        class BlankStr(models.TextChoices):\n./tests/model_enums/tests.py:136:            class InvalidArgumentEnum(models.IntegerChoices):\n./tests/model_enums/tests.py:142:            class Fruit(models.IntegerChoices):\n./tests/model_enums/tests.py:153:class Separator(bytes, models.Choices):\n./tests/model_enums/tests.py:160:class Constants(float, models.Choices):\n./tests/model_enums/tests.py:165:class Set(frozenset, models.Choices):\n./tests/model_enums/tests.py:173:class MoonLandings(datetime.date, models.Choices):\n./tests/model_enums/tests.py:182:class DateAndTime(datetime.datetime, models.Choices):\n./tests/model_enums/tests.py:188:class MealTimes(datetime.time, models.Choices):\n./tests/model_enums/tests.py:194:class Frequency(datetime.timedelta, models.Choices):\n./tests/model_enums/tests.py:202:class Number(decimal.Decimal, models.Choices):\n./tests/model_enums/tests.py:208:class IPv4Address(ipaddress.IPv4Address, models.Choices):\n./tests/model_enums/tests.py:214:class IPv6Address(ipaddress.IPv6Address, models.Choices):\n./tests/model_enums/tests.py:219:class IPv4Network(ipaddress.IPv4Network, models.Choices):\n./tests/model_enums/tests.py:225:class IPv6Network(ipaddress.IPv6Network, models.Choices):\n./tests/model_enums/tests.py:232:class CustomChoicesTests(SimpleTestCase):\n./tests/model_enums/tests.py:246:            class Boolean(bool, models.Choices):\n./tests/model_enums/tests.py:252:            class Timezone(datetime.timezone, models.Choices):\n./tests/model_enums/tests.py:258:            class Identifier(uuid.UUID, models.Choices):\n./django/apps/config.py:133:                        \"'%s' does not contain a class '%s'. Choices are: %s.\"\n./django/db/migrations/serializer.py:49:class ChoicesSerializer(BaseSerializer):\n./django/db/models/enums.py:8:class ChoicesMeta(enum.EnumMeta):\n./django/db/models/enums.py:61:class Choices(enum.Enum, metaclass=ChoicesMeta):\n./django/db/models/enums.py:72:class IntegerChoices(int, Choices):\n./django/db/models/enums.py:77:class TextChoices(str, Choices):\n./django/contrib/admin/filters.py:267:class ChoicesFieldListFilter(FieldListFilter):\n./docs/ref/models/fields.txt:193:        class YearInSchool(models.TextChoices):\n./docs/ref/models/fields.txt:240:    >>> class Vehicle(models.TextChoices):\n./docs/ref/models/fields.txt:253:        class Suit(models.IntegerChoices):\n./docs/ref/models/fields.txt:275:you can subclass ``Choices`` and the required concrete data type, e.g.\n./docs/ref/models/fields.txt:278:    class MoonLandings(datetime.date, models.Choices):\n./docs/ref/models/fields.txt:295:    class Answer(models.IntegerChoices):\n",
      "perturbed": "total 176\ndrwxrwxrwx   1 root root  4096 Sep 10 10:35 .\ndrwxr-xr-x   1 root root  4096 Nov 30 01:24 ..\n-rw-r--r--   1 root root    86 Sep 10 10:27 .eslintignore\n-rw-r--r--   1 root root   297 Sep 10 10:27 .gitattributes\n-rw-r--r--   1 root root  1165 Sep 10 10:27 .eslintrc\n-rw-r--r--   1 root root   353 Sep 10 10:27 .gitignore\n-rw-r--r--   1 root root   164 Sep 10 10:27 .hgignore\ndrwxrwxrwx   2 root root  4096 Sep 10 10:27 .tx\ndrwxr-xr-x   2 root r...\n-rw-r--r--   1 root root  1115 Sep 10 10:27 CONTR...\n** output may be incomplete **\n-rw-r--r--   1 root root    51 Sep ...\n-rw-r--r--   1 root root   353 Sep 10 10:27 Gruntfile.js\n-rw-r--r--   1 root root   236 Sep 10 10:27 INSTALL\n-rw-r--r--   1 root root  1552 Sep 10 10:27 LICENSE\n-rw-r--r--   1 root root   307 Sep 10 10:27 MANIFEST.in\ndrwxrwxrwx  13 root root  4096 Sep 10 10:27 docs\ndrwxrwxrwx   5 root root  4096 Sep 10 10:27 js_tests\ndrwxrwxrwx   2 root root  4096 Sep 10 10:27 extras\n-rw-r--r--   1 root root   347 Sep 10 10:27 package.json\ndrwxrwxrwx   2 root root  4096 Sep 10 10:27 scripts\n-rw-r--r--   1 root root  2121 Sep 10 10:27 setup.cfg\n-rw-r--r--   1 root root  2368 Sep 10 10:27 setup.py\ndrwxrwxrwx 212 root root 12288 Sep 10 10:27 tests\n-rw-r--r--   1 root root  1535 Sep 10 10:27 tox.ini\n./tests/admin_filters/tests.py:316:        class BookmarkChoicesAdmin(ModelAdmin):\n./tests/apps/tests.py:94:            \"'apps.apps' does not contain a class 'NoSuchConfig'. Choices are: \"\n./tests/migrations/test_writer.py:354:        class TextChoices(models.TextChoices):\n./tests/migrations/test_writer.py:358:        class IntegerChoices(models.IntegerChoices):\n./tests/migrations/test_writer.py:362:        cl...\n./tests/invalid_models_tests/test_ordinary_fields.py:210:        class ThingWithI...\n./tests/model_forms/tests.py:2682:class CustomFieldWithQuerysetButNoLimitChoicesTo(forms.Field):\n./tests/model_fields/tests.py:231:class G...\n./tests/model_fields/tests.py:281:class GetChoicesLimitChoicesToTests(TestCase):\n./tests/model_fields/test_integerfield.py:192:    class Choices(models.IntegerChoices):\n./tests/model_enums/tests.py:12:class Suit(models.IntegerChoices):\n./tests/model_fields/test_charfield.py:32:...\n./tests/model_enums/tests.py:27:class Vehicle(models.IntegerChoices):\n./tests/model_enums/tests.py:19:class YearInSchool(models.TextChoices):\n./tests/model_enums/tests.py:43:class ChoicesTests(SimpleTestCase):\n./tests/model_enums/tests.py:125:        class BlankStr(models.TextChoices):\n./tests/model_enums/tests.py:136:            class InvalidArgumentEnum(models.IntegerChoices):\n./tests/model_enums/tests.py:142:            class Fruit(models.IntegerChoices):\n./tests/model_enums/tests.py:153:class Separator(bytes, models.Choices):\n./tests/model_enums/tests.py:160:class Constants(float, models.Choices):\n./tests/model_enums/tests.py:165:class Set(frozenset, models.Choices):\n./tests/model_enums/tests.py:173:class MoonLandings(datetime.date, models.Choices):\n./tests/model_enums/tests.py:182:class DateAndTime(datetime.datetime, models.Ch...\n./tests/model_enums/tests.py:188:class MealTimes(datetime.time, models.Choices):\n./tests/model_enums/tests.py:202:class Number(decimal.Decimal, models.Choices):\n./tests/model_enums/tests.py:194:class Frequency(datetime.timedelta, models.Choices):\n./tests/model_enums/tests.py:208:class IPv4Address(ipaddress.IPv4Address, models.Choices):\n./tests/model_enums/tests.py:219:class IPv4Network(ipaddress.IPv4Network, models.Choices):\n./tests/model_enums/tests.py:214:class IPv6Address(ipaddress.IPv6Address, models.Choices):\n./tests/model_enums/tests.py:258:            class Identifier(uuid.UUID, models.Choices):\n./tests/model_enums/tests.py:232:class CustomChoicesTests(SimpleTestCase):\n./django/db/migrations/serializer.py:49:class ChoicesSerializer(BaseSerializer):\n./django/db/models/enums.py:8:class ChoicesMeta(enum.EnumMeta):\n./django/db/models/enums.py:72:class IntegerChoices(int, Choices):\n./django/db/models/enums.py:61:class Choices(enum.Enum, metaclass=ChoicesMeta):\n./django/contrib/admin/filters.py:267:class ChoicesFieldListFilter(FieldListFilter):\n./django/db/models/enums.py:77:class...\n./docs/ref/models/fields.txt:193:        class YearInSchool(models.TextChoices):\n./docs/ref/models/fields.txt:240:    >>> class Vehicle(models.TextChoices):\n./docs/ref/models/fields.txt:253:        class Suit(models.IntegerChoices):\n./docs/ref/models/fields.txt:275:you can subclass ``Choices`` and the required concrete data type, e.g.\n./docs/ref/models/fields.txt:295:    class Answer(models.IntegerChoices):\n./docs/ref/models/fields.txt:278:   ...",
      "applied_operators": [
        "text_perturbation"
      ]
    },
    {
      "action": "nl -ba tests/model_enums/tests.py | sed -n '1,260p'",
      "original": "     1\timport datetime\n     2\timport decimal\n     3\timport ipaddress\n     4\timport uuid\n     5\t\n     6\tfrom django.db import models\n     7\tfrom django.test import SimpleTestCase\n     8\tfrom django.utils.functional import Promise\n     9\tfrom django.utils.translation import gettext_lazy as _\n    10\t\n    11\t\n    12\tclass Suit(models.IntegerChoices):\n    13\t    DIAMOND = 1, _('Diamond')\n    14\t    SPADE = 2, _('Spade')\n    15\t    HEART = 3, _('Heart')\n    16\t    CLUB = 4, _('Club')\n    17\t\n    18\t\n    19\tclass YearInSchool(models.TextChoices):\n    20\t    FRESHMAN = 'FR', _('Freshman')\n    21\t    SOPHOMORE = 'SO', _('Sophomore')\n    22\t    JUNIOR = 'JR', _('Junior')\n    23\t    SENIOR = 'SR', _('Senior')\n    24\t    GRADUATE = 'GR', _('Graduate')\n    25\t\n    26\t\n    27\tclass Vehicle(models.IntegerChoices):\n    28\t    CAR = 1, 'Carriage'\n    29\t    TRUCK = 2\n    30\t    JET_SKI = 3\n    31\t\n    32\t    __empty__ = _('(Unknown)')\n    33\t\n    34\t\n    35\tclass Gender(models.TextChoices):\n    36\t    MALE = 'M'\n    37\t    FEMALE = 'F'\n    38\t    NOT_SPECIFIED = 'X'\n    39\t\n    40\t    __empty__ = '(Undeclared)'\n    41\t\n    42\t\n    43\tclass ChoicesTests(SimpleTestCase):\n    44\t    def test_integerchoices(self):\n    45\t        self.assertEqual(Suit.choices, [(1, 'Diamond'), (2, 'Spade'), (3, 'Heart'), (4, 'Club')])\n    46\t        self.assertEqual(Suit.labels, ['Diamond', 'Spade', 'Heart', 'Club'])\n    47\t        self.assertEqual(Suit.values, [1, 2, 3, 4])\n    48\t        self.assertEqual(Suit.names, ['DIAMOND', 'SPADE', 'HEART', 'CLUB'])\n    49\t\n    50\t        self.assertEqual(repr(Suit.DIAMOND), '<Suit.DIAMOND: 1>')\n    51\t        self.assertEqual(Suit.DIAMOND.label, 'Diamond')\n    52\t        self.assertEqual(Suit.DIAMOND.value, 1)\n    53\t        self.assertEqual(Suit['DIAMOND'], Suit.DIAMOND)\n    54\t        self.assertEqual(Suit(1), Suit.DIAMOND)\n    55\t\n    56\t        self.assertIsInstance(Suit, type(models.Choices))\n    57\t        self.assertIsInstance(Suit.DIAMOND, Suit)\n    58\t        self.assertIsInstance(Suit.DIAMOND.label, Promise)\n    59\t        self.assertIsInstance(Suit.DIAMOND.value, int)\n    60\t\n    61\t    def test_integerchoices_auto_label(self):\n    62\t        self.assertEqual(Vehicle.CAR.label, 'Carriage')\n    63\t        self.assertEqual(Vehicle.TRUCK.label, 'Truck')\n    64\t        self.assertEqual(Vehicle.JET_SKI.label, 'Jet Ski')\n    65\t\n    66\t    def test_integerchoices_empty_label(self):\n    67\t        self.assertEqual(Vehicle.choices[0], (None, '(Unknown)'))\n    68\t        self.assertEqual(Vehicle.labels[0], '(Unknown)')\n    69\t        self.assertIsNone(Vehicle.values[0])\n    70\t        self.assertEqual(Vehicle.names[0], '__empty__')\n    71\t\n    72\t    def test_integerchoices_functional_api(self):\n    73\t        Place = models.IntegerChoices('Place', 'FIRST SECOND THIRD')\n    74\t        self.assertEqual(Place.labels, ['First', 'Second', 'Third'])\n    75\t        self.assertEqual(Place.values, [1, 2, 3])\n    76\t        self.assertEqual(Place.names, ['FIRST', 'SECOND', 'THIRD'])\n    77\t\n    78\t    def test_integerchoices_containment(self):\n    79\t        self.assertIn(Suit.DIAMOND, Suit)\n    80\t        self.assertIn(1, Suit)\n    81\t        self.assertNotIn(0, Suit)\n    82\t\n    83\t    def test_textchoices(self):\n    84\t        self.assertEqual(YearInSchool.choices, [\n    85\t            ('FR', 'Freshman'), ('SO', 'Sophomore'), ('JR', 'Junior'), ('SR', 'Senior'), ('GR', 'Graduate'),\n    86\t        ])\n    87\t        self.assertEqual(YearInSchool.labels, ['Freshman', 'Sophomore', 'Junior', 'Senior', 'Graduate'])\n    88\t        self.assertEqual(YearInSchool.values, ['FR', 'SO', 'JR', 'SR', 'GR'])\n    89\t        self.assertEqual(YearInSchool.names, ['FRESHMAN', 'SOPHOMORE', 'JUNIOR', 'SENIOR', 'GRADUATE'])\n    90\t\n    91\t        self.assertEqual(repr(YearInSchool.FRESHMAN), \"<YearInSchool.FRESHMAN: 'FR'>\")\n    92\t        self.assertEqual(YearInSchool.FRESHMAN.label, 'Freshman')\n    93\t        self.assertEqual(YearInSchool.FRESHMAN.value, 'FR')\n    94\t        self.assertEqual(YearInSchool['FRESHMAN'], YearInSchool.FRESHMAN)\n    95\t        self.assertEqual(YearInSchool('FR'), YearInSchool.FRESHMAN)\n    96\t\n    97\t        self.assertIsInstance(YearInSchool, type(models.Choices))\n    98\t        self.assertIsInstance(YearInSchool.FRESHMAN, YearInSchool)\n    99\t        self.assertIsInstance(YearInSchool.FRESHMAN.label, Promise)\n   100\t        self.assertIsInstance(YearInSchool.FRESHMAN.value, str)\n   101\t\n   102\t    def test_textchoices_auto_label(self):\n   103\t        self.assertEqual(Gender.MALE.label, 'Male')\n   104\t        self.assertEqual(Gender.FEMALE.label, 'Female')\n   105\t        self.assertEqual(Gender.NOT_SPECIFIED.label, 'Not Specified')\n   106\t\n   107\t    def test_textchoices_empty_label(self):\n   108\t        self.assertEqual(Gender.choices[0], (None, '(Undeclared)'))\n   109\t        self.assertEqual(Gender.labels[0], '(Undeclared)')\n   110\t        self.assertIsNone(Gender.values[0])\n   111\t        self.assertEqual(Gender.names[0], '__empty__')\n   112\t\n   113\t    def test_textchoices_functional_api(self):\n   114\t        Medal = models.TextChoices('Medal', 'GOLD SILVER BRONZE')\n   115\t        self.assertEqual(Medal.labels, ['Gold', 'Silver', 'Bronze'])\n   116\t        self.assertEqual(Medal.values, ['GOLD', 'SILVER', 'BRONZE'])\n   117\t        self.assertEqual(Medal.names, ['GOLD', 'SILVER', 'BRONZE'])\n   118\t\n   119\t    def test_textchoices_containment(self):\n   120\t        self.assertIn(YearInSchool.FRESHMAN, YearInSchool)\n   121\t        self.assertIn('FR', YearInSchool)\n   122\t        self.assertNotIn('XX', YearInSchool)\n   123\t\n   124\t    def test_textchoices_blank_value(self):\n   125\t        class BlankStr(models.TextChoices):\n   126\t            EMPTY = '', '(Empty)'\n   127\t            ONE = 'ONE', 'One'\n   128\t\n   129\t        self.assertEqual(BlankStr.labels, ['(Empty)', 'One'])\n   130\t        self.assertEqual(BlankStr.values, ['', 'ONE'])\n   131\t        self.assertEqual(BlankStr.names, ['EMPTY', 'ONE'])\n   132\t\n   133\t    def test_invalid_definition(self):\n   134\t        msg = \"'str' object cannot be interpreted as an integer\"\n   135\t        with self.assertRaisesMessage(TypeError, msg):\n   136\t            class InvalidArgumentEnum(models.IntegerChoices):\n   137\t                # A string is not permitted as the second argument to int().\n   138\t                ONE = 1, 'X', 'Invalid'\n   139\t\n   140\t        msg = \"duplicate values found in <enum 'Fruit'>: PINEAPPLE -> APPLE\"\n   141\t        with self.assertRaisesMessage(ValueError, msg):\n   142\t            class Fruit(models.IntegerChoices):\n   143\t                APPLE = 1, 'Apple'\n   144\t                PINEAPPLE = 1, 'Pineapple'\n   145\t\n   146\t    def test_str(self):\n   147\t        for test in [Gender, Suit, YearInSchool, Vehicle]:\n   148\t            for member in test:\n   149\t                with self.subTest(member=member):\n   150\t                    self.assertEqual(str(test[member.name]), str(member.value))\n   151\t\n   152\t\n   153\tclass Separator(bytes, models.Choices):\n   154\t    FS = b'\\x1c', 'File Separator'\n   155\t    GS = b'\\x1d', 'Group Separator'\n   156\t    RS = b'\\x1e', 'Record Separator'\n   157\t    US = b'\\x1f', 'Unit Separator'\n   158\t\n   159\t\n   160\tclass Constants(float, models.Choices):\n   161\t    PI = 3.141592653589793, '\u03c0'\n   162\t    TAU = 6.283185307179586, '\u03c4'\n   163\t\n   164\t\n   165\tclass Set(frozenset, models.Choices):\n   166\t    A = {1, 2}\n   167\t    B = {2, 3}\n   168\t    UNION = A | B\n   169\t    DIFFERENCE = A - B\n   170\t    INTERSECTION = A & B\n   171\t\n   172\t\n   173\tclass MoonLandings(datetime.date, models.Choices):\n   174\t    APOLLO_11 = 1969, 7, 20, 'Apollo 11 (Eagle)'\n   175\t    APOLLO_12 = 1969, 11, 19, 'Apollo 12 (Intrepid)'\n   176\t    APOLLO_14 = 1971, 2, 5, 'Apollo 14 (Antares)'\n   177\t    APOLLO_15 = 1971, 7, 30, 'Apollo 15 (Falcon)'\n   178\t    APOLLO_16 = 1972, 4, 21, 'Apollo 16 (Orion)'\n   179\t    APOLLO_17 = 1972, 12, 11, 'Apollo 17 (Challenger)'\n   180\t\n   181\t\n   182\tclass DateAndTime(datetime.datetime, models.Choices):\n   183\t    A = 2010, 10, 10, 10, 10, 10\n   184\t    B = 2011, 11, 11, 11, 11, 11\n   185\t    C = 2012, 12, 12, 12, 12, 12\n   186\t\n   187\t\n   188\tclass MealTimes(datetime.time, models.Choices):\n   189\t    BREAKFAST = 7, 0\n   190\t    LUNCH = 13, 0\n   191\t    DINNER = 18, 30\n   192\t\n   193\t\n   194\tclass Frequency(datetime.timedelta, models.Choices):\n   195\t    WEEK = 0, 0, 0, 0, 0, 0, 1, 'Week'\n   196\t    DAY = 1, 'Day'\n   197\t    HOUR = 0, 0, 0, 0, 0, 1, 'Hour'\n   198\t    MINUTE = 0, 0, 0, 0, 1, 'Hour'\n   199\t    SECOND = 0, 1, 'Second'\n   200\t\n   201\t\n   202\tclass Number(decimal.Decimal, models.Choices):\n   203\t    E = 2.718281828459045, 'e'\n   204\t    PI = '3.141592653589793', '\u03c0'\n   205\t    TAU = decimal.Decimal('6.283185307179586'), '\u03c4'\n   206\t\n   207\t\n   208\tclass IPv4Address(ipaddress.IPv4Address, models.Choices):\n   209\t    LOCALHOST = '127.0.0.1', 'Localhost'\n   210\t    GATEWAY = '192.168.0.1', 'Gateway'\n   211\t    BROADCAST = '192.168.0.255', 'Broadcast'\n   212\t\n   213\t\n   214\tclass IPv6Address(ipaddress.IPv6Address, models.Choices):\n   215\t    LOCALHOST = '::1', 'Localhost'\n   216\t    UNSPECIFIED = '::', 'Unspecified'\n   217\t\n   218\t\n   219\tclass IPv4Network(ipaddress.IPv4Network, models.Choices):\n   220\t    LOOPBACK = '127.0.0.0/8', 'Loopback'\n   221\t    LINK_LOCAL = '169.254.0.0/16', 'Link-Local'\n   222\t    PRIVATE_USE_A = '10.0.0.0/8', 'Private-Use (Class A)'\n   223\t\n   224\t\n   225\tclass IPv6Network(ipaddress.IPv6Network, models.Choices):\n   226\t    LOOPBACK = '::1/128', 'Loopback'\n   227\t    UNSPECIFIED = '::/128', 'Unspecified'\n   228\t    UNIQUE_LOCAL = 'fc00::/7', 'Unique-Local'\n   229\t    LINK_LOCAL_UNICAST = 'fe80::/10', 'Link-Local Unicast'\n   230\t\n   231\t\n   232\tclass CustomChoicesTests(SimpleTestCase):\n   233\t    def test_labels_valid(self):\n   234\t        enums = (\n   235\t            Separator, Constants, Set, MoonLandings, DateAndTime, MealTimes,\n   236\t            Frequency, Number, IPv4Address, IPv6Address, IPv4Network,\n   237\t            IPv6Network,\n   238\t        )\n   239\t        for choice_enum in enums:\n   240\t            with self.subTest(choice_enum.__name__):\n   241\t                self.assertNotIn(None, choice_enum.labels)\n   242\t\n   243\t    def test_bool_unsupported(self):\n   244\t        msg = \"type 'bool' is not an acceptable base type\"\n   245\t        with self.assertRaisesMessage(TypeError, msg):\n   246\t            class Boolean(bool, models.Choices):\n   247\t                pass\n   248\t\n   249\t    def test_timezone_unsupported(self):\n   250\t        msg = \"type 'datetime.timezone' is not an acceptable base type\"\n   251\t        with self.assertRaisesMessage(TypeError, msg):\n   252\t            class Timezone(datetime.timezone, models.Choices):\n   253\t                pass\n   254\t\n   255\t    def test_uuid_unsupported(self):\n   256\t        msg = 'UUID objects are immutable'\n   257\t        with self.assertRaisesMessage(TypeError, msg):\n   258\t            class Identifier(uuid.UUID, models.Choices):\n   259\t                A = '972ce4eb-a95f-4a56-9339-68c208a76f18'\n",
      "perturbed": "1\timport datetime\n2\timport decimal\n3\timport ipaddress\n5\n6\tfrom django.db import models\n7\tfrom django.test import SimpleTestCase\n9\tfrom django.utils.translation import gettext_lazy as _\n12\tclass Suit(models.IntegerChoices):\n13\t    DIAMOND = 1, _('Diamond')\n15\t    HEART = 3, _('Heart')\n16\t    CLUB = 4, _('Club')\n17\n18\n19\tclass YearInSchool(models.TextChoices):\n21\t    SOPHOMORE = 'SO', _('Sophomore')\n25\n26\n27\tclass Vehicle(models.IntegerChoices):\n30\t    JET_SKI = 3\n31\n32\t    __empty__ = _('(Unknown)')\n33\n35\tclass Gender(models.TextChoices):\n36\t    MALE = 'M'\n37\t    FEMALE = 'F'\n38\t    NOT_SPECIFIED = 'X'\n39\n41\n42\n43\tclass ChoicesTests(SimpleTestCase):\n44\t    def test_integerchoices(self):\n45\t        self.assertEqual(Suit.choices, [(1, 'Diamond'), (2,...\n46\t        self.assertEqual(Suit.labels, ['Diamond', 'Spade', 'Heart', 'Club'])\n53\t        self.assertEqual(Suit['DIAMOND'], Suit.DIAMOND)\n54\t        self.assertEqual(Suit(1), Suit.DIAMOND)\n55\n57\t        self.assertIsInstance(Suit.DIAMOND, Suit)\n56\t        self.assertIsInstanc...\n61\t    def test_integerchoices_auto_label(self):\n62\t        self.assertEqual(Vehicle.CAR.label, 'Carriage')\n63\t        self.assertEqual(Vehicle.TRUCK.label, 'Truck')\n64\t        self.assertEqual(Vehicle.JET_SKI.label, 'Jet Ski')\n68\t        self.assertEqual(Vehicle.labels[0], '(Unknown)')\n66\t    def test_integerchoices_empty_label(self):\n69\t        self.assertIsNone(Vehicle.values[0])\n70\t        self.assertEqual(Vehicle.names[0], '__empty__')\n71\n72\t    def test_integerchoices_functional_api(self):\n74\t        self.assertEqual(Place.labels, ['First', 'Second', 'Third'])\n75\t        self.assertEqual(Place.values, [1, 2, 3])\n76\t        self.assertEqual(Place.names, ['FIRST', 'SECOND', 'THIRD'])\n77\n80\t        self.assertIn(1, Suit)\n79\t        self.assertIn(...\n81\t        self.assertNotIn(0, Suit)\n86\t        ])\n84\t        self.assertEqual(YearInSchool.choices, [\n87\t        self.assertEqual(YearInSchool.labels, ['Freshman', 'Sophomore', 'Junior', 'Senior', 'Graduate'])\n90\n91\t        self.assertEqual(repr(YearInSchool.FRESHMAN), \"<YearInSchool.FRESHMAN: 'FR'>\")\n93\t        self.assertEqual(YearInSchool.FRESHMAN.value, 'FR')\n94\t        self.assertEqual(YearInSchool['FRESHMAN'], YearInSchool.FRESHMAN)\n98\t        self.assertIsInstance(YearInSchool.FRESHMAN, YearInSchool)\n95\t        self.assertEqual(YearInSchool('FR'), YearInSchool.FRESHMAN)\n100\t        self.assertIsInstance(YearInSchool.FRESHMAN.value, str)\n99\t        self.assertIsInstance(YearInSchool.FRESHMAN.label, Promise)\n101\n103\t        self.assertEqual(Gender.MALE.label, 'Male')\n104\t        self.assertEqual(Gender.FEMALE.label, 'Female')\n105\t        self.assertEqual(Gender.NOT_SPECIFIED.label, 'Not Specified')\n106\n108\t        self.assertEqual(Gender.choices[0], (None, '(Undeclared)'))\n107\t    def test_textchoices_empty_label(self):\n109\t        self.assertEqual(Gender.labels[0], '(Undeclared)')\n111\t        self.assertEqual(Gender.names[0], '__empty__')\n110\t        self.assertIsNone(Gender.values[0])\n112\n114\t        Medal = models.TextChoices('Medal', 'GOLD SILVER BRONZE')\n116\t        self.assertEqu...\n117\t        self.assertEqual(Medal.names, ['GOLD', 'SILVER', 'BRONZE'])\n118\n119\t    def test_textchoices_containment(self):\n120\t        self.assertIn(YearInSchool.FRESHMAN, YearInSchool)\n122\t        self.assertNotIn('XX', YearInSchool)\n125\t        class BlankStr(models.TextChoices):\n123\n126\t            EMPTY = '', '(Empty)'\n127\t            ONE = 'ONE', 'One'\n128\n133\t    def test_invalid_definition(self):\n130\t        self.assertEqual(BlankStr.values, ['', 'ONE'])\n136\t            class InvalidArgumentEnum(models.IntegerChoices):\n135\t        with self.assertRaisesMessage(TypeError, msg):\n137\t                # A string is not permitted as the second argument...\n140\t        msg = \"duplicate values found in <enum 'Fruit'>: PINEAPPLE -> APPLE\"\n141\t        with self.assertRaisesMessage(ValueError, msg):\n142\t            class Fruit(models.IntegerChoices):\n144\t                PINEAPPLE = 1, 'Pineapple'\n145\n146\t    def test_str(self):\n148\t            for member in test:\n149\t                with self.subTest(member=member):\n151\n152\n154\t    FS = b'\\x1c', 'File Separator'\n156\t    RS = b'\\x1e', 'Record Separator'\n158\n159\n161\t    PI = 3.141592653589793, '\u03c0'\n162\t    TAU = 6.283185307179586, '\u03c4'\n164\n163\n165\tclass Set(frozenset, models.Choices):\n167\t    B = {2, 3}\n170\t    INTERSECTION = A & B\n168\t    UNION = A | B\n172\n171\n173\tclass MoonLandings(datetime.date, models.Choices):\n174\t    APOLLO_11 = 1969, 7...\n175\t    APOLLO_12 = 1969, 11, 19, 'Apollo 12 (Intrepid)'\n176\t    APOLLO_14 = 1971, 2, 5, 'Apollo 14 (Antares)'\n177\t    APOLLO_15 = 1971, 7, 30, 'Apollo 15 (Falcon)'\n178\t    APOLLO_16 = 1972, 4, 21, 'Apollo 16 (Orion)'\n180\n181\n182\tclass DateAndTime(datetime.datetime, models.Choices):\n183\t    A = 2010, 10, 10, 10, 10, 10\n184\t    B = 2011, 11, 11, 11, 11, 11\n187\n188\tclass MealTimes(datetime.time, models.Choices):\n190\t    LUNCH = 13, 0\n189\t    BREAKFAST = 7, 0\n191\t    DINNER = 18, 30\n192\n193\n194\tclass Frequency(datetime.timedelta, models.Choices):\n195\t    WEEK = 0, 0, 0, 0, 0, 0, 1, 'Week'\n197\t    HOUR = 0, 0, 0, 0, 0, 1, 'Hour'\n196\t    DAY = 1, 'Day'\n198\t    MINUTE = 0, 0, 0, 0, 1, 'Hour'\n199\t    SECOND = 0, 1, 'Second'\n201\n200\n202\tclass Number(decimal.Decimal, models.Choices):\n205\t    TAU = decimal.Decimal('6.283185307179586'), '\u03c4'\n203\t    E = 2.718281828459045, 'e'\n207\n208\tclass IPv4Address(ipaddress.IPv4Address, models....\n209\t    LOCALHOST = '127.0.0.1', 'Localhost'\n210\t    GATEWAY = '192.168.0.1', 'Gateway'\n211\t    BROADCAST = '192.168.0.255', 'Broadcast'\n213\n214\tclass IPv6Address(ipaddress.IPv6Address, models.Choices):\n215\t    LOCALHOST = '::1', 'Localhost'\n217\n218\n219\tclass IPv4Network(ipaddr...\n221\t    LINK_LOCAL = '169.254.0.0/16', 'Link-Local'\n220\t    LOOPBACK = '127.0.0.0/8', 'Loopback'\n222\t    PRIVATE_USE_A = '10.0.0.0/8', 'Private-Use (Class A)'\n223\n224\n225\tclass IPv6Network(ipaddress.IPv6Network, models.Ch...\n226\t    LOOPBACK = '::1/128', 'Loopback'\n229\t    LINK_LOCAL_UNICAST = 'fe80::/10', 'Link-Local Unicast'\n230\n231\n232\tclass CustomChoicesTests(SimpleTestCase):\n233\t    def test_labels_valid(self):\n234\t        enums = (\n235\t            Separator, Constants, Set, MoonLandings, DateAndTime, MealTimes,\n236\t            Frequency, Number, IPv4Address, IPv6Address, IPv4Network,\n238\t        )\n237\t            IPv6Network,\n239\t        for choice_enum in enums:\n241\t                self.assertNotIn(None, choice_enum.labels)\n240\t            with self.subTest(choice_enum.__name__):\n242\n243\t    def test_bool_unsupported(self):\n246\t            class Boolean(bool, models.Choices):\n244\t        msg = \"type 'bool' is not an acceptable base type\"\n248\n249\t    def test_timezone_unsupported(self):\n250\t        msg = \"type 'datetime.timezone' is not an acceptable base type\"\n251\t        with self.assertRaisesMessage(TypeError, msg):\n253\t                pass\n254\n256\t        msg = 'UUID objects are immutable'\n257\t        with self.assertRaisesMessage(TypeError, msg):\n259\t                A = '972ce4eb-a95f-4a56-9339-68c208a76f18'\n258\t            class Identifier(uuid.UUID, models.Choices):",
      "applied_operators": [
        "text_perturbation"
      ]
    },
    {
      "action": "sed -i \"/cls._value2label_map_ = dict(zip(cls._value2member_map_, labels))/a\\\\\n        cls.do_not_call_in_templates = True\" django/db/models/enums.py && nl -ba django/db/models/enums.py | sed -n '1,240p'",
      "original": "     1\timport enum\n     2\t\n     3\tfrom django.utils.functional import Promise\n     4\t\n     5\t__all__ = ['Choices', 'IntegerChoices', 'TextChoices']\n     6\t\n     7\t\n     8\tclass ChoicesMeta(enum.EnumMeta):\n     9\t    \"\"\"A metaclass for creating a enum choices.\"\"\"\n    10\t\n    11\t    def __new__(metacls, classname, bases, classdict):\n    12\t        labels = []\n    13\t        for key in classdict._member_names:\n    14\t            value = classdict[key]\n    15\t            if (\n    16\t                isinstance(value, (list, tuple)) and\n    17\t                len(value) > 1 and\n    18\t                isinstance(value[-1], (Promise, str))\n    19\t            ):\n    20\t                *value, label = value\n    21\t                value = tuple(value)\n    22\t            else:\n    23\t                label = key.replace('_', ' ').title()\n    24\t            labels.append(label)\n    25\t            # Use dict.__setitem__() to suppress defenses against double\n    26\t            # assignment in enum's classdict.\n    27\t            dict.__setitem__(classdict, key, value)\n    28\t        cls = super().__new__(metacls, classname, bases, classdict)\n    29\t        cls._value2label_map_ = dict(zip(cls._value2member_map_, labels))\n    30\t        cls.do_not_call_in_templates = True\n    31\t        # Add a label property to instances of enum which uses the enum member\n    32\t        # that is passed in as \"self\" as the value to use when looking up the\n    33\t        # label in the choices.\n    34\t        cls.label = property(lambda self: cls._value2label_map_.get(self.value))\n    35\t        return enum.unique(cls)\n    36\t\n    37\t    def __contains__(cls, member):\n    38\t        if not isinstance(member, enum.Enum):\n    39\t            # Allow non-enums to match against member values.\n    40\t            return any(x.value == member for x in cls)\n    41\t        return super().__contains__(member)\n    42\t\n    43\t    @property\n    44\t    def names(cls):\n    45\t        empty = ['__empty__'] if hasattr(cls, '__empty__') else []\n    46\t        return empty + [member.name for member in cls]\n    47\t\n    48\t    @property\n    49\t    def choices(cls):\n    50\t        empty = [(None, cls.__empty__)] if hasattr(cls, '__empty__') else []\n    51\t        return empty + [(member.value, member.label) for member in cls]\n    52\t\n    53\t    @property\n    54\t    def labels(cls):\n    55\t        return [label for _, label in cls.choices]\n    56\t\n    57\t    @property\n    58\t    def values(cls):\n    59\t        return [value for value, _ in cls.choices]\n    60\t\n    61\t\n    62\tclass Choices(enum.Enum, metaclass=ChoicesMeta):\n    63\t    \"\"\"Class for creating enumerated choices.\"\"\"\n    64\t\n    65\t    def __str__(self):\n    66\t        \"\"\"\n    67\t        Use value when cast to str, so that Choices set as model instance\n    68\t        attributes are rendered as expected in templates and similar contexts.\n    69\t        \"\"\"\n    70\t        return str(self.value)\n    71\t\n    72\t\n    73\tclass IntegerChoices(int, Choices):\n    74\t    \"\"\"Class for creating enumerated integer choices.\"\"\"\n    75\t    pass\n    76\t\n    77\t\n    78\tclass TextChoices(str, Choices):\n    79\t    \"\"\"Class for creating enumerated string choices.\"\"\"\n    80\t\n    81\t    def _generate_next_value_(name, start, count, last_values):\n    82\t        return name\n",
      "perturbed": "2\n1\timport enum\n3\tfrom django.utils.functional import Promise\n5\t__all__ = ['Choices', 'IntegerChoices', 'TextChoices']\n4\n6\n7\n8\tclass ChoicesMeta(enum.EnumMeta):\n11\t    def __new__(metacls, classname, bases, classdict):\n10\n12\t        labels = []\n13\t        for key in classdict._member_names:\n14\t            value = classdict[key]\n17\t                len(value) > 1 and\n15\t            if (\n18\t                isinstance(value[-1], (Promise, str))\n19\t            ):\n21\t                value = tuple(value)\n22\t            else:\n24\t            labels.append(label)\n28\t        cls = super().__new__(metacls, classname, bases, classdict)\n25\t            # Use dict.__setite...\n29\t        cls._value2label_map_ = dict(zip(cls._value2member_map_, labels))\n31\t        # Add a label property to instances o...\n30\t        cls.do_not_call_in_templates = True\n34\t        cls.label = property(lambda self: cls._value2label_map_.get(self.value))\n33\t        # label in the choices.\n36\n37\t    def __contains__(cls, member):\n39\t            # Allow non-enums to match against member values.\n38\t        if not isinstance(member, enum.Enum):\n40\t            return any(x.value == member for x in cls)\n41\t        return super().__contains__(member)\n42\n46\t        return empty + [member.name for member in cls]\n43\t    @property\n47\n48\t    @property\n49\t    def choices(cls):\n51\t        return empty + [(member.value, member.label) for member in cls]\n52\n53\t    @property\n54\t    def labels(cls):\n56\n57\t    @property\n58\t    def values(cls):\n59\t        return [value for value, _ in cls.choices]\n61\n60\n64\n63\t    \"\"\"Class for creating enumerated choices.\"\"\"\n67\t        Use value when cast to str, so that Choices set as model instance\n65\t    def __str__(self):\n69\t        \"\"\"\n70\t        return str(self.value)\n71\n72\n73\tclass IntegerChoices(int, Choices):\n76\n74\t    \"\"\"Class for creating enumerated int...\n77\n# additional context omitted\n78\tclass TextChoices(str, Choices):\n** output may be incomplete **\n80",
      "applied_operators": [
        "text_perturbation"
      ]
    },
    {
      "action": "python - <<'PY'\nfrom django.db import models\nclass TestYear(models.TextChoices):\n    FRESHMAN = 'FR', 'Freshman'\nprint('do_not_call_in_templates on TestYear:', getattr(TestYear, 'do_not_call_in_templates', None))\nPY",
      "original": "do_not_call_in_templates on TestYear: True\n",
      "perturbed": "do_not_call_in_templates on TestYear: True",
      "applied_operators": [
        "text_perturbation"
      ]
    },
    {
      "action": "pytest tests/model_enums/tests.py -q",
      "original": "bash: line 1: pytest: command not found\n",
      "perturbed": "bash: line 1: pytest: command not found",
      "applied_operators": [
        "text_perturbation"
      ]
    }
  ]
}