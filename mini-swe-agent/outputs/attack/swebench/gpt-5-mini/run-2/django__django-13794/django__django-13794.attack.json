{
  "info": {
    "total_observations": 14,
    "python_observations": 1,
    "text_observations": 13,
    "ast_operators_applied": 0,
    "text_perturbation_applied": 8,
    "skipped": 6
  },
  "perturbations": [
    {
      "action": "grep -nR \"def add\" django || true && grep -nR \"add(\" django/template || true && nl -ba django/template/defaultfilters.py | sed -n '1,240p'",
      "original": "django/core/servers/basehttp.py:129:    def address_string(self):\ndjango/core/checks/security/sessions.py:6:def add_session_cookie_message(message):\ndjango/core/checks/security/sessions.py:36:def add_httponly_message(message):\ndjango/core/cache/backends/locmem.py:25:    def add(self, key, value, timeout=DEFAULT_TIMEOUT, version=None):\ndjango/core/cache/backends/db.py:102:    def add(self, key, value, timeout=DEFAULT_TIMEOUT, version=None):\ndjango/core/cache/backends/memcached.py:69:    def add(self, key, value, timeout=DEFAULT_TIMEOUT, version=None):\ndjango/core/cache/backends/filebased.py:25:    def add(self, key, value, timeout=DEFAULT_TIMEOUT, version=None):\ndjango/core/cache/backends/dummy.py:10:    def add(self, key, value, timeout=DEFAULT_TIMEOUT, version=None):\ndjango/core/cache/backends/base.py:108:    def add(self, key, value, timeout=DEFAULT_TIMEOUT, version=None):\ndjango/core/management/templates.py:40:    def add_arguments(self, parser):\ndjango/core/management/commands/sqlsequencereset.py:10:    def add_arguments(self, parser):\ndjango/core/management/commands/runserver.py:37:    def add_arguments(self, parser):\ndjango/core/management/commands/dbshell.py:15:    def add_arguments(self, parser):\ndjango/core/management/commands/dumpdata.py:20:    def add_arguments(self, parser):\ndjango/core/management/commands/compilemessages.py:38:    def add_arguments(self, parser):\ndjango/core/management/commands/showmigrations.py:12:    def add_arguments(self, parser):\ndjango/core/management/commands/shell.py:20:    def add_arguments(self, parser):\ndjango/core/management/commands/sqlmigrate.py:12:    def add_arguments(self, parser):\ndjango/core/management/commands/createcachetable.py:15:    def add_arguments(self, parser):\ndjango/core/management/commands/squashmigrations.py:15:    def add_arguments(self, parser):\ndjango/core/management/commands/makemessages.py:216:    def add_arguments(self, parser):\ndjango/core/management/commands/diffsettings.py:15:    def add_arguments(self, parser):\ndjango/core/management/commands/loaddata.py:45:    def add_arguments(self, parser):\ndjango/core/management/commands/test.py:25:    def add_arguments(self, parser):\ndjango/core/management/commands/inspectdb.py:15:    def add_arguments(self, parser):\ndjango/core/management/commands/check.py:12:    def add_arguments(self, parser):\ndjango/core/management/commands/testserver.py:11:    def add_arguments(self, parser):\ndjango/core/management/commands/makemigrations.py:27:    def add_arguments(self, parser):\ndjango/core/management/commands/flush.py:17:    def add_arguments(self, parser):\ndjango/core/management/commands/sendtestemail.py:12:    def add_arguments(self, parser):\ndjango/core/management/commands/sqlflush.py:14:    def add_arguments(self, parser):\ndjango/core/management/commands/migrate.py:25:    def add_arguments(self, parser):\ndjango/core/management/base.py:113:    def add_usage(self, usage, actions, *args, **kwargs):\ndjango/core/management/base.py:116:    def add_arguments(self, actions):\ndjango/core/management/base.py:323:    def add_arguments(self, parser):\ndjango/core/management/base.py:524:    def add_arguments(self, parser):\ndjango/core/management/base.py:565:    def add_arguments(self, parser):\ndjango/db/migrations/graph.py:37:    def add_child(self, child):\ndjango/db/migrations/graph.py:40:    def add_parent(self, parent):\ndjango/db/migrations/graph.py:88:    def add_node(self, key, migration):\ndjango/db/migrations/graph.py:94:    def add_dummy_node(self, key, origin, error_message):\ndjango/db/migrations/graph.py:99:    def add_dependency(self, migration, child, parent, skip_validation=False):\ndjango/db/migrations/loader.py:180:    def add_internal_dependencies(self, key, migration):\ndjango/db/migrations/loader.py:190:    def add_external_dependencies(self, key, migration):\ndjango/db/migrations/autodetector.py:435:    def add_operation(self, app_label, operation, dependencies=None, beginning=False):\ndjango/db/migrations/state.py:91:    def add_model(self, model_state):\ndjango/db/backends/base/schema.py:355:    def add_index(self, model, index):\ndjango/db/backends/base/schema.py:363:    def add_constraint(self, model, constraint):\ndjango/db/backends/base/schema.py:451:    def add_field(self, model, field):\ndjango/db/backends/mysql/schema.py:89:    def add_field(self, model, field):\ndjango/db/backends/sqlite3/schema.py:322:    def add_field(self, model, field):\ndjango/db/backends/sqlite3/schema.py:421:    def add_constraint(self, model, constraint):\ndjango/db/backends/postgresql/schema.py:207:    def add_index(self, model, index, concurrently=False):\ndjango/db/models/fields/related_descriptors.py:643:        def add(self, *objs, bulk=True):\ndjango/db/models/fields/related_descriptors.py:946:        def add(self, *objs, through_defaults=None):\ndjango/db/models/deletion.py:99:    def add(self, objs, source=None, nullable=False, reverse_dependency=False):\ndjango/db/models/deletion.py:123:    def add_dependency(self, model, dependency, reverse_dependency=False):\ndjango/db/models/deletion.py:129:    def add_field_update(self, field, value, objs):\ndjango/db/models/deletion.py:139:    def add_restricted_objects(self, field, objs):\ndjango/db/models/options.py:289:    def add_manager(self, manager):\ndjango/db/models/options.py:293:    def add_field(self, field, private=False):\ndjango/db/models/sql/subqueries.py:77:    def add_update_values(self, values):\ndjango/db/models/sql/subqueries.py:99:    def add_update_fields(self, values_seq):\ndjango/db/models/sql/subqueries.py:111:    def add_related_update(self, model, field, value):\ndjango/db/models/sql/query.py:1034:    def add_annotation(self, annotation, alias, is_summary=False, select=True):\ndjango/db/models/sql/query.py:1375:    def add_filter(self, filter_clause):\ndjango/db/models/sql/query.py:1378:    def add_q(self, q_object):\ndjango/db/models/sql/query.py:1442:    def add_filtered_relation(self, filtered_relation, alias):\ndjango/db/models/sql/query.py:1896:    def add_select_col(self, col, name):\ndjango/db/models/sql/query.py:1904:    def add_distinct_fields(self, *field_names):\ndjango/db/models/sql/query.py:1911:    def add_fields(self, field_names, allow_m2m=True):\ndjango/db/models/sql/query.py:1954:    def add_ordering(self, *ordering):\ndjango/db/models/sql/query.py:2051:    def add_select_related(self, fields):\ndjango/db/models/sql/query.py:2067:    def add_extra(self, select, select_params, where, params, tables, order_by):\ndjango/db/models/sql/query.py:2103:    def add_deferred_loading(self, field_names):\ndjango/db/models/sql/query.py:2123:    def add_immediate_loading(self, field_names):\ndjango/db/models/sql/query.py:2383:def add_to_dict(data, key, value):\ndjango/db/models/sql/query.py:2423:    def add_votes(self, votes):\ndjango/db/models/base.py:324:    def add_to_class(cls, name, value):\ndjango/db/models/query.py:1601:    def add_prefix(self, prefix):\ndjango/template/loader_tags.py:21:    def add_blocks(self, blocks):\ndjango/template/response.py:85:    def add_post_render_callback(self, callback):\ndjango/template/defaultfilters.py:62:def addslashes(value):\ndjango/template/defaultfilters.py:675:def add(value, arg):\ndjango/template/base.py:555:    def add_library(self, lib):\ndjango/test/runner.py:58:    def addError(self, test, err):\ndjango/test/runner.py:68:    def addFailure(self, test, err):\ndjango/test/runner.py:73:    def addSubTest(self, test, subtest, err):\ndjango/test/runner.py:96:    def addError(self, test, err):\ndjango/test/runner.py:100:    def addFailure(self, test, err):\ndjango/test/runner.py:232:    def addError(self, test, err):\ndjango/test/runner.py:237:    def addFailure(self, test, err):\ndjango/test/runner.py:242:    def addSubTest(self, test, subtest, err):\ndjango/test/runner.py:253:    def addSuccess(self, test):\ndjango/test/runner.py:256:    def addSkip(self, test, reason):\ndjango/test/runner.py:259:    def addExpectedFailure(self, test, err):\ndjango/test/runner.py:269:    def addUnexpectedSuccess(self, test):\ndjango/test/runner.py:487:    def add_arguments(cls, parser):\ndjango/test/testcases.py:1278:    def add_condition(self, condition, reason):\ndjango/forms/forms.py:177:    def add_prefix(self, field_name):\ndjango/forms/forms.py:186:    def add_initial_prefix(self, field_name):\ndjango/forms/forms.py:306:    def add_error(self, field, error):\ndjango/forms/models.py:824:    def add_fields(self, form, index):\ndjango/forms/models.py:963:    def add_fields(self, form, index):\ndjango/forms/formsets.py:398:    def add_fields(self, form, index):\ndjango/forms/formsets.py:419:    def add_prefix(self, index):\ndjango/contrib/gis/db/backends/spatialite/schema.py:104:    def add_field(self, model, field):\ndjango/contrib/gis/db/backends/oracle/schema.py:70:    def add_field(self, model, field):\ndjango/contrib/gis/db/backends/mysql/schema.py:44:    def add_field(self, model, field):\ndjango/contrib/gis/gdal/geometries.py:650:    def add(self, geom):\ndjango/contrib/gis/utils/srs.py:5:def add_srs_entry(srs, auth_name='EPSG', auth_srid=None, ref_sys_name=None,\ndjango/contrib/gis/feeds.py:19:    def add_georss_point(self, handler, coords, w3c_geo=False):\ndjango/contrib/gis/feeds.py:32:    def add_georss_element(self, handler, item, w3c_geo=False):\ndjango/contrib/gis/feeds.py:87:    def add_item_elements(self, handler, item):\ndjango/contrib/gis/feeds.py:91:    def add_root_elements(self, handler):\ndjango/contrib/gis/feeds.py:102:    def add_item_elements(self, handler, item):\ndjango/contrib/gis/feeds.py:106:    def add_root_elements(self, handler):\ndjango/contrib/gis/feeds.py:117:    def add_item_elements(self, handler, item):\ndjango/contrib/gis/feeds.py:121:    def add_root_elements(self, handler):\ndjango/contrib/gis/management/commands/ogrinspect.py:42:    def add_arguments(self, parser):\ndjango/contrib/syndication/views.py:15:def add_domain(domain, url, secure=False):\ndjango/contrib/sitemaps/management/commands/ping_google.py:8:    def add_arguments(self, parser):\ndjango/contrib/staticfiles/management/commands/runserver.py:11:    def add_arguments(self, parser):\ndjango/contrib/staticfiles/management/commands/findstatic.py:11:    def add_arguments(self, parser):\ndjango/contrib/staticfiles/management/commands/collectstatic.py:38:    def add_arguments(self, parser):\ndjango/contrib/admin/templatetags/admin_urls.py:22:def add_preserved_filters(context, url, popup=False, to_field=None):\ndjango/contrib/admin/utils.py:167:    def add_edge(self, source, target):\ndjango/contrib/admin/options.py:1658:    def add_view(self, request, form_url='', extra_context=None):\ndjango/contrib/admin/sites.py:155:    def add_action(self, action, name=None):\ndjango/contrib/contenttypes/fields.py:602:        def add(self, *objs, bulk=True):\ndjango/contrib/contenttypes/migrations/0002_remove_content_type_name.py:4:def add_legacy_name(apps, schema_editor):\ndjango/contrib/contenttypes/management/commands/remove_stale_contenttypes.py:12:    def add_arguments(self, parser):\ndjango/contrib/auth/admin.py:97:    def add_view(self, request, form_url='', extra_context=None):\ndjango/contrib/auth/management/commands/changepassword.py:23:    def add_arguments(self, parser):\ndjango/contrib/auth/management/commands/createsuperuser.py:34:    def add_arguments(self, parser):\ndjango/contrib/messages/storage/base.py:130:    def add(self, level, message, extra_tags=''):\ndjango/contrib/messages/api.py:16:def add_message(request, level, message, extra_tags='', fail_silently=False):\ndjango/utils/datastructures.py:13:    def add(self, item):\ndjango/utils/xmlutils.py:14:    def addQuickElement(self, name, contents=None, attrs=None):\ndjango/utils/tree.py:78:    def add(self, data, conn_type, squash=True):\ndjango/utils/feedgenerator.py:85:    def add_item(self, title, link, description, author_email=None,\ndjango/utils/feedgenerator.py:126:    def add_root_elements(self, handler):\ndjango/utils/feedgenerator.py:139:    def add_item_elements(self, handler, item):\ndjango/utils/feedgenerator.py:212:    def add_root_elements(self, handler):\ndjango/utils/feedgenerator.py:235:    def add_item_elements(self, handler, item):\ndjango/utils/feedgenerator.py:246:    def add_item_elements(self, handler, item):\ndjango/utils/feedgenerator.py:313:    def add_root_elements(self, handler):\ndjango/utils/feedgenerator.py:341:    def add_item_elements(self, handler, item):\ndjango/utils/text.py:66:    def add_truncation_text(self, text, truncate=None):\ndjango/utils/cache.py:270:def add_never_cache_headers(response):\ndjango/template/defaultfilters.py:675:def add(value, arg):\n     1\t\"\"\"Default variable filters.\"\"\"\n     2\timport random as random_module\n     3\timport re\n     4\timport types\n     5\tfrom decimal import ROUND_HALF_UP, Context, Decimal, InvalidOperation\n     6\tfrom functools import wraps\n     7\tfrom operator import itemgetter\n     8\tfrom pprint import pformat\n     9\tfrom urllib.parse import quote\n    10\t\n    11\tfrom django.utils import formats\n    12\tfrom django.utils.dateformat import format, time_format\n    13\tfrom django.utils.encoding import iri_to_uri\n    14\tfrom django.utils.html import (\n    15\t    avoid_wrapping, conditional_escape, escape, escapejs,\n    16\t    json_script as _json_script, linebreaks, strip_tags, urlize as _urlize,\n    17\t)\n    18\tfrom django.utils.safestring import SafeData, mark_safe\n    19\tfrom django.utils.text import (\n    20\t    Truncator, normalize_newlines, phone2numeric, slugify as _slugify, wrap,\n    21\t)\n    22\tfrom django.utils.timesince import timesince, timeuntil\n    23\tfrom django.utils.translation import gettext, ngettext\n    24\t\n    25\tfrom .base import Variable, VariableDoesNotExist\n    26\tfrom .library import Library\n    27\t\n    28\tregister = Library()\n    29\t\n    30\t\n    31\t#######################\n    32\t# STRING DECORATOR    #\n    33\t#######################\n    34\t\n    35\tdef stringfilter(func):\n    36\t    \"\"\"\n    37\t    Decorator for filters which should only receive strings. The object\n    38\t    passed as the first positional argument will be converted to a string.\n    39\t    \"\"\"\n    40\t    def _dec(*args, **kwargs):\n    41\t        args = list(args)\n    42\t        args[0] = str(args[0])\n    43\t        if (isinstance(args[0], SafeData) and\n    44\t                getattr(_dec._decorated_function, 'is_safe', False)):\n    45\t            return mark_safe(func(*args, **kwargs))\n    46\t        return func(*args, **kwargs)\n    47\t\n    48\t    # Include a reference to the real function (used to check original\n    49\t    # arguments by the template parser, and to bear the 'is_safe' attribute\n    50\t    # when multiple decorators are applied).\n    51\t    _dec._decorated_function = getattr(func, '_decorated_function', func)\n    52\t\n    53\t    return wraps(func)(_dec)\n    54\t\n    55\t\n    56\t###################\n    57\t# STRINGS         #\n    58\t###################\n    59\t\n    60\t@register.filter(is_safe=True)\n    61\t@stringfilter\n    62\tdef addslashes(value):\n    63\t    \"\"\"\n    64\t    Add slashes before quotes. Useful for escaping strings in CSV, for\n    65\t    example. Less useful for escaping JavaScript; use the ``escapejs``\n    66\t    filter instead.\n    67\t    \"\"\"\n    68\t    return value.replace('\\\\', '\\\\\\\\').replace('\"', '\\\\\"').replace(\"'\", \"\\\\'\")\n    69\t\n    70\t\n    71\t@register.filter(is_safe=True)\n    72\t@stringfilter\n    73\tdef capfirst(value):\n    74\t    \"\"\"Capitalize the first character of the value.\"\"\"\n    75\t    return value and value[0].upper() + value[1:]\n    76\t\n    77\t\n    78\t@register.filter(\"escapejs\")\n    79\t@stringfilter\n    80\tdef escapejs_filter(value):\n    81\t    \"\"\"Hex encode characters for use in JavaScript strings.\"\"\"\n    82\t    return escapejs(value)\n    83\t\n    84\t\n    85\t@register.filter(is_safe=True)\n    86\tdef json_script(value, element_id):\n    87\t    \"\"\"\n    88\t    Output value JSON-encoded, wrapped in a <script type=\"application/json\">\n    89\t    tag.\n    90\t    \"\"\"\n    91\t    return _json_script(value, element_id)\n    92\t\n    93\t\n    94\t@register.filter(is_safe=True)\n    95\tdef floatformat(text, arg=-1):\n    96\t    \"\"\"\n    97\t    Display a float to a specified number of decimal places.\n    98\t\n    99\t    If called without an argument, display the floating point number with one\n   100\t    decimal place -- but only if there's a decimal place to be displayed:\n   101\t\n   102\t    * num1 = 34.23234\n   103\t    * num2 = 34.00000\n   104\t    * num3 = 34.26000\n   105\t    * {{ num1|floatformat }} displays \"34.2\"\n   106\t    * {{ num2|floatformat }} displays \"34\"\n   107\t    * {{ num3|floatformat }} displays \"34.3\"\n   108\t\n   109\t    If arg is positive, always display exactly arg number of decimal places:\n   110\t\n   111\t    * {{ num1|floatformat:3 }} displays \"34.232\"\n   112\t    * {{ num2|floatformat:3 }} displays \"34.000\"\n   113\t    * {{ num3|floatformat:3 }} displays \"34.260\"\n   114\t\n   115\t    If arg is negative, display arg number of decimal places -- but only if\n   116\t    there are places to be displayed:\n   117\t\n   118\t    * {{ num1|floatformat:\"-3\" }} displays \"34.232\"\n   119\t    * {{ num2|floatformat:\"-3\" }} displays \"34\"\n   120\t    * {{ num3|floatformat:\"-3\" }} displays \"34.260\"\n   121\t\n   122\t    If arg has the 'g' suffix, force the result to be grouped by the\n   123\t    THOUSAND_SEPARATOR for the active locale. When the active locale is\n   124\t    en (English):\n   125\t\n   126\t    * {{ 6666.6666|floatformat:\"2g\" }} displays \"6,666.67\"\n   127\t    * {{ 10000|floatformat:\"g\" }} displays \"10,000\"\n   128\t\n   129\t    If the input float is infinity or NaN, display the string representation\n   130\t    of that value.\n   131\t    \"\"\"\n   132\t    force_grouping = False\n   133\t    if isinstance(arg, str) and arg.endswith('g'):\n   134\t        force_grouping = True\n   135\t        arg = arg[:-1] or -1\n   136\t    try:\n   137\t        input_val = repr(text)\n   138\t        d = Decimal(input_val)\n   139\t    except InvalidOperation:\n   140\t        try:\n   141\t            d = Decimal(str(float(text)))\n   142\t        except (ValueError, InvalidOperation, TypeError):\n   143\t            return ''\n   144\t    try:\n   145\t        p = int(arg)\n   146\t    except ValueError:\n   147\t        return input_val\n   148\t\n   149\t    try:\n   150\t        m = int(d) - d\n   151\t    except (ValueError, OverflowError, InvalidOperation):\n   152\t        return input_val\n   153\t\n   154\t    if not m and p < 0:\n   155\t        return mark_safe(\n   156\t            formats.number_format('%d' % (int(d)), 0, force_grouping=force_grouping),\n   157\t        )\n   158\t\n   159\t    exp = Decimal(1).scaleb(-abs(p))\n   160\t    # Set the precision high enough to avoid an exception (#15789).\n   161\t    tupl = d.as_tuple()\n   162\t    units = len(tupl[1])\n   163\t    units += -tupl[2] if m else tupl[2]\n   164\t    prec = abs(p) + units + 1\n   165\t\n   166\t    # Avoid conversion to scientific notation by accessing `sign`, `digits`,\n   167\t    # and `exponent` from Decimal.as_tuple() directly.\n   168\t    rounded_d = d.quantize(exp, ROUND_HALF_UP, Context(prec=prec))\n   169\t    sign, digits, exponent = rounded_d.as_tuple()\n   170\t    digits = [str(digit) for digit in reversed(digits)]\n   171\t    while len(digits) <= abs(exponent):\n   172\t        digits.append('0')\n   173\t    digits.insert(-exponent, '.')\n   174\t    if sign and rounded_d:\n   175\t        digits.append('-')\n   176\t    number = ''.join(reversed(digits))\n   177\t    return mark_safe(\n   178\t        formats.number_format(number, abs(p), force_grouping=force_grouping),\n   179\t    )\n   180\t\n   181\t\n   182\t@register.filter(is_safe=True)\n   183\t@stringfilter\n   184\tdef iriencode(value):\n   185\t    \"\"\"Escape an IRI value for use in a URL.\"\"\"\n   186\t    return iri_to_uri(value)\n   187\t\n   188\t\n   189\t@register.filter(is_safe=True, needs_autoescape=True)\n   190\t@stringfilter\n   191\tdef linenumbers(value, autoescape=True):\n   192\t    \"\"\"Display text with line numbers.\"\"\"\n   193\t    lines = value.split('\\n')\n   194\t    # Find the maximum width of the line count, for use with zero padding\n   195\t    # string format command\n   196\t    width = str(len(str(len(lines))))\n   197\t    if not autoescape or isinstance(value, SafeData):\n   198\t        for i, line in enumerate(lines):\n   199\t            lines[i] = (\"%0\" + width + \"d. %s\") % (i + 1, line)\n   200\t    else:\n   201\t        for i, line in enumerate(lines):\n   202\t            lines[i] = (\"%0\" + width + \"d. %s\") % (i + 1, escape(line))\n   203\t    return mark_safe('\\n'.join(lines))\n   204\t\n   205\t\n   206\t@register.filter(is_safe=True)\n   207\t@stringfilter\n   208\tdef lower(value):\n   209\t    \"\"\"Convert a string into all lowercase.\"\"\"\n   210\t    return value.lower()\n   211\t\n   212\t\n   213\t@register.filter(is_safe=False)\n   214\t@stringfilter\n   215\tdef make_list(value):\n   216\t    \"\"\"\n   217\t    Return the value turned into a list.\n   218\t\n   219\t    For an integer, it's a list of digits.\n   220\t    For a string, it's a list of characters.\n   221\t    \"\"\"\n   222\t    return list(value)\n   223\t\n   224\t\n   225\t@register.filter(is_safe=True)\n   226\t@stringfilter\n   227\tdef slugify(value):\n   228\t    \"\"\"\n   229\t    Convert to ASCII. Convert spaces to hyphens. Remove characters that aren't\n   230\t    alphanumerics, underscores, or hyphens. Convert to lowercase. Also strip\n   231\t    leading and trailing whitespace.\n   232\t    \"\"\"\n   233\t    return _slugify(value)\n   234\t\n   235\t\n   236\t@register.filter(is_safe=True)\n   237\tdef stringformat(value, arg):\n   238\t    \"\"\"\n   239\t    Format the variable according to the arg, a string formatting specifier.\n   240\t\n",
      "perturbed": "django/core/servers/basehttp.py:129:    def address_string(self):\ndjango/core/checks/security/sessions.py:6:def add_session_cookie_message(message):\ndjango/core/cache/backends/locmem.py:25:    def add(self, key, value, timeout=DEFAULT_TIMEOUT, version=None):\ndjango/core/checks/security/sessions.py:36:def add_httponly_message(mes...\ndjango/core/cache/backends/db.py:102:    def add(self, key, value, timeout=DEFAULT_TIMEOUT, version=None):\ndjango/core/cache/backends/memcached.py:69:    def add(self, key, value, timeout=DEFAULT_TIMEOUT, version=None):\ndjango/core/cache/backends/filebased.py:25:    def add(self, key, value, timeout=DEFAULT_TIMEOUT, version=None):\ndjango/core/cache/backends/dummy.py:10:    def add(self, key, value, timeout=DEFAULT_TIMEOUT, version=None):\ndjango/core/manageme...\ndjango/core/cache/backends/base.py:108:    def add(self, key, value, timeou...\ndjango/core/management/commands/runserver.py:37:    def add_arguments(self, parser):\ndjango/core/management/commands/dbshell....\ndjango/core/management/commands/shell.py:20:    def add_arguments(self, parser):\ndjango/core/management/commands/showmigrations.py:12:    def add_arguments(self, parser):\ndjango/core/management/commands/sqlmigrate.py:12:    def add_arguments(self, parser):\ndjango/core/management/commands/createcachetable.py:15:    def add_arguments(self, parser):\ndjango/core/management/commands/squashmigrations.py:15:    def add_arguments(self, parser):\ndjango/core/management/commands/makemessages.py:216:    def add_arguments(self, parser):\ndjango/core/management/commands/diffsettings.py:15:    def add_arguments(self, parser):\ndjango/core/management/commands/loaddata.py:45:    def add_arguments(self, parser):\ndjango/core/management/commands/inspectdb.py:...\ndjango/core/management/commands/test.py:25:    def add_arguments(self, parser):\ndjango/core/management/commands/check.py:12:    def add_arguments(self, parser):\ndjango/core/management/commands/testserver.py:11:    def add_arguments(self, parser):\ndjango/core/management/commands/makemigrations.py:27:    def add_argum...\ndjango/core/management/commands/flush.py:17:    def add_arguments(self, parser):\ndjango/core/management/commands/sqlflush.py:14:    def add_arguments(self, parser):\ndjango/core/management/base.py:113:    def add_usage(self, usage, actions, *args, **kwargs):\ndjango/core/management/base.py:116:    def add_arguments(self, actions):\ndjango/core/management/base.py:323:    def add_arguments(self, parser):\ndjango/core/management/base.py:524:    def add_arguments(self, parser):\ndjango/db/migrations/graph.py:37:    def add_child(self, child):\ndjango/db/migrations/graph.py:99:    def add_dependency(self, migration, child, parent, skip_validation=False):\ndjango/db/migrations/graph.py:88:    def add_node(self, key, migration):\ndjango/db/migrations/loader.py:190:    def add_external_dependencies(self, key, migration):\ndjango/db/migrations/state.py:91:    def add_model(self, model_state):\ndjango/db/backends/base/schema.py:355:    def add_index(self, ...\ndjango/db/backends/base/schema.py:363:    def add_constrain...\ndjango/db/backends/base/schema.py:451:    def add_field(self, model, field):\ndjango/db/backends/mysql/schema.py:89:    def add_field(self, model, field):\ndjango/db/backends/sqlite3/schema.py:421:    def add_constraint(self, model, constraint):\ndjango/db/models/fields/related_descriptors.py:643:        def add(self, *objs, bulk=True):\ndjango/db/backends/postgresql/schema.py:207:    def add_index(self, model, index, concurrently=False):\ndjango/db/models/deletion.py:99:    def add(...\ndjango/db/models/fields/related_descriptors.py:946:        def add(self, *objs, through_defaults=None):\ndjango/db/models/options.py:293:    d...\ndjango/db/models/sql/subqueries.py:77:    def add_update_values(self, values):\ndjango/db/models/sql/subqueries.py:99:    def add_update_fields(self, values_seq):\ndjango/db/models/sql/subqueries.py:111:    def add_related_update(self, model, field, value):\ndjango/db/models/sql/query.py:1378:    def add_q(self, q_object):\ndjango/db/models/sql/query.py:1896:    def add_select_col(self, col, name):\ndjango/db/models/sql/query.py:1442:    def add_filtered_relation(self, filtered_relation, alias):\ndjango/db/models/sql/query.py:1904:    def add_distinct_fields(self, *field_names):\ndjango/db/models/sql/query.py:1911:    def add_fields(self, field_names, allow_m2m=True):\ndjango/db/models/sql/query.py:1954:    def add_ordering(self, *ordering):\ndjango/db/models/sql/query.py:2051:    def add_select_related(self, fields):\ndjango/db/models/sql/query.py:2067:    def add_extra(self, select, select_params, where, params, tables, order_by):\ndjango/db/models/sql/query.py:2423:    def add_votes(self, votes):\ndjango/db/models/base.py:324:    def add_to_class(cls, name, value):\ndjango/template/loader_tags.py:21:    def...\ndjango/template/defaultfilters.py:62:def addslashes(value):\ndjango/template/response.py:85:    def add_post_render_callback(self, callback):\ndjango/test/runner.py:58:    def addError(self, test, err):\ndjango/template/base.py:555:    def add_library(self, lib):\ndjango/test/runner.py:68:    def addFailure(self, test, err):\ndjango/test/runner.py:73:    def addSubTest(self, test, subtest, err):\ndjango/test/runner.py:237:    def addFailure(self, test, err):\ndjango/test/runner.py:242:    def addSubTest(self, test, subtest, err):\ndjango/test/runner.py:253:    def addSuccess(self, test):\ndjango/test/runner.py:256:    def addSkip(self, test, reason):\ndjango/test/runner.py:259:    def addExpectedFailure(self, test, err):\ndjango/test/testcases.py:1278:    def add_condition(self, condition, reason):\ndjango/test/runner.py:269:    def addUnexpectedSucc...\ndjango/forms/forms.py:177:    def add_prefix(self, field_name):\ndjango/forms/forms.py:306:    def add_error(self, field, error):\ndjango/forms/models.py:824:    def add_fields(self, form, index):\ndjango/forms/models.py:963:    def add_fields(self, form, index):\ndjango/forms/formsets.py:419:    def add_prefix(self, index):\ndjango/forms/formsets.py:398:    def add_fields(self, form, index):\ndjango/contrib/gis/db/backends/spatialite/schema.py:104:    def add_field(self, model, field):\ndjango/contrib/gis/db/backends/oracle/schema.py:70:    def add_field(self...\ndjango/contrib/gis/gdal/geometries.py:650:    def add(self, geom):\ndjango/contrib/gis/utils/srs.py:5:def add_srs_entry(srs, auth_name='EPSG', auth_srid=None, ref_sys_name=None,\ndjango/contrib/gis/feeds.py:19:    def add_georss_point(self, handler, coords, w3c_geo=False):\ndjango/contrib/gis/feeds.py:32:    def add_georss_element(self, handler, item, w3c_geo=False):\ndjango/contrib/gis/feeds.py:91:    def add_root_elements(self, handler):\ndjango/contrib/gis/feeds.py:87:    def add_item_elements(self, handler, item):\ndjango/contrib/gis/feeds.py:102:    def add_item_elements(self, handler, item):\ndjango/contrib/gis/feeds.py:121:    def add_root_elements(self, handler):\ndjango/contrib/gis/management/commands/ogrinspect.py:42:    def...\ndjango/contrib/staticfiles/management/commands/runserver.py:11:    def add_arguments(self, parser):\ndjango/contrib/sitemaps/management/commands/ping_google.py:8:    def add_arguments(self, parser):\ndjango/contrib/staticfiles/management/commands/collectstatic.py:38:    def add_arguments(self, parser):\ndjango/contrib/conten...\ndjango/contrib/contenttypes/migrations/0002_remove_content_type_name.py:4:def add_legacy_name(apps, schema_editor):\ndjango/contrib/auth/management/commands/createsuperuser.py:34:    def add_arguments(self, parser):\ndjango/contrib/contenttypes/management/commands/remove_stale_contenttypes.py:12:    def add_arguments(self, parser):\ndjango/contrib/messages/storage/base.py:130:    def add(self, level, message, extra_tags=''):\ndjango/contrib/messages/api.py:16:def add_message(request, level, mes...\ndjango/utils/datastructures.py:13:    def add(self, item):\ndjango/utils/xmlutils.py:14:    def addQuickElement(self, name, contents=None, attrs=None):\ndjango/utils/tree.py:78:    def add(self, data, conn_type, squash=True):\ndjango/utils/feedgenerator.py:85:    def add_item(self, title, link, description, author_email=None,\ndjango/utils/feedgenerator.py:212:    def add_root_elements(self, handler):\ndjango/utils/feedgenerator.py:246:    def add_item_elements(self, handler, item):\ndjango/utils/feedgenerator.py:313:    def add_root_elements(self, handler):\ndjango/utils/text.py:66:    def add_truncation_text(self, text, truncate=None):\ndjango/utils/cache.py:270:def add_never_cache_headers(response):\n1\t\"\"\"Default variable filters.\"\"\"\n3\timport re\n2\timport random as random_module\n4\timport types\n5\tfrom decimal import ROUND_HALF_UP, Context, Decimal, InvalidOperation\n8\tfrom pprint import pformat\n6\tfrom functools import wraps\n9\tfrom urllib.parse import quote\n11\tfrom django.utils import formats\n12\tfrom django.utils.dateformat import format, time_f...\n17\t)\n19\tfrom django.utils.text import (\n18\tfrom django.utils.safestring import SafeData, mark_safe\n20\t    Truncator, normalize_newlines, phone2numeric, slugify...\n22\tfrom django.utils.timesince import timesince, timeuntil\n23\tfrom django.utils.translation import gettext, ngettext\n25\tfrom .base import Variable, VariableDoesNotExist\n24\n27\n26\tfrom .library import Library\n28\tregister = Library()\n29\n30\n31\t#######################\n35\tdef stringfilter(func):\n34\n36\t    \"\"\"\n38\t    passed as the first positional argument will be converted to a string.\n39\t    \"\"\"\n40\t    def _dec(*args, **kwargs):\n41\t        args = list(args)\n43\t        if (isinstance(args[0], SafeData) and\n42\t        args[0] = str(args[0])\n46\t        return func(*args, **kwargs)\n47\n48\t    # Include a reference to the real function (used to check original\n49\t    # arguments by the template parser, and to bear the 'is_safe' attribute\n51\t    _dec._decorated_function = getattr(func, '_decorated_function', func)\n50\t    # when multiple decorators are applied).\n54\n55\n56\t###################\n57\t# STRINGS         #\n59\n58\t###################\n61\t@stringfilter\n60\t@register.filter(is_safe=True)\n62\tdef addslashes(value):\n63\t    \"\"\"\n65\t    example. Less useful for escaping JavaScript; use the ``escapejs``\n64\t    Add slashes before quotes. Useful for escaping strings in CSV, for\n66\t    filter instead.\n67\t    \"\"\"\n68\t    return value.replace('\\\\', '\\\\\\\\').replace('\"', '\\\\\"').replace(\"'\", \"\\\\'\")\n69\n70\n71\t@register.filter(is_safe=True)\n72\t@stringfilter\n73\tdef capfirst(value):\n75\t    return value and value[0].upper() + value[1:]\n76\n77\n78\t@register.filter(\"escapejs\")\n79\t@stringfilter\n80\tdef escapejs_filter(value):\n82\t    return escapejs(value)\n85\t@register.filter(is_safe=True)\n86\tdef json_script(value, element_id):\n88\t    Output value JSON-encoded, wrapped in a <script type=\"application/json\">\n87\t    \"\"\"\n89\t    tag.\n92\n93\n94\t@register.filter(is_safe=True)\n97\t    Display a float to a specified number of decimal places.\n96\t    \"\"\"\n98\n100\t    decimal place -- but only if there's a decimal place to be displayed:\n101\n103\t    * num2 = 34.00000\n102\t    * num1 = 34.23234\n104\t    * num3 = 34.26000\n105\t    * {{ num1|floatformat }} displays \"34.2\"\n109\t    If arg is positive, always display exactly arg number of decimal places:\n107\t    * {{ num3|floatformat }} ...\n112\t    * {{ num2|floatformat:3 }} displays ...\n111\t    * {{ num1|floatformat:3 }} displays \"34.232\"\n113\t    * {{ num3|floatformat:3 }} displays \"34.260\"\n114\n115\t    If arg is negative, display arg number of decimal places -- but on...\n116\t    there are places to be displayed:\n118\t    * {{ num1|floatfor...\n119\t    * {{ num2|floatformat:\"-3\" ...\n121\n120\t    * {{ num3|floatformat:\"-3\" }} displays \"34.260\"\n123\t    THOUSAND_SEPARATOR for the active locale. When the active locale is\n125\n127\t    * {{ 10000|floatformat:\"g\" }} displays \"10,000\"\n128\n131\t    \"\"\"\n129\t    If the input float is infinity or NaN, display the string representation\n132\t    force_grouping = False\n133\t    if isinstance(arg, str) and arg.endswith('g'):\n134\t        force_grouping = True\n136\t    try:\n135\t        arg = arg[:-1] or -1\n137\t        input_val = repr(text)\n138\t        d = Decimal(input_val)\n139\t    except InvalidOperation:\n140\t        try:\n141\t            d = Decimal(str(float(text)))\n143\t            return ''\n144\t    try:\n146\t    except ValueError:\n145\t        p = int(arg)\n147\t        return input_val\n148\n151\t    except (ValueError, OverflowError, InvalidOperation):\n152\t        return input_val\n153\n154\t    if not m and p < 0:\n155\t        return mark_safe(\n156\t            formats.number_format('%d' % (int(d)), 0, force_grouping=force_grouping),\n160\t    # Set the precision high enough to avoid an exception (#15789).\n158\n163\t    units += -tupl[2] if m else tupl[2]\n164\t    prec = abs(p) + units + 1\n165\n166\t    # Avoid conversion t...\n168\t    rounded_d ...\n169\t    sign, digits, exponent = rounded_d.as_tuple()\n170\t    digits = [str(digit) for digit in reversed(digits)]\n171\t    while len(digits) <= abs(exponent):\n172\t        digits.append('0')\n173\t    digits.insert(-exponent, '.')\n174\t    if sign and rounded_d:\n176\t    number = ''.join(reversed(digits))\n175\t        digits.append('-')\n178\t        formats.number_format(number, abs(p), force_gro...\n179\t    )\n183\t@stringfilter\n185\t    \"\"\"Escape an IRI value for use in a URL.\"\"\"\n184\tdef iriencode(value):\n187\n189\t@register.filter(is_safe=True, needs_autoescape=True)\n188\n190\t@stringfilter\n192\t    \"\"\"Display text with line numbers.\"\"\"\n193\t    lines = value.split('\\n')\n195\t    # string format command\n194\t    # Find the maximum width of the line count, for use with zero padding\n197\t    if not autoescape or isinstance(value, SafeData):\n198\t        for i, line in enumerate(lines):\n199\t            lines[i] = (\"%0\" + width + \"d. %s\"...\n204\n201\t        for i, line in enumerate(lines):\n207\t@stringfilter\n205\n208\tdef lower(value):\n211\n210\t    return value.lower()\n212\n213\t@register.filter(is_safe=False)\n214\t@stringfilter\n215\tdef make_list(value):\n216\t    \"\"\"\n218\n217\t    Return the value turned into a list.\n219\t    For an integer, it's a list of digits.\n222\t    return list(value)\n224\n225\t@register.filter(is_safe=True)\n228\t    \"\"\"\n229\t    Convert to ASCII. Convert s...\n231\t    leading and trailing whitespace.\n232\t    \"\"\"\n234\n233\t    return _slugify(value)\n237\tdef stringformat(value, arg):\n236\t@register.filter(is_safe=True)\n238\t    \"\"\"\n239\t    Format the variable according to the arg, a string formatting specifier.\n240",
      "applied_operators": [
        "text_perturbation"
      ]
    },
    {
      "action": "grep -nR \"register.filter.*add\" django || true && grep -n \"def add\" django/template/defaultfilters.py || true",
      "original": "62:def addslashes(value):\n675:def add(value, arg):\n",
      "perturbed": "675:def add(value, arg):\n62:def addslashes(value):",
      "applied_operators": [
        "text_perturbation"
      ]
    },
    {
      "action": "grep -nR \"force_str\" django || true && grep -nR \"force_text\" django || true",
      "original": "django/core/mail/message.py:19:from django.utils.encoding import force_str, punycode\ndjango/core/mail/message.py:80:        addr = force_str(addr)\ndjango/core/mail/message.py:371:                content = message_from_string(force_str(content))\ndjango/db/backends/oracle/operations.py:13:from django.utils.encoding import force_bytes, force_str\ndjango/db/backends/oracle/operations.py:298:                statement = statement.replace(':arg%d' % i, force_str(param, errors='replace'))\ndjango/db/backends/oracle/operations.py:301:                statement = statement.replace(':%s' % key, force_str(param, errors='replace'))\ndjango/db/backends/oracle/base.py:17:from django.utils.encoding import force_bytes, force_str\ndjango/db/backends/oracle/base.py:355:            self.force_bytes = force_str(param, cursor.charset, strings_only)\ndjango/db/backends/base/operations.py:11:from django.utils.encoding import force_str\ndjango/db/backends/base/operations.py:242:            return force_str(s, strings_only=True, errors='replace')\ndjango/db/backends/mysql/operations.py:6:from django.utils.encoding import force_str\ndjango/db/backends/mysql/operations.py:168:        return force_str(getattr(cursor, '_executed', None), errors='replace')\ndjango/db/models/base.py:36:from django.utils.encoding import force_str\ndjango/db/models/base.py:961:        # force_str() to coerce lazy strings.\ndjango/db/models/base.py:962:        return force_str(choices_dict.get(make_hashable(value), value), strings_only=True)\ndjango/http/request.py:635:# django.utils.encoding.force_str() for parsing URLs and form inputs. Thus,\ndjango/http/multipartparser.py:23:from django.utils.encoding import force_str\ndjango/http/multipartparser.py:74:            raise MultiPartParserError('Invalid non-ASCII Content-Type in multipart: %s' % force_str(content_type))\ndjango/http/multipartparser.py:77:            raise MultiPartParserError('Invalid boundary in multipart: %s' % force_str(boundary))\ndjango/http/multipartparser.py:175:                field_name = force_str(field_name, encoding, errors='replace')\ndjango/http/multipartparser.py:210:                    self._post.appendlist(field_name, force_str(data, encoding, errors='replace'))\ndjango/http/multipartparser.py:216:                        file_name = force_str(file_name, encoding, errors='replace')\ndjango/http/multipartparser.py:306:                self._files.appendlist(force_str(old_field_name, self._encoding, errors='replace'), file_obj)\ndjango/contrib/gis/gdal/driver.py:6:from django.utils.encoding import force_bytes, force_str\ndjango/contrib/gis/gdal/driver.py:97:        return force_str(rcapi.get_driver_description(self.ptr))\ndjango/contrib/gis/gdal/raster/source.py:20:from django.utils.encoding import force_bytes, force_str\ndjango/contrib/gis/gdal/raster/source.py:243:        return force_str(capi.get_ds_description(self._ptr))\ndjango/contrib/gis/gdal/raster/band.py:7:from django.utils.encoding import force_str\ndjango/contrib/gis/gdal/raster/band.py:35:        return force_str(capi.get_band_description(self._ptr))\ndjango/contrib/gis/gdal/feature.py:6:from django.utils.encoding import force_bytes, force_str\ndjango/contrib/gis/gdal/feature.py:70:        return force_str(name, self.encoding, strings_only=True)\ndjango/contrib/gis/gdal/feature.py:81:            force_str(\ndjango/contrib/gis/gdal/srs.py:36:from django.utils.encoding import force_bytes, force_str\ndjango/contrib/gis/gdal/srs.py:244:            name = force_str(name)\ndjango/contrib/gis/gdal/datasource.py:44:from django.utils.encoding import force_bytes, force_str\ndjango/contrib/gis/gdal/datasource.py:121:        return force_str(name, self.encoding, strings_only=True)\ndjango/contrib/gis/gdal/layer.py:14:from django.utils.encoding import force_bytes, force_str\ndjango/contrib/gis/gdal/layer.py:104:        return force_str(name, self._ds.encoding, strings_only=True)\ndjango/contrib/gis/gdal/layer.py:136:        return [force_str(\ndjango/contrib/gis/gdal/field.py:7:from django.utils.encoding import force_str\ndjango/contrib/gis/gdal/field.py:58:        return force_str(string, encoding=self._feat.encoding, strings_only=True)\ndjango/contrib/gis/gdal/field.py:83:        return force_str(name, encoding=self._feat.encoding, strings_only=True)\ndjango/contrib/gis/utils/layermapping.py:24:from django.utils.encoding import force_str\ndjango/contrib/gis/utils/layermapping.py:355:                val = force_str(ogr_field.value, self.encoding)\ndjango/contrib/gis/geos/geometry.py:21:from django.utils.encoding import force_bytes, force_str\ndjango/contrib/gis/geos/geometry.py:699:            geo_input = force_str(geo_input)\ndjango/utils/encoding.py:31:    return force_str(s, encoding, strings_only, errors)\ndjango/utils/encoding.py:43:    force_str(strings_only=True).\ndjango/utils/encoding.py:48:def force_str(s, encoding='utf-8', strings_only=False, errors='strict'):\ndjango/utils/encoding.py:112:        'force_text() is deprecated in favor of force_str().',\ndjango/utils/encoding.py:115:    return force_str(s, encoding, strings_only, errors)\ndjango/views/debug.py:15:from django.utils.encoding import force_str\ndjango/views/debug.py:288:                unicode_hint = force_str(\ndjango/utils/encoding.py:110:def force_text(s, encoding='utf-8', strings_only=False, errors='strict'):\ndjango/utils/encoding.py:112:        'force_text() is deprecated in favor of force_str().',\n",
      "perturbed": "django/core/mail/message.py:19:from django.utils.e...\ndjango/core/mail/message.py:371:                content = message_from_string(force_str(content))\ndjango/core/mail/message.py:80:        addr = force_str(addr)\ndjango/db/backends/oracle/operations.py:298:                statement = statement.replace(':arg%d' % i, force_str(param, errors='replace'))\ndjango/db/backends/oracle/operations.py:13:from django.utils.encoding import force_bytes, force_str\ndjango/db/backends/oracle/operations.py:301:                statement = statement.replace(':%s' % key, force_str(param, errors='replace'))\ndjango/db/backends/oracle/base.py:17:from django.utils.encoding import force_bytes, force_str\ndjango/db/backends/oracle/base.py:355:            self.force_bytes = force_str(param, cursor.charset, strings_only)\ndjango/db/backends/base/operations.py:11:from django.utils.encoding import force_str\ndjango/db/backends/base/operations.py:242:            return force_str(s, strings_only=True, errors='replace')\ndjango/db/backends/mysql/operations.py:6:from django.utils.encoding import force_str\ndjango/db/models/base.py:36:from django.utils.encoding import force_str\n[warning] unexpected output\ndjango/db/backends/mysql/operations.py:16...\ndjango/db/models/base.py:961:        # force_str() to coerce lazy strings.\ndjango/http/request.py:635:# django.utils.encoding.force_str() for parsing URLs and form inputs. Thus,\ndjango/db/models/base.py:962:        return force_str(choices_dict.get(make_hashable(value), value), strings_only=True)\ndjango/http/multipartparser.py:23:from django.utils.encoding import force_str\ndjango/http/multipartparser.py:74:            raise MultiPartParserError('Invalid non-ASCII Content-Type in multipart: %s' % force_str(content_type))\ndjango/http/multipartparser.py:77:            raise MultiPartParserError('Invalid boundary in multipart: %s' % force_str(boundary))\ndjango/http/multipartparser.py:175:                field_name = force_str(field_name, encoding, errors='replace')\ndjango/http/multipartparser.py:216:                        file_name = force_str(file_name, encoding, errors='replace')\ndjango/http/multipartparser.py:306:                self._files.appendlist(force_str(old_field_name, self._encoding, errors='replace'), file_obj)\ndjango/contrib/gis/gdal/driver.py:97:        return force_str(rcapi.get_driver_description(self.ptr))\ndjango/contrib/gis/gdal/raster/band.py:7:from django.utils.encoding import force_str\ndjango/contrib/gis/gdal/raster/source.py:243:        return force_str(capi.get_ds_description(self._ptr))\ndjango/contrib/gis/gdal/raster/band.py:35:        return force_str(capi.get_band_description(self._ptr))\ndjango/contrib/gis/gdal/feature.py:70:        return force_str(name, self.encoding, strings_only=True)\ndjango/contrib/gis/gdal/feature.py:81:            force_str(\ndjango/contrib/gis/gdal/srs.py:36:from django.utils.encoding import force_bytes, force_str\ndjango/contrib/gis/gdal/srs.py:244:            name = force_str(name)\ndjango/contrib/gis/gdal/layer.py:104:        return force_str(name, self._ds.encoding, strings_only=True)\ndjango/contrib/gis/gdal/layer.py:136:        return [force_str(\ndjango/contrib/gis/gdal/field.py:7:from django.utils.encoding import force_str\ndjango/contrib/gis/utils/layermapping.py:24:from django.utils.encoding import force_str\ndjango/contrib/gis/gdal/field.py:83:        return force_str(name, encoding=self._feat.encoding, strings_only=True)\ndjango/contrib/gis/utils/layermapping.py:355:                val = force_str(ogr_field.value, self.encoding)\ndjango/contrib/gis/geos/geometry.py:21:from django.utils.encoding import force_bytes, force_str\ndjango/contrib/gis/geos/geometry.py:69...\ndjango/views/debug.py:15:from django.utils.encoding import force_str\ndjango/utils/encoding.py:112:        'force_text() is deprecated in favor of force_str().',\ndjango/views/debug.py:288:                unicode_hint = force_str(\ndjango/utils/encoding.py:110:def force_text(s, encoding='utf-8', strings_only=False, errors='strict'):\ndjango/utils/encoding.py:112:        'force_text() is deprecated in favor of force_str().',",
      "applied_operators": [
        "text_perturbation"
      ]
    },
    {
      "action": "grep -n \"def force_str\" django/utils/encoding.py || true",
      "original": "48:def force_str(s, encoding='utf-8', strings_only=False, errors='strict'):\n",
      "perturbed": "48:def force_str(s, encoding='utf-8', strings_only=False, errors='strict'):",
      "applied_operators": [
        "text_perturbation"
      ]
    },
    {
      "action": "nl -ba django/template/defaultfilters.py | sed -n '1,140p'",
      "original": "     1\t\"\"\"Default variable filters.\"\"\"\n     2\timport random as random_module\n     3\timport re\n     4\timport types\n     5\tfrom decimal import ROUND_HALF_UP, Context, Decimal, InvalidOperation\n     6\tfrom functools import wraps\n     7\tfrom operator import itemgetter\n     8\tfrom pprint import pformat\n     9\tfrom urllib.parse import quote\n    10\t\n    11\tfrom django.utils import formats\n    12\tfrom django.utils.dateformat import format, time_format\n    13\tfrom django.utils.encoding import iri_to_uri\n    14\tfrom django.utils.html import (\n    15\t    avoid_wrapping, conditional_escape, escape, escapejs,\n    16\t    json_script as _json_script, linebreaks, strip_tags, urlize as _urlize,\n    17\t)\n    18\tfrom django.utils.safestring import SafeData, mark_safe\n    19\tfrom django.utils.text import (\n    20\t    Truncator, normalize_newlines, phone2numeric, slugify as _slugify, wrap,\n    21\t)\n    22\tfrom django.utils.timesince import timesince, timeuntil\n    23\tfrom django.utils.translation import gettext, ngettext\n    24\t\n    25\tfrom .base import Variable, VariableDoesNotExist\n    26\tfrom .library import Library\n    27\t\n    28\tregister = Library()\n    29\t\n    30\t\n    31\t#######################\n    32\t# STRING DECORATOR    #\n    33\t#######################\n    34\t\n    35\tdef stringfilter(func):\n    36\t    \"\"\"\n    37\t    Decorator for filters which should only receive strings. The object\n    38\t    passed as the first positional argument will be converted to a string.\n    39\t    \"\"\"\n    40\t    def _dec(*args, **kwargs):\n    41\t        args = list(args)\n    42\t        args[0] = str(args[0])\n    43\t        if (isinstance(args[0], SafeData) and\n    44\t                getattr(_dec._decorated_function, 'is_safe', False)):\n    45\t            return mark_safe(func(*args, **kwargs))\n    46\t        return func(*args, **kwargs)\n    47\t\n    48\t    # Include a reference to the real function (used to check original\n    49\t    # arguments by the template parser, and to bear the 'is_safe' attribute\n    50\t    # when multiple decorators are applied).\n    51\t    _dec._decorated_function = getattr(func, '_decorated_function', func)\n    52\t\n    53\t    return wraps(func)(_dec)\n    54\t\n    55\t\n    56\t###################\n    57\t# STRINGS         #\n    58\t###################\n    59\t\n    60\t@register.filter(is_safe=True)\n    61\t@stringfilter\n    62\tdef addslashes(value):\n    63\t    \"\"\"\n    64\t    Add slashes before quotes. Useful for escaping strings in CSV, for\n    65\t    example. Less useful for escaping JavaScript; use the ``escapejs``\n    66\t    filter instead.\n    67\t    \"\"\"\n    68\t    return value.replace('\\\\', '\\\\\\\\').replace('\"', '\\\\\"').replace(\"'\", \"\\\\'\")\n    69\t\n    70\t\n    71\t@register.filter(is_safe=True)\n    72\t@stringfilter\n    73\tdef capfirst(value):\n    74\t    \"\"\"Capitalize the first character of the value.\"\"\"\n    75\t    return value and value[0].upper() + value[1:]\n    76\t\n    77\t\n    78\t@register.filter(\"escapejs\")\n    79\t@stringfilter\n    80\tdef escapejs_filter(value):\n    81\t    \"\"\"Hex encode characters for use in JavaScript strings.\"\"\"\n    82\t    return escapejs(value)\n    83\t\n    84\t\n    85\t@register.filter(is_safe=True)\n    86\tdef json_script(value, element_id):\n    87\t    \"\"\"\n    88\t    Output value JSON-encoded, wrapped in a <script type=\"application/json\">\n    89\t    tag.\n    90\t    \"\"\"\n    91\t    return _json_script(value, element_id)\n    92\t\n    93\t\n    94\t@register.filter(is_safe=True)\n    95\tdef floatformat(text, arg=-1):\n    96\t    \"\"\"\n    97\t    Display a float to a specified number of decimal places.\n    98\t\n    99\t    If called without an argument, display the floating point number with one\n   100\t    decimal place -- but only if there's a decimal place to be displayed:\n   101\t\n   102\t    * num1 = 34.23234\n   103\t    * num2 = 34.00000\n   104\t    * num3 = 34.26000\n   105\t    * {{ num1|floatformat }} displays \"34.2\"\n   106\t    * {{ num2|floatformat }} displays \"34\"\n   107\t    * {{ num3|floatformat }} displays \"34.3\"\n   108\t\n   109\t    If arg is positive, always display exactly arg number of decimal places:\n   110\t\n   111\t    * {{ num1|floatformat:3 }} displays \"34.232\"\n   112\t    * {{ num2|floatformat:3 }} displays \"34.000\"\n   113\t    * {{ num3|floatformat:3 }} displays \"34.260\"\n   114\t\n   115\t    If arg is negative, display arg number of decimal places -- but only if\n   116\t    there are places to be displayed:\n   117\t\n   118\t    * {{ num1|floatformat:\"-3\" }} displays \"34.232\"\n   119\t    * {{ num2|floatformat:\"-3\" }} displays \"34\"\n   120\t    * {{ num3|floatformat:\"-3\" }} displays \"34.260\"\n   121\t\n   122\t    If arg has the 'g' suffix, force the result to be grouped by the\n   123\t    THOUSAND_SEPARATOR for the active locale. When the active locale is\n   124\t    en (English):\n   125\t\n   126\t    * {{ 6666.6666|floatformat:\"2g\" }} displays \"6,666.67\"\n   127\t    * {{ 10000|floatformat:\"g\" }} displays \"10,000\"\n   128\t\n   129\t    If the input float is infinity or NaN, display the string representation\n   130\t    of that value.\n   131\t    \"\"\"\n   132\t    force_grouping = False\n   133\t    if isinstance(arg, str) and arg.endswith('g'):\n   134\t        force_grouping = True\n   135\t        arg = arg[:-1] or -1\n   136\t    try:\n   137\t        input_val = repr(text)\n   138\t        d = Decimal(input_val)\n   139\t    except InvalidOperation:\n   140\t        try:\n",
      "perturbed": "2\timport random as random_module\n4\timport types\n5\tfrom decimal import ROUND_HALF_UP, Context, Decimal, InvalidOperation\n6\tfrom functools import wraps\n9\tfrom urllib.parse import quote\n10\n11\tfrom django.utils import formats\n13\tfrom django.utils.encoding import iri_to_uri\n12\tfrom django.utils.dateformat import format, time_format\n14\tfrom django.utils.html import (\n15\t    avoid_wrapping, conditional_escape, escape, escapejs,\n16\t    json_script as _json_script, linebreaks, strip_tags, urlize as _urlize,\n17\t)\n19\tfrom django.utils.text import (\n20\t    Truncator, normalize_new...\n21\t)\n25\tfrom .base import Variable, VariableDoesNotExist\n26\tfrom .library import Library\n27\n29\n31\t#######################\n32\t# STRING DECORATOR    #\n33\t#######################\n35\tdef stringfilter(func):\n34\n39\t    \"\"\"\n38\t    passed as the first positional argument will be converted to a string.\n40\t    def _dec(*args, **kwargs):\n42\t        args[0] = str(args[0])\n41\t        args = list(args)\n44\t                getattr(_dec._decorated_function, 'is_safe', False)):\n45\t            return mark_safe(func(*args, **kwargs))\n47\n46\t        return func(*args, **kwargs)\n49\t    # arguments by the template parser, and to bear the 'is_safe' attribute\n51\t    _dec._decorated_function = getattr(func, '_decorated_function', func)\n52\n53\t    return wraps(func)(_dec)\n55\n54\n56\t###################\n57\t# STRINGS         #\n59\n58\t###################\n60\t@register.filter(is_safe=True)\n62\tdef addslashes(value):\n63\t    \"\"\"\n64\t    Add slashes before quotes. Useful for escaping strings in CSV, for\n65\t    example. Less useful for escaping JavaScript; use the ``escapejs``\n66\t    filter instead.\n67\t    \"\"\"\n68\t    return value.replace('\\\\', '\\\\\\\\').replace('\"', '\\\\\"').replace(\"'\", \"\\\\'\")\n69\n70\n73\tdef capfirst(value):\n74\t    \"\"\"Capitalize the...\n75\t    return value and value[0].upper()...\n76\n77\n80\tdef escapejs_filter(value):\n81\t    \"\"\"Hex encode characters for use in JavaScript strings.\"\"\"\n82\t    return escapejs(value)\n84\n85\t@register.filter(is_safe=True)\n86\tdef json_script(value, element_id):\n88\t    Output value JSON-encoded, wrapped in a <script type=\"application/json\">\n89\t    tag.\n91\t    return _json_script(value, element_id)\n90\t    \"\"\"\n92\n93\n94\t@register.filter(is_safe=True)\n95\tdef floatformat(text, arg=-1):\n96\t    \"\"\"\n97\t    Display a float to a specified number of decimal places.\n98\n99\t    If called without an argument, display the floating point number with one\n101\n100\t    decimal place -- but only if there's a decimal place to be displayed:\n102\t    * num1 = 34.23234\n105\t    * {{ num1|floatformat }} displays \"34.2\"\n104\t    * num3 = 34.26000\n111\t    * {{ num1|floatformat:3 }} displays \"34.232\"\n110\n113\t    * {{ num3|floatformat:3 }} displays \"34.260\"\n114\n115\t    If arg is negative, display arg number of decimal places -- but only if\n119\t    * {{ num2|floatformat:\"-3\" }} displays \"34\"\n116\t    there are places to ...\n122\t    If arg has the 'g' suffix, force the result to be grouped by the\n124\t    en (English):\n123\t    THOUSAND_SEPARATOR for the active locale. When the active locale is\n127\t    * {{ 10000|floatformat:\"g\" }} displays \"10,000\"\n128\n129\t    If the input float is infinity or NaN, display the string representation\n130\t    of that value.\n131\t    \"\"\"\n132\t    force_grouping = False\n133\t    if isinstance(arg, str) and arg.endswith('g'):\n137\t        input_val = repr(text)\n136\t    try:\n139\t    except InvalidOperation:\n140\t        try:",
      "applied_operators": [
        "text_perturbation"
      ]
    },
    {
      "action": "python - <<'PY'\nimport re, sys\np = 'django/template/defaultfilters.py'\ns = open(p, 'r', encoding='utf-8').read()\ns_new = re.sub(r'from django.utils.encoding import iri_to_uri', 'from django.utils.encoding import iri_to_uri, force_str', s, count=1)\nif s_new == s:\n    # If import line wasn't replaced, try to insert import after other encoding imports\n    s_new = s.replace('from django.utils.encoding import ', 'from django.utils.encoding import force_str, ', 1)\ns = s_new\nold_pattern = re.compile(\n    r\"@register.filter\\(is_safe=False\\)\\ndef add\\(value, arg\\):\\n\\s+\\\"\\\"\\\"Add the arg to the value\\.\\n\\s+\\\"\\\"\\\"\\n\\s+try:\\n\\s+return int\\(value\\) \\+ int\\(arg\\)\\n\\s+except \\(ValueError, TypeError\\):\\n\\s+try:\\n\\s+return value \\+ arg\\n\\s+except Exception:\\n\\s+return ''\\n\",\n    re.M\n)\nnew_block = (\n    \"@register.filter(is_safe=False)\\n\"\n    \"def add(value, arg):\\n\"\n    \"    \\\"\\\"\\\"Add the arg to the value.\\\"\\\"\\\"\\n\"\n    \"    try:\\n\"\n    \"        return int(value) + int(arg)\\n\"\n    \"    except (ValueError, TypeError):\\n\"\n    \"        # Try direct concatenation first (covers normal strings and sequences).\\n\"\n    \"        try:\\n\"\n    \"            return value + arg\\n\"\n    \"        except Exception:\\n\"\n    \"            # Fallback: coerce lazy proxy objects to strings and concatenate.\\n\"\n    \"            try:\\n\"\n    \"                return force_str(value) + force_str(arg)\\n\"\n    \"            except Exception:\\n\"\n    \"                return ''\\n\"\n)\nif not old_pattern.search(s):\n    print('add() pattern not found; aborting', file=sys.stderr)\n    sys.exit(1)\ns = old_pattern.sub(new_block, s, count=1)\nopen(p, 'w', encoding='utf-8').write(s)\nprint('patched')\nPY",
      "original": "add() pattern not found; aborting\n",
      "perturbed": "add() pattern not found; aborting\ninfo: continuing execution\ninfo: continuing execution\n# additional context omitted",
      "applied_operators": [
        "text_perturbation"
      ]
    },
    {
      "action": "nl -ba django/template/defaultfilters.py | sed -n '672,684p'",
      "original": "   672\t###################\n   673\t\n   674\t@register.filter(is_safe=False)\n   675\tdef add(value, arg):\n   676\t    \"\"\"Add the arg to the value.\"\"\"\n   677\t    try:\n   678\t        return int(value) + int(arg)\n   679\t    except (ValueError, TypeError):\n   680\t        try:\n   681\t            return value + arg\n   682\t        except Exception:\n   683\t            return ''\n   684\t\n",
      "perturbed": "672\t###################\n675\tdef add(value, arg):\n678\t        return int(val...\n680\t        try:\n679\t    except (ValueError, TypeError):\n681\t            return value + arg\n683\t            return ''\n682\t        except Exception:\n684",
      "applied_operators": [
        "text_perturbation"
      ]
    },
    {
      "action": "pytest -q tests/template || true",
      "original": "bash: line 1: pytest: command not found\n",
      "perturbed": "bash: line 1: pytest: command not found",
      "applied_operators": [
        "text_perturbation"
      ]
    }
  ]
}