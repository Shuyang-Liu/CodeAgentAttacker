{
  "info": {
    "total_observations": 5,
    "python_observations": 1,
    "text_observations": 4,
    "ast_operators_applied": 0,
    "text_perturbation_applied": 2,
    "skipped": 3
  },
  "perturbations": [
    {
      "action": "grep -R --line-number \"__qualname__\\|qualname\" -n django || true",
      "original": "django/apps/config.py:217:                    app_config_class.__qualname__,\ndjango/templatetags/i18n.py:129:            f\"<{self.__class__.__qualname__}: \"\ndjango/core/handlers/base.py:124:            name = name or \"method %s()\" % method.__qualname__\ndjango/db/migrations/operations/models.py:79:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/operations/models.py:381:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/operations/models.py:430:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/operations/models.py:550:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/operations/models.py:599:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/operations/models.py:645:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/operations/models.py:730:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/operations/models.py:815:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/operations/models.py:849:        return (self.__class__.__qualname__, [self.name, self.managers], {})\ndjango/db/migrations/operations/models.py:907:            self.__class__.__qualname__,\ndjango/db/migrations/operations/models.py:968:            self.__class__.__qualname__,\ndjango/db/migrations/operations/models.py:1016:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/operations/special.py:26:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/operations/special.py:92:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/operations/special.py:171:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/serializer.py:144:                    f\"{module}.{enum_class.__qualname__}[{item.name!r}]\"\ndjango/db/migrations/serializer.py:182:        if \"<\" not in self.value.__qualname__:  # Qualname can include <locals>\ndjango/db/migrations/serializer.py:183:            return \"%s.%s\" % (module_name, self.value.__qualname__), {\ndjango/db/migrations/serializer.py:322:                return \"%s.%s\" % (module, self.value.__qualname__), {\ndjango/db/backends/base/base.py:123:            f\"<{self.__class__.__qualname__} \"\ndjango/db/backends/base/base.py:741:                        f\"Error calling {func.__qualname__} in on_commit() (%s).\",\ndjango/db/backends/base/base.py:759:                        f\"Error calling {func.__qualname__} in on_commit() during \"\ndjango/db/models/fields/__init__.py:264:        path = \"%s.%s\" % (self.__class__.__module__, self.__class__.__qualname__)\ndjango/db/models/fields/__init__.py:639:        path = \"%s.%s\" % (self.__class__.__module__, self.__class__.__qualname__)\ndjango/db/models/fields/related_descriptors.py:141:                \"__qualname__\": \"%s.%s.RelatedObjectDoesNotExist\"\ndjango/db/models/fields/related_descriptors.py:143:                    self.field.model.__qualname__,\ndjango/db/models/fields/related_descriptors.py:415:                \"__qualname__\": \"%s.%s.RelatedObjectDoesNotExist\"\ndjango/db/models/fields/related_descriptors.py:417:                    self.related.model.__qualname__,\ndjango/db/models/fields/files.py:248:                        self.__class__.__qualname__,\ndjango/db/models/fields/files.py:250:                        Storage.__qualname__,\ndjango/db/models/enums.py:79:        return f\"{self.__class__.__qualname__}.{self._name_}\"\ndjango/db/models/options.py:267:                f\"{app_config_class.__qualname__}.default_auto_field\"\ndjango/db/models/constraints.py:138:            self.__class__.__qualname__,\ndjango/db/models/constraints.py:176:        return f\"{self.__class__.__qualname__}.{self._name_}\"\ndjango/db/models/constraints.py:325:            self.__class__.__qualname__,\ndjango/db/models/indexes.py:195:            self.__class__.__qualname__,\ndjango/db/models/indexes.py:254:                    [wrapper_cls.__qualname__ for wrapper_cls in self.wrapper_classes]\ndjango/db/models/indexes.py:261:                    [wrapper_cls.__qualname__ for wrapper_cls in self.wrapper_classes]\ndjango/db/models/sql/compiler.py:65:            f\"<{self.__class__.__qualname__} \"\ndjango/db/models/sql/compiler.py:66:            f\"model={self.query.model.__qualname__} \"\ndjango/db/models/sql/query.py:2612:            f\"{self.__class__.__qualname__}(connector={self.connector!r}, \"\ndjango/db/models/base.py:82:            \"__qualname__\": \"%s.%s\" % (attached_to.__qualname__, name),\ndjango/db/models/base.py:501:                        f\"{cls.__qualname__}() got both positional and \"\ndjango/db/models/base.py:850:                    f\"Invalid force_insert member. {member.__qualname__} must be a \"\ndjango/db/models/base.py:851:                    f\"base of {cls.__qualname__}.\"\ndjango/db/models/base.py:1627:                        f\"{cls._meta.app_config.__class__.__qualname__}.\"\ndjango/template/context.py:259:                    f\"Context processor {processor.__qualname__} didn't return a \"\ndjango/template/defaulttags.py:454:            self.__class__.__qualname__,\ndjango/template/engine.py:70:            self.__class__.__qualname__,\ndjango/template/loader_tags.py:20:        return f\"<{self.__class__.__qualname__}: blocks={self.blocks!r}>\"\ndjango/template/loader_tags.py:174:        return f\"<{self.__class__.__qualname__}: template={self.template!r}>\"\ndjango/template/base.py:120:        return \"<%s name=%r>\" % (self.__class__.__qualname__, self.name)\ndjango/template/base.py:158:            self.__class__.__qualname__,\ndjango/template/base.py:345:            self.__class__.__qualname__,\ndjango/template/base.py:453:        return \"<%s tokens=%r>\" % (self.__class__.__qualname__, self.tokens)\ndjango/template/base.py:768:        return \"<%s %r>\" % (self.__class__.__qualname__, self.token)\ndjango/test/runner.py:1101:    return f\"{cls.__module__}.{cls.__qualname__}\"\ndjango/test/testcases.py:215:                        cls.__qualname__,\ndjango/test/testcases.py:234:                    \"test\": \"%s.%s\" % (cls.__module__, cls.__qualname__),\ndjango/test/testcases.py:1367:                                    f\"Error calling {callback.__qualname__} in \"\ndjango/test/testcases.py:1422:                            args[0].__class__.__qualname__,\ndjango/dispatch/dispatcher.py:264:            receiver.__qualname__,\ndjango/urls/resolvers.py:102:        raise PicklingError(f\"Cannot pickle {self.__class__.__qualname__}.\")\ndjango/urls/resolvers.py:475:        return callback.__module__ + \".\" + callback.__qualname__\ndjango/urls/resolvers.py:546:                    path=handler.__module__ + \".\" + handler.__qualname__,\ndjango/http/request.py:662:        return \"<%s: %s>\" % (self.__class__.__qualname__, self)\ndjango/http/response.py:451:            \"cls\": self.__class__.__qualname__,\ndjango/forms/widgets.py:422:                % self.__class__.__qualname__\ndjango/forms/formsets.py:138:            self.__class__.__qualname__,\ndjango/contrib/postgres/operations.py:186:            self.__class__.__qualname__,\ndjango/contrib/postgres/constraints.py:164:            self.__class__.__qualname__,\ndjango/contrib/admin/options.py:686:            f\"<{self.__class__.__qualname__}: model={self.model.__qualname__} \"\ndjango/contrib/admin/helpers.py:60:            f\"<{self.__class__.__qualname__}: \"\ndjango/contrib/admin/helpers.py:61:            f\"form={self.form.__class__.__qualname__} \"\ndjango/contrib/admin/views/autocomplete.py:109:                % type(model_admin).__qualname__\ndjango/contrib/admin/views/main.py:157:            self.__class__.__qualname__,\ndjango/contrib/admin/views/main.py:158:            self.model.__qualname__,\ndjango/contrib/admin/views/main.py:159:            self.model_admin.__class__.__qualname__,\ndjango/contrib/admin/views/main.py:186:                f\"{self.model_admin.__class__.__qualname__}.lookup_allowed().\",\ndjango/contrib/admindocs/utils.py:25:        return f\"{klass.__module__}.{klass.__qualname__}\"\ndjango/contrib/admindocs/utils.py:27:    view_name = getattr(view_func, \"__qualname__\", view_func.__class__.__name__)\ndjango/contrib/sessions/backends/base.py:65:        return \"django.contrib.sessions.\" + self.__class__.__qualname__\ndjango/contrib/auth/hashers.py:104:            \"Password must be a string or bytes, got %s.\" % type(password).__qualname__\ndjango/contrib/auth/context_processors.py:29:        return f\"{self.__class__.__qualname__}({self.user!r})\"\ndjango/contrib/messages/storage/base.py:73:        return f\"<{self.__class__.__qualname__}: request={self.request!r}>\"\ndjango/utils/datastructures.py:42:        return f\"{self.__class__.__qualname__}({data})\"\ngrep: django/utils/__pycache__/functional.cpython-311.pyc: binary file matches\ngrep: django/utils/__pycache__/regex_helper.cpython-311.pyc: binary file matches\ndjango/utils/deprecation.py:109:            self.__class__.__qualname__,\ndjango/utils/deprecation.py:112:                \"__qualname__\",\ndjango/views/generic/base.py:75:                f\"{cls.__qualname__} HTTP handlers must either be all sync or all \"\ndjango/views/generic/base.py:109:        # __name__ and __qualname__ are intentionally left unchanged as\n",
      "perturbed": "django/apps/config.py:217:                    app_config_class.__qualname__,\ndjango/templatetags/i18n.py:129:            f\"<{self.__class__.__qualname__}: \"\ndjango/core/handlers/base.py:124:            name = name or \"method %s()\" % method.__qualname__\ndjango/db/migrations/operations/models.py:79:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/operations/models.py:430:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/operations/models.py:381:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/operations/models.py:550:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/operations/models.py:599:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/operations/models.py:645:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/operations/models.py:730:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/operations/models.py:815:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/operations/models.py:849:        return (self.__class__.__qualname__, [self.name, self.managers], {})\ndjango/db/migrations/operations/models.py:907:            self.__class__.__qualname__,\ndjango/db/migrations/operations/models.py:968:            self.__class__.__qualname__,\ndjango/db/migrations/operations/models.py:1016:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/operations/special.py:26:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/operations/special.py:171:        return (self.__class__.__qualname__, [], kwargs)\ndjango/db/migrations/serializer.py:144:                    f\"{module}.{enum_class.__qualname__}[{item.name!r}]\"\ndjango/db/migrations/serializer.py:183:            return \"%s.%s\" % (module_name, self.value.__qualname__), {\ndjango/db/migrations/serializer.py:322:                return \"%s.%s\" % (module, self.value.__qualname__), {\ndjango/db/backends/base/base.py:123:            f\"<{self.__class__.__qualname__} \"\ndjango/db/backends/base/base.py:741:                        f\"Error calling {func.__qualname__} in on_commit() (%s).\",\ndjango/db/backends/base/base.py:759:                        f\"Error calling {func.__qualname__} in on_commit() during \"\ndjango/db/models/fields/__init__.py:639:        path = \"%s.%s\" % (self.__class__.__module__, self.__class__.__qualname__)\ndjango/db/models/fields/related_descriptors.py:143:                    self.field.model.__qualname__,\ndjango/db/models/fields/related_descriptors.py:141:                \"__qualname__\": \"%s.%s.RelatedObjectDoesNotExist\"\ndjango/db/models/fields/related_descriptors.py:415:                \"__qualname__\": \"%s.%s.RelatedObjectDoesNotExist\"\ndjango/db/models/fields/files.py:250:                        Storage.__qualname__,\ndjango/db/models/fields/related_descriptors.py:417:                    self.related.model.__qualname__,\ndjango/db/models/enums.py:79:        return f\"{self.__class__.__qualname__}.{self._name_}\"\ndjango/db/models/constraints.py:138:            self.__class__.__qualname__,\ndjango/db/models/constraints.py:176:        return f\"{self.__class__.__qualname__}.{self._name_}\"\ndjango/db/models/constraints.py:325:            self.__class__.__qualname__,\ndjango/db/models/indexes.py:195:            self.__class__.__qualname__,\ndjango/db/models/indexes.py:254:                    [wrapper_cls.__qualname__ for wrapper_cls in self.wrapper_classes]\ndjango/db/models/sql/compiler.py:65:            f\"<{self.__class__.__qualname__} \"\ndjango/db/models/indexes.py:261:                    [wrapper_cls.__qualname__ for wrapper_cls in self.wrapper_classes]\ndjango/db/models/sql/compiler.py:66:            f\"model={self.query.model.__qualname__} \"\ndjango/db/models/sql/query.py:2612:            f\"{self.__class__.__qualname__}(connector={self.connector!r}, \"\ndjango/db/models/base.py:82:            \"__qualname__\": \"%s.%s\" % (attached_to.__qualname__, name),\ndjango/db/models/base.py:850:                    f\"Invalid force_insert member. {member.__qualname__} must be a \"\ndjango/db/models/base.py:501:                        f\"{cls.__qualname__}() got both positional and \"\ndjango/db/models/base.py:851:                    f\"base of {cls.__qualname__}.\"\ndjango/db/models/base.py:1627:                        f\"{cls._meta.app_config.__class__.__qualname__}.\"\ndjango/template/defaulttags.py:454:            self.__class__.__qualname__,\ndjango/template/context.py:259:                    f\"Context processor {processor.__qualname__} didn't return a \"\ndjango/template/engine.py:70:            self.__class__.__qualname__,\ndjango/template/loader_tags.py:20:        return f\"<{self.__class__.__qualname__}: blocks={self.blocks!r}>\"\ndjango/template/loader_tags.py:174:        return f\"<{self.__class__.__qualname__}: template={self.template!r}>\"\ndjango/template/base.py:158:            self.__class__.__qualname__,\ndjango/template/base.py:120:        return \"<%s name=%r>\" % (self.__class__.__qualname__, self.name)\ndjango/template/base.py:345:            self.__class__.__qualname__,\ndjango/template/base.py:453:        return \"<%s tokens=%r>\" % (self.__class__.__qualname__, self.tokens)\ndjango/template/base.py:768:        return \"<%s %r>\" % (self.__class__.__qualname__, self.token)\ndjango/test/runner.py:1101:    return f\"{cls.__module__}.{cls.__qualname__}\"\ndjango/test/testcases.py:234:                    \"test\": \"%s.%s\" % (cls.__module__, cls.__qualname__),\ndjango/test/testcases.py:1367:                                    f\"Error calling {callback.__qualname__} in \"\ndjango/test/testcases.py:1422:                            args[0].__class__.__qualname__,\ndjango/urls/resolvers.py:102:        raise PicklingError(f\"Cannot pickle {self.__class__.__qualname__}.\")\ndjango/urls/resolvers.py:475:        return callback.__module__ + \".\" + callback.__qualname__\ndjango/urls/resolvers.py:546:                    path=handler.__module__ + \".\" + handler.__qualname__,\ndjango/http/response.py:451:            \"cls\": self.__class__.__qualname__,\ndjango/contrib/postgres/operations.py:186:            self.__class__.__qualname__,\ndjango/forms/formsets.py:138:            self.__class__.__qualname__,\ndjango/contrib/admin/options.py:686:            f\"<{self.__class__.__qualname__}: model={self.model.__qualname__} \"\ndjango/contrib/postgres/constraints.py:164:            self.__class__.__qualname__,\ndjango/contrib/admin/helpers.py:61:            f\"form={self.form.__class__.__qualname__} \"\ndjango/contrib/admin/helpers.py:60:            f\"<{self.__class__.__qualname__}: \"\ndjango/contrib/admin/views/main.py:158:            self.model.__qualname__,\ndjango/contrib/admin/views/main.py:157:            self.__class__.__qualname__,\ndjango/contrib/admin/views/main.py:159:            self.model_admin.__class__.__qualname__,\ndjango/contrib/admin/views/main.py:186:                f\"{self.model_admin.__class__.__qualname__}.lookup_allowed().\",\ndjango/contrib/admindocs/utils.py:27:    view_name = getattr(view_func, \"__qualname__\", view_func.__class__.__name__)\ndjango/contrib/sessions/backends/base.py:65:        return \"django.contrib.sessions.\" + self.__class__.__qualname__\ndjango/contrib/auth/hashers.py:104:            \"Password must be a string or bytes, got %s.\" % type(password).__qualname__\ndjango/contrib/auth/context_processors.py:29:        return f\"{self.__class__.__qualname__}({self.user!r})\"\ndjango/contrib/messages/storage/base.py:73:        return f\"<{self.__class__.__qualname__}: request={self.request!r}>\"\ngrep: django/utils/__pycache__/functional.cpython-311.pyc: binary file matches\ndjango/utils/datastructures.py:42:        return f\"{self.__class__.__qualname__}({data})\"\ngrep: django/utils/__pycache__/regex_helper.cpython-311.pyc: binary file matches\ndjango/utils/deprecation.py:109:            self.__class__.__qualname__,\ndjango/utils/deprecation.py:112:                \"__qualname__\",\ndjango/views/generic/base.py:75:                f\"{cls.__qualname__} HTTP handlers must either be all sync or all \"\ndjango/views/generic/base.py:109:        # __name__ and __qualname__ are intentionally left unchanged as",
      "applied_operators": [
        "text_perturbation"
      ]
    },
    {
      "action": "nl -ba django/db/migrations/serializer.py | sed -n '1,240p'",
      "original": "     1\timport builtins\n     2\timport collections.abc\n     3\timport datetime\n     4\timport decimal\n     5\timport enum\n     6\timport functools\n     7\timport math\n     8\timport os\n     9\timport pathlib\n    10\timport re\n    11\timport types\n    12\timport uuid\n    13\t\n    14\tfrom django.conf import SettingsReference\n    15\tfrom django.db import models\n    16\tfrom django.db.migrations.operations.base import Operation\n    17\tfrom django.db.migrations.utils import COMPILED_REGEX_TYPE, RegexObject\n    18\tfrom django.utils.functional import LazyObject, Promise\n    19\tfrom django.utils.version import PY311, get_docs_version\n    20\t\n    21\t\n    22\tclass BaseSerializer:\n    23\t    def __init__(self, value):\n    24\t        self.value = value\n    25\t\n    26\t    def serialize(self):\n    27\t        raise NotImplementedError(\n    28\t            \"Subclasses of BaseSerializer must implement the serialize() method.\"\n    29\t        )\n    30\t\n    31\t\n    32\tclass BaseSequenceSerializer(BaseSerializer):\n    33\t    def _format(self):\n    34\t        raise NotImplementedError(\n    35\t            \"Subclasses of BaseSequenceSerializer must implement the _format() method.\"\n    36\t        )\n    37\t\n    38\t    def serialize(self):\n    39\t        imports = set()\n    40\t        strings = []\n    41\t        for item in self.value:\n    42\t            item_string, item_imports = serializer_factory(item).serialize()\n    43\t            imports.update(item_imports)\n    44\t            strings.append(item_string)\n    45\t        value = self._format()\n    46\t        return value % (\", \".join(strings)), imports\n    47\t\n    48\t\n    49\tclass BaseUnorderedSequenceSerializer(BaseSequenceSerializer):\n    50\t    def __init__(self, value):\n    51\t        super().__init__(sorted(value, key=repr))\n    52\t\n    53\t\n    54\tclass BaseSimpleSerializer(BaseSerializer):\n    55\t    def serialize(self):\n    56\t        return repr(self.value), set()\n    57\t\n    58\t\n    59\tclass ChoicesSerializer(BaseSerializer):\n    60\t    def serialize(self):\n    61\t        return serializer_factory(self.value.value).serialize()\n    62\t\n    63\t\n    64\tclass DateTimeSerializer(BaseSerializer):\n    65\t    \"\"\"For datetime.*, except datetime.datetime.\"\"\"\n    66\t\n    67\t    def serialize(self):\n    68\t        return repr(self.value), {\"import datetime\"}\n    69\t\n    70\t\n    71\tclass DatetimeDatetimeSerializer(BaseSerializer):\n    72\t    \"\"\"For datetime.datetime.\"\"\"\n    73\t\n    74\t    def serialize(self):\n    75\t        if self.value.tzinfo is not None and self.value.tzinfo != datetime.timezone.utc:\n    76\t            self.value = self.value.astimezone(datetime.timezone.utc)\n    77\t        imports = [\"import datetime\"]\n    78\t        return repr(self.value), set(imports)\n    79\t\n    80\t\n    81\tclass DecimalSerializer(BaseSerializer):\n    82\t    def serialize(self):\n    83\t        return repr(self.value), {\"from decimal import Decimal\"}\n    84\t\n    85\t\n    86\tclass DeconstructableSerializer(BaseSerializer):\n    87\t    @staticmethod\n    88\t    def serialize_deconstructed(path, args, kwargs):\n    89\t        name, imports = DeconstructableSerializer._serialize_path(path)\n    90\t        strings = []\n    91\t        for arg in args:\n    92\t            arg_string, arg_imports = serializer_factory(arg).serialize()\n    93\t            strings.append(arg_string)\n    94\t            imports.update(arg_imports)\n    95\t        for kw, arg in sorted(kwargs.items()):\n    96\t            arg_string, arg_imports = serializer_factory(arg).serialize()\n    97\t            imports.update(arg_imports)\n    98\t            strings.append(\"%s=%s\" % (kw, arg_string))\n    99\t        return \"%s(%s)\" % (name, \", \".join(strings)), imports\n   100\t\n   101\t    @staticmethod\n   102\t    def _serialize_path(path):\n   103\t        module, name = path.rsplit(\".\", 1)\n   104\t        if module == \"django.db.models\":\n   105\t            imports = {\"from django.db import models\"}\n   106\t            name = \"models.%s\" % name\n   107\t        else:\n   108\t            imports = {\"import %s\" % module}\n   109\t            name = path\n   110\t        return name, imports\n   111\t\n   112\t    def serialize(self):\n   113\t        return self.serialize_deconstructed(*self.value.deconstruct())\n   114\t\n   115\t\n   116\tclass DictionarySerializer(BaseSerializer):\n   117\t    def serialize(self):\n   118\t        imports = set()\n   119\t        strings = []\n   120\t        for k, v in sorted(self.value.items()):\n   121\t            k_string, k_imports = serializer_factory(k).serialize()\n   122\t            v_string, v_imports = serializer_factory(v).serialize()\n   123\t            imports.update(k_imports)\n   124\t            imports.update(v_imports)\n   125\t            strings.append((k_string, v_string))\n   126\t        return \"{%s}\" % (\", \".join(\"%s: %s\" % (k, v) for k, v in strings)), imports\n   127\t\n   128\t\n   129\tclass EnumSerializer(BaseSerializer):\n   130\t    def serialize(self):\n   131\t        enum_class = self.value.__class__\n   132\t        module = enum_class.__module__\n   133\t        if issubclass(enum_class, enum.Flag):\n   134\t            if PY311:\n   135\t                members = list(self.value)\n   136\t            else:\n   137\t                members, _ = enum._decompose(enum_class, self.value)\n   138\t                members = reversed(members)\n   139\t        else:\n   140\t            members = (self.value,)\n   141\t        return (\n   142\t            \" | \".join(\n   143\t                [\n   144\t                    f\"{module}.{enum_class.__qualname__}[{item.name!r}]\"\n   145\t                    for item in members\n   146\t                ]\n   147\t            ),\n   148\t            {\"import %s\" % module},\n   149\t        )\n   150\t\n   151\t\n   152\tclass FloatSerializer(BaseSimpleSerializer):\n   153\t    def serialize(self):\n   154\t        if math.isnan(self.value) or math.isinf(self.value):\n   155\t            return 'float(\"{}\")'.format(self.value), set()\n   156\t        return super().serialize()\n   157\t\n   158\t\n   159\tclass FrozensetSerializer(BaseUnorderedSequenceSerializer):\n   160\t    def _format(self):\n   161\t        return \"frozenset([%s])\"\n   162\t\n   163\t\n   164\tclass FunctionTypeSerializer(BaseSerializer):\n   165\t    def serialize(self):\n   166\t        if getattr(self.value, \"__self__\", None) and isinstance(\n   167\t            self.value.__self__, type\n   168\t        ):\n   169\t            klass = self.value.__self__\n   170\t            module = klass.__module__\n   171\t            return \"%s.%s.%s\" % (module, klass.__name__, self.value.__name__), {\n   172\t                \"import %s\" % module\n   173\t            }\n   174\t        # Further error checking\n   175\t        if self.value.__name__ == \"<lambda>\":\n   176\t            raise ValueError(\"Cannot serialize function: lambda\")\n   177\t        if self.value.__module__ is None:\n   178\t            raise ValueError(\"Cannot serialize function %r: No module\" % self.value)\n   179\t\n   180\t        module_name = self.value.__module__\n   181\t\n   182\t        if \"<\" not in self.value.__qualname__:  # Qualname can include <locals>\n   183\t            return \"%s.%s\" % (module_name, self.value.__qualname__), {\n   184\t                \"import %s\" % self.value.__module__\n   185\t            }\n   186\t\n   187\t        raise ValueError(\n   188\t            \"Could not find function %s in %s.\\n\" % (self.value.__name__, module_name)\n   189\t        )\n   190\t\n   191\t\n   192\tclass FunctoolsPartialSerializer(BaseSerializer):\n   193\t    def serialize(self):\n   194\t        # Serialize functools.partial() arguments\n   195\t        func_string, func_imports = serializer_factory(self.value.func).serialize()\n   196\t        args_string, args_imports = serializer_factory(self.value.args).serialize()\n   197\t        keywords_string, keywords_imports = serializer_factory(\n   198\t            self.value.keywords\n   199\t        ).serialize()\n   200\t        # Add any imports needed by arguments\n   201\t        imports = {\"import functools\", *func_imports, *args_imports, *keywords_imports}\n   202\t        return (\n   203\t            \"functools.%s(%s, *%s, **%s)\"\n   204\t            % (\n   205\t                self.value.__class__.__name__,\n   206\t                func_string,\n   207\t                args_string,\n   208\t                keywords_string,\n   209\t            ),\n   210\t            imports,\n   211\t        )\n   212\t\n   213\t\n   214\tclass IterableSerializer(BaseSerializer):\n   215\t    def serialize(self):\n   216\t        imports = set()\n   217\t        strings = []\n   218\t        for item in self.value:\n   219\t            item_string, item_imports = serializer_factory(item).serialize()\n   220\t            imports.update(item_imports)\n   221\t            strings.append(item_string)\n   222\t        # When len(strings)==0, the empty iterable should be serialized as\n   223\t        # \"()\", not \"(,)\" because (,) is invalid Python syntax.\n   224\t        value = \"(%s)\" if len(strings) != 1 else \"(%s,)\"\n   225\t        return value % (\", \".join(strings)), imports\n   226\t\n   227\t\n   228\tclass ModelFieldSerializer(DeconstructableSerializer):\n   229\t    def serialize(self):\n   230\t        attr_name, path, args, kwargs = self.value.deconstruct()\n   231\t        return self.serialize_deconstructed(path, args, kwargs)\n   232\t\n   233\t\n   234\tclass ModelManagerSerializer(DeconstructableSerializer):\n   235\t    def serialize(self):\n   236\t        as_manager, manager_path, qs_path, args, kwargs = self.value.deconstruct()\n   237\t        if as_manager:\n   238\t            name, imports = self._serialize_path(qs_path)\n   239\t            return \"%s.as_manager()\" % name, imports\n   240\t        else:\n",
      "perturbed": "     3\timport datetime\n     2\timport collections.abc\n     4\timport decimal\n     5\timport enum\n     6\timport functools\n     7\timport math\n     8\timport os\n     9\timport pathlib\n    10\timport re\n    11\timport types\n    13\t\n    12\timport uuid\n    14\tfrom django.conf import SettingsReference\n    15\tfrom django.db import models\n    16\tfrom django.db.migrations.operations.base import Operation\n    17\tfrom django.db.migrations.utils import COMPILED_REGEX_TYPE, RegexObject\n    18\tfrom django.utils.functional import LazyObject, Promise\n    20\t\n    23\t    def __init__(self, value):\n    21\t\n    24\t        self.value = value\n    25\t\n    26\t    def serialize(self):\n    28\t            \"Subclasses of BaseSerializer must implement the serialize() method.\"\n    27\t        raise NotImplementedError(\n    29\t        )\n    30\t\n    32\tclass BaseSequenceSerializer(BaseSerializer):\n    31\t\n    34\t        raise NotImplementedError(\n    33\t    def _format(self):\n    35\t            \"Subclasses of BaseSequenceSerializer must implement the _format() method.\"\n    36\t        )\n    37\t\n    40\t        strings = []\n    38\t    def serialize(self):\n    43\t            imports.update(item_imports)\n    42\t            item_string, item_imports = serializer_factory(item).serialize()\n    44\t            strings.append(item_string)\n    45\t        value = self._format()\n    47\t\n    49\tclass BaseUnorderedSequenceSerializer(BaseSequenceSerializer):\n    48\t\n    50\t    def __init__(self, value):\n    52\t\n    53\t\n    54\tclass BaseSimpleSerializer(BaseSerializer):\n    55\t    def serialize(self):\n    57\t\n    56\t        return repr(self.value), set()\n    59\tclass ChoicesSerializer(BaseSerializer):\n    60\t    def serialize(self):\n    61\t        return serializer_factory(self.value.value).serialize()\n    62\t\n    63\t\n    65\t    \"\"\"For datetime.*, except datetime.datetime.\"\"\"\n    67\t    def serialize(self):\n    66\t\n    68\t        return repr(self.value), {\"import datetime\"}\n    70\t\n    72\t    \"\"\"For datetime.datetime.\"\"\"\n    71\tclass DatetimeDatetimeSerializer(BaseSerializer):\n    73\t\n    75\t        if self.value.tzinfo is not None and self.value.tzinfo != datetime.timezone.utc:\n    76\t            self.value = self.value.astimezone(datetime.timezone.utc)\n    77\t        imports = [\"import datetime\"]\n    78\t        return repr(self.value), set(imports)\n    80\t\n    82\t    def serialize(self):\n    81\tclass DecimalSerializer(BaseSerializer):\n    84\t\n    83\t        return repr(self.value), {\"from decimal import Decimal\"}\n    85\t\n    86\tclass DeconstructableSerializer(BaseSerializer):\n    87\t    @staticmethod\n    88\t    def serialize_deconstructed(path, args, kwargs):\n    90\t        strings = []\n    89\t        name, imports = DeconstructableSerializer._serialize_path(path)\n    95\t        for kw, arg in sorted(kwargs.items()):\n    94\t            imports.update(arg_imports)\n    98\t            strings.append(\"%s=%s\" % (kw, arg_string))\n   100\t\n   101\t    @staticmethod\n   103\t        module, name = path.rsplit(\".\", 1)\n   102\t    def _serialize_path(path):\n   106\t            name = \"models.%s\" % name\n   108\t            imports = {\"import %s\" % module}\n   109\t            name = path\n   112\t    def serialize(self):\n   110\t        return name, imports\n   113\t        return self.serialize_deconstructed(*self.value.deconstruct())\n   114\t\n   116\tclass DictionarySerializer(BaseSerializer):\n   115\t\n   117\t    def serialize(self):\n   118\t        imports = set()\n   119\t        strings = []\n   120\t        for k, v in sorted(self.value.items()):\n   121\t            k_string, k_imports = serializer_factory(k).serialize()\n   122\t            v_string, v_imports = serializer_factory(v).serialize()\n   123\t            imports.update(k_imports)\n   124\t            imports.update(v_imports)\n   125\t            strings.append((k_string, v_string))\n   126\t        return \"{%s}\" % (\", \".join(\"%s: %s\" % (k, v) for k, v in strings)), imports\n   127\t\n   128\t\n   129\tclass EnumSerializer(BaseSerializer):\n   130\t    def serialize(self):\n   131\t        enum_class = self.value.__class__\n   132\t        module = enum_class.__module__\n   133\t        if issubclass(enum_class, enum.Flag):\n   134\t            if PY311:\n   135\t                members = list(self.value)\n   136\t            else:\n   137\t                members, _ = enum._decompose(enum_class, self.value)\n   138\t                members = reversed(members)\n   139\t        else:\n   140\t            members = (self.value,)\n   143\t                [\n   141\t        return (\n   144\t                    f\"{module}.{enum_class.__qualname__}[{item.name!r}]\"\n   145\t                    for item in members\n   146\t                ]\n   148\t            {\"import %s\" % module},\n   150\t\n   149\t        )\n   152\tclass FloatSerializer(BaseSimpleSerializer):\n   151\t\n   154\t        if math.isnan(self.value) or math.isinf(self.value):\n   153\t    def serialize(self):\n   155\t            return 'float(\"{}\")'.format(self.value), set()\n   156\t        return super().serialize()\n   157\t\n   160\t    def _format(self):\n   159\tclass FrozensetSerializer(BaseUnorderedSequenceSerializer):\n   161\t        return \"frozenset([%s])\"\n   162\t\n   163\t\n   164\tclass FunctionTypeSerializer(BaseSerializer):\n   165\t    def serialize(self):\n   166\t        if getattr(self.value, \"__self__\", None) and isinstance(\n   167\t            self.value.__self__, type\n   168\t        ):\n   169\t            klass = self.value.__self__\n   170\t            module = klass.__module__\n   171\t            return \"%s.%s.%s\" % (module, klass.__name__, self.value.__name__), {\n   172\t                \"import %s\" % module\n   173\t            }\n   175\t        if self.value.__name__ == \"<lambda>\":\n   177\t        if self.value.__module__ is None:\n   179\t\n   181\t\n   183\t            return \"%s.%s\" % (module_name, self.value.__qualname__), {\n   182\t        if \"<\" not in self.value.__qualname__:  # Qualname can include <locals>\n   186\t\n   184\t                \"import %s\" % self.value.__module__\n   187\t        raise ValueError(\n   188\t            \"Could not find function %s in %s.\\n\" % (self.value.__name__, module_name)\n   189\t        )\n   192\tclass FunctoolsPartialSerializer(BaseSerializer):\n   194\t        # Serialize functools.partial() arguments\n   195\t        func_string, func_imports = serializer_factory(self.value.func).serialize()\n   197\t        keywords_string, keywords_imports = serializer_factory(\n   200\t        # Add any imports needed by arguments\n   201\t        imports = {\"import functools\", *func_imports, *args_imports, *keywords_imports}\n   202\t        return (\n   203\t            \"functools.%s(%s, *%s, **%s)\"\n   204\t            % (\n   205\t                self.value.__class__.__name__,\n   206\t                func_string,\n   208\t                keywords_string,\n   207\t                args_string,\n   209\t            ),\n   210\t            imports,\n   211\t        )\n   212\t\n   214\tclass IterableSerializer(BaseSerializer):\n   217\t        strings = []\n   215\t    def serialize(self):\n   221\t            strings.append(item_string)\n   218\t        for item in self.value:\n   222\t        # When len(strings)==0, the empty iterable should be serialized as\n   223\t        # \"()\", not \"(,)\" because (,) is invalid Python syntax.\n   224\t        value = \"(%s)\" if len(strings) != 1 else \"(%s,)\"\n   225\t        return value % (\", \".join(strings)), imports\n   226\t\n   227\t\n   228\tclass ModelFieldSerializer(DeconstructableSerializer):\n   230\t        attr_name, path, args, kwargs = self.value.deconstruct()\n   229\t    def serialize(self):\n   231\t        return self.serialize_deconstructed(path, args, kwargs)\n   232\t\n   233\t\n   234\tclass ModelManagerSerializer(DeconstructableSerializer):\n   235\t    def serialize(self):\n   236\t        as_manager, manager_path, qs_path, args, kwargs = self.value.deconstruct()\n   237\t        if as_manager:\n   238\t            name, imports = self._serialize_path(qs_path)\n   240\t        else:",
      "applied_operators": [
        "text_perturbation"
      ]
    }
  ]
}