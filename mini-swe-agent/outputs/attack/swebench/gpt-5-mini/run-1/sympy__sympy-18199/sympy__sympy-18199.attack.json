{
  "info": {
    "total_observations": 18,
    "python_observations": 1,
    "text_observations": 17,
    "ast_operators_applied": 1,
    "text_perturbation_applied": 3,
    "skipped": 14
  },
  "perturbations": [
    {
      "action": "grep -Rn \"nthroot_mod\" -n",
      "original": "sympy/solvers/solveset.py:43:from sympy.ntheory.residue_ntheory import discrete_log, nthroot_mod\nsympy/solvers/solveset.py:1110:          primitive solutions list with the help of nthroot_mod function.\nsympy/solvers/solveset.py:1112:          from nthroot_mod function.\nsympy/solvers/solveset.py:1205:                remainder_list = nthroot_mod(rhs, expo, m, all_roots=True)\nsympy/ntheory/tests/test_residue.py:7:    primitive_root, quadratic_residues, is_nthpow_residue, nthroot_mod, \\\nsympy/ntheory/tests/test_residue.py:165:    raises(NotImplementedError, lambda: nthroot_mod(29, 31, 74))\nsympy/ntheory/tests/test_residue.py:166:    assert nthroot_mod(1801, 11, 2663) == 44\nsympy/ntheory/tests/test_residue.py:170:        r = nthroot_mod(a, q, p)\nsympy/ntheory/tests/test_residue.py:172:    assert nthroot_mod(11, 3, 109) is None\nsympy/ntheory/tests/test_residue.py:173:    raises(NotImplementedError, lambda: nthroot_mod(16, 5, 36))\nsympy/ntheory/tests/test_residue.py:174:    raises(NotImplementedError, lambda: nthroot_mod(9, 16, 36))\nsympy/ntheory/tests/test_residue.py:183:                res = nthroot_mod(a, q, p, True)\nsympy/ntheory/__init__.py:17:    primitive_root, nthroot_mod, is_nthpow_residue, sqrt_mod_iter, mobius, \\\nsympy/ntheory/__init__.py:43:    'primitive_root', 'nthroot_mod', 'is_nthpow_residue', 'sqrt_mod_iter',\nsympy/ntheory/residue_ntheory.py:690:def _nthroot_mod2(s, q, p):\nsympy/ntheory/residue_ntheory.py:696:        s = _nthroot_mod1(s, qx, p, False)\nsympy/ntheory/residue_ntheory.py:700:def _nthroot_mod1(s, q, p, all_roots):\nsympy/ntheory/residue_ntheory.py:712:        r = _nthroot_mod2(s, q, p)\nsympy/ntheory/residue_ntheory.py:746:def nthroot_mod(a, n, p, all_roots=False):\nsympy/ntheory/residue_ntheory.py:761:    >>> from sympy.ntheory.residue_ntheory import nthroot_mod\nsympy/ntheory/residue_ntheory.py:762:    >>> nthroot_mod(11, 4, 19)\nsympy/ntheory/residue_ntheory.py:764:    >>> nthroot_mod(11, 4, 19, True)\nsympy/ntheory/residue_ntheory.py:766:    >>> nthroot_mod(68, 3, 109)\nsympy/ntheory/residue_ntheory.py:780:        return _nthroot_mod1(a, n, p, all_roots)\nsympy/ntheory/residue_ntheory.py:806:        res = _nthroot_mod1(a, pa, p, all_roots)\ndoc/src/modules/ntheory.rst:165:.. autofunction:: nthroot_mod\n",
      "perturbed": "sympy/solvers/solveset.py:43:from sympy.ntheory.residue_ntheory import discrete_log, nthroot_mod\nsympy/solvers/solveset.py:1110:          primitive solutions list with the help of nthroot_mod function.\nsympy/solvers/solveset.py:1205:                remainder_list = nthroot_mod(rhs, expo, m, all_roots=True)\nsympy/ntheory/tests/test_residue.py:7:    primitive_root, quadratic_residues, is_nthpow_residue, nthroot_mod, \\\nsympy/ntheory/tests/test_residue.py:166:    assert nthroot_mod(1801, 11, 2663) == 44\nsympy/ntheory/tests/test_residue.py:170:        r = nthroot_mod(a, q, p)\nsympy/ntheory/tests/test_residue.py:172:    assert nthroot_mod(11, 3, 109) is None\nsympy/ntheory/tests/test_residue.py:183:                res = nthroot_mod(a, q, p, True)\nsympy/ntheory/tests/test_residue.py:174:    raises(NotImplementedError, lambda: nthroot_mod(9, 16, 36))\nsympy/ntheory/__init__.py:43:    'primitive_root', 'nthroot_mod', 'is_nthpow_residue', 'sqrt_mod_iter',\nsympy/ntheory/__init__.py:17:    primitive_root, nthroot_mod, is_nthpow_residue, sqrt_mod_iter, mobius, \\\nsympy/ntheory/residue_ntheory.py:690:def _nthroot_mod2(s, q, p):\nsympy/ntheory/residue_ntheory.py:696:        s = _nthroot_mod1(s, qx, p, False)\n[warning] unexpected output\nsympy/ntheory/residue_ntheory.py:700:def _nthroot_mod1(s, q, p, all_roots):\nsympy/ntheory/residue_ntheory.py:746:def nthroot_mod(a, n, p, all_roots=False):\nsympy/ntheory/residue_ntheory.py:712:        r = _nthroot_mod2(s, q, p)\nsympy/ntheory/residue_ntheory.py:761:    >>> from sympy.ntheory.residue_ntheory import nthroot_mod\nsympy/ntheory/residue_ntheory.py:762:    >>> nthroot_mod(11, 4, 19)\nsympy/ntheory/residue_ntheory.py:780:        return _nthroot_mod1(a, n, p, all_roots)\nsympy/ntheory/residue_ntheory.py:764:    >>> nthroot_mod(11, 4, 19, True)\nsympy/ntheory/residue_ntheory.py:806:        res = _nthroot_mod1(a, pa, p, all_roots)\ndoc/src/modules/ntheory.rst:165:.. autofunction:: nthroot_mod",
      "applied_operators": [
        "text_perturbation"
      ]
    },
    {
      "action": "nl -ba sympy/ntheory/residue_ntheory.py | sed -n '650,820p'",
      "original": "   650\tdef _is_nthpow_residue_bign(a, n, m):\n   651\t    \"\"\"Returns True if ``x**n == a (mod m)`` has solutions for n > 2.\"\"\"\n   652\t    # assert n > 2\n   653\t    # assert a > 0 and m > 0\n   654\t    if primitive_root(m) is None:\n   655\t        # assert m >= 8\n   656\t        for prime, power in factorint(m).items():\n   657\t            if not _is_nthpow_residue_bign_prime_power(a, n, prime, power):\n   658\t                return False\n   659\t        return True\n   660\t    f = totient(m)\n   661\t    k = f // igcd(f, n)\n   662\t    return pow(a, k, m) == 1\n   663\t\n   664\t\n   665\tdef _is_nthpow_residue_bign_prime_power(a, n, p, k):\n   666\t    \"\"\"Returns True/False if a solution for ``x**n == a (mod(p**k))``\n   667\t    does/doesn't exist.\"\"\"\n   668\t    # assert a > 0\n   669\t    # assert n > 2\n   670\t    # assert p is prime\n   671\t    # assert k > 0\n   672\t    if a % p:\n   673\t        if p != 2:\n   674\t            return _is_nthpow_residue_bign(a, n, pow(p, k))\n   675\t        if n & 1:\n   676\t            return True\n   677\t        c = trailing(n)\n   678\t        return a % pow(2, min(c + 2, k)) == 1\n   679\t    else:\n   680\t        a %= pow(p, k)\n   681\t        if not a:\n   682\t            return True\n   683\t        mu = multiplicity(p, a)\n   684\t        if mu % n:\n   685\t            return False\n   686\t        pm = pow(p, mu)\n   687\t        return _is_nthpow_residue_bign_prime_power(a//pm, n, p, k - mu)\n   688\t\n   689\t\n   690\tdef _nthroot_mod2(s, q, p):\n   691\t    f = factorint(q)\n   692\t    v = []\n   693\t    for b, e in f.items():\n   694\t        v.extend([b]*e)\n   695\t    for qx in v:\n   696\t        s = _nthroot_mod1(s, qx, p, False)\n   697\t    return s\n   698\t\n   699\t\n   700\tdef _nthroot_mod1(s, q, p, all_roots):\n   701\t    \"\"\"\n   702\t    Root of ``x**q = s mod p``, ``p`` prime and ``q`` divides ``p - 1``\n   703\t\n   704\t    References\n   705\t    ==========\n   706\t\n   707\t    .. [1] A. M. Johnston \"A Generalized qth Root Algorithm\"\n   708\t\n   709\t    \"\"\"\n   710\t    g = primitive_root(p)\n   711\t    if not isprime(q):\n   712\t        r = _nthroot_mod2(s, q, p)\n   713\t    else:\n   714\t        f = p - 1\n   715\t        assert (p - 1) % q == 0\n   716\t        # determine k\n   717\t        k = 0\n   718\t        while f % q == 0:\n   719\t            k += 1\n   720\t            f = f // q\n   721\t        # find z, x, r1\n   722\t        f1 = igcdex(-f, q)[0] % q\n   723\t        z = f*f1\n   724\t        x = (1 + z) // q\n   725\t        r1 = pow(s, x, p)\n   726\t        s1 = pow(s, f, p)\n   727\t        h = pow(g, f*q, p)\n   728\t        t = discrete_log(p, s1, h)\n   729\t        g2 = pow(g, z*t, p)\n   730\t        g3 = igcdex(g2, p)[0]\n   731\t        r = r1*g3 % p\n   732\t        #assert pow(r, q, p) == s\n   733\t    res = [r]\n   734\t    h = pow(g, (p - 1) // q, p)\n   735\t    #assert pow(h, q, p) == 1\n   736\t    hx = r\n   737\t    for i in range(q - 1):\n   738\t        hx = (hx*h) % p\n   739\t        res.append(hx)\n   740\t    if all_roots:\n   741\t        res.sort()\n   742\t        return res\n   743\t    return min(res)\n   744\t\n   745\t\n   746\tdef nthroot_mod(a, n, p, all_roots=False):\n   747\t    \"\"\"\n   748\t    Find the solutions to ``x**n = a mod p``\n   749\t\n   750\t    Parameters\n   751\t    ==========\n   752\t\n   753\t    a : integer\n   754\t    n : positive integer\n   755\t    p : positive integer\n   756\t    all_roots : if False returns the smallest root, else the list of roots\n   757\t\n   758\t    Examples\n   759\t    ========\n   760\t\n   761\t    >>> from sympy.ntheory.residue_ntheory import nthroot_mod\n   762\t    >>> nthroot_mod(11, 4, 19)\n   763\t    8\n   764\t    >>> nthroot_mod(11, 4, 19, True)\n   765\t    [8, 11]\n   766\t    >>> nthroot_mod(68, 3, 109)\n   767\t    23\n   768\t    \"\"\"\n   769\t    from sympy.core.numbers import igcdex\n   770\t    a, n, p = as_int(a), as_int(n), as_int(p)\n   771\t    if n == 2:\n   772\t        return sqrt_mod(a, p, all_roots)\n   773\t    # see Hackman \"Elementary Number Theory\" (2009), page 76\n   774\t    if not is_nthpow_residue(a, n, p):\n   775\t        return None\n   776\t    if not isprime(p):\n   777\t        raise NotImplementedError(\"Not implemented for composite p\")\n   778\t\n   779\t    if (p - 1) % n == 0:\n   780\t        return _nthroot_mod1(a, n, p, all_roots)\n   781\t    # The roots of ``x**n - a = 0 (mod p)`` are roots of\n   782\t    # ``gcd(x**n - a, x**(p - 1) - 1) = 0 (mod p)``\n   783\t    pa = n\n   784\t    pb = p - 1\n   785\t    b = 1\n   786\t    if pa < pb:\n   787\t        a, pa, b, pb = b, pb, a, pa\n   788\t    while pb:\n   789\t        # x**pa - a = 0; x**pb - b = 0\n   790\t        # x**pa - a = x**(q*pb + r) - a = (x**pb)**q * x**r - a =\n   791\t        #             b**q * x**r - a; x**r - c = 0; c = b**-q * a mod p\n   792\t        q, r = divmod(pa, pb)\n   793\t        c = pow(b, q, p)\n   794\t        c = igcdex(c, p)[0]\n   795\t        c = (c * a) % p\n   796\t        pa, pb = pb, r\n   797\t        a, b = b, c\n   798\t    if pa == 1:\n   799\t        if all_roots:\n   800\t            res = [a]\n   801\t        else:\n   802\t            res = a\n   803\t    elif pa == 2:\n   804\t        return sqrt_mod(a, p , all_roots)\n   805\t    else:\n   806\t        res = _nthroot_mod1(a, pa, p, all_roots)\n   807\t    return res\n   808\t\n   809\t\n   810\tdef quadratic_residues(p):\n   811\t    \"\"\"\n   812\t    Returns the list of quadratic residues.\n   813\t\n   814\t    Examples\n   815\t    ========\n   816\t\n   817\t    >>> from sympy.ntheory.residue_ntheory import quadratic_residues\n   818\t    >>> quadratic_residues(7)\n   819\t    [0, 1, 2, 4]\n   820\t    \"\"\"\n",
      "perturbed": "   650\tdef _is_nthpow_residue_bign(a, n, m):\n   651\t    \"\"\"Returns True if ``x**n == a (mod m)`` has solutions for n > 2.\"\"\"\n   652\t    # assert n > 2\n   653\t    # assert a > 0 and m > 0\n   654\t    if primitive_root(m) is None:\n   655\t        # assert m >= 8\n   656\t        for prime, power in factorint(m).items():\n   657\t            if not _is_nthpow_residue_bign_prime_power(a, n, prime, power):\n   658\t                return False\n   660\t    f = totient(m)\n   662\t    return pow(a, k, m) == 1\n   661\t    k = f // igcd(f, n)\n   663\t\n   665\tdef _is_nthpow_residue_bign_prime_power(a, n, p, k):\n   666\t    \"\"\"Returns True/False if a solution for ``x**n == a (mod(p**k))``\n   667\t    does/doesn't exist.\"\"\"\n   668\t    # assert a > 0\n   671\t    # assert k > 0\n   670\t    # assert p is prime\n   672\t    if a % p:\n   673\t        if p != 2:\n   674\t            return _is_nthpow_residue_bign(a, n, pow(p, k))\n   675\t        if n & 1:\n   676\t            return True\n   678\t        return a % pow(2, min(c + 2, k)) == 1\n   677\t        c = trailing(n)\n   679\t    else:\n   680\t        a %= pow(p, k)\n   681\t        if not a:\n   682\t            return True\n   683\t        mu = multiplicity(p, a)\n   685\t            return False\n   684\t        if mu % n:\n   687\t        return _is_nthpow_residue_bign_prime_power(a//pm, n, p, k - mu)\n   686\t        pm = pow(p, mu)\n   689\t\n   688\t\n   690\tdef _nthroot_mod2(s, q, p):\n   691\t    f = factorint(q)\n   694\t        v.extend([b]*e)\n   696\t        s = _nthroot_mod1(s, qx, p, False)\n   698\t\n   697\t    return s\n   699\t\n   700\tdef _nthroot_mod1(s, q, p, all_roots):\n   702\t    Root of ``x**q = s mod p``, ``p`` prime and ``q`` divides ``p - 1``\n   701\t    \"\"\"\n   703\t\n   706\t\n   705\t    ==========\n   707\t    .. [1] A. M. Johnston \"A Generalized qth Root Algorithm\"\n   708\t\n   709\t    \"\"\"\n   710\t    g = primitive_root(p)\n   711\t    if not isprime(q):\n   712\t        r = _nthroot_mod2(s, q, p)\n   714\t        f = p - 1\n   715\t        assert (p - 1) % q == 0\n   717\t        k = 0\n   716\t        # determine k\n   718\t        while f % q == 0:\n   719\t            k += 1\n   720\t            f = f // q\n   721\t        # find z, x, r1\n   723\t        z = f*f1\n   722\t        f1 = igcdex(-f, q)[0] % q\n   724\t        x = (1 + z) // q\n   725\t        r1 = pow(s, x, p)\n   727\t        h = pow(g, f*q, p)\n   731\t        r = r1*g3 % p\n   732\t        #assert pow(r, q, p) == s\n   735\t    #assert pow(h, q, p) == 1\n   734\t    h = pow(g, (p - 1) // q, p)\n   736\t    hx = r\n   738\t        hx = (hx*h) % p\n   737\t    for i in range(q - 1):\n   739\t        res.append(hx)\n   742\t        return res\n   740\t    if all_roots:\n   743\t    return min(res)\n   744\t\n   745\t\n   746\tdef nthroot_mod(a, n, p, all_roots=False):\n   747\t    \"\"\"\n   748\t    Find the solutions to ``x**n = a mod p``\n   749\t\n   750\t    Parameters\n   751\t    ==========\n   753\t    a : integer\n   754\t    n : positive integer\n   755\t    p : positive integer\n   756\t    all_roots : if False returns the smallest root, else the list of roots\n   757\t\n   758\t    Examples\n   759\t    ========\n   761\t    >>> from sympy.ntheory.residue_ntheory import nthroot_mod\n   760\t\n   762\t    >>> nthroot_mod(11, 4, 19)\n   763\t    8\n   764\t    >>> nthroot_mod(11, 4, 19, True)\n   765\t    [8, 11]\n   766\t    >>> nthroot_mod(68, 3, 109)\n   768\t    \"\"\"\n   769\t    from sympy.core.numbers import igcdex\n   772\t        return sqrt_mod(a, p, all_roots)\n   771\t    if n == 2:\n   773\t    # see Hackman \"Elementary Number Theory\" (2009), page 76\n   774\t    if not is_nthpow_residue(a, n, p):\n   775\t        return None\n   776\t    if not isprime(p):\n   778\t\n   779\t    if (p - 1) % n == 0:\n   780\t        return _nthroot_mod1(a, n, p, all_roots)\n   781\t    # The roots of ``x**n - a = 0 (mod p)`` are roots of\n   782\t    # ``gcd(x**n - a, x**(p - 1) - 1) = 0 (mod p)``\n   783\t    pa = n\n   784\t    pb = p - 1\n   785\t    b = 1\n   787\t        a, pa, b, pb = b, pb, a, pa\n   786\t    if pa < pb:\n   788\t    while pb:\n   789\t        # x**pa - a = 0; x**pb - b = 0\n   791\t        #             b**q * x**r - a; x**r - c = 0; c = b**-q * a mod p\n   790\t        # x**pa - a = x**(q*pb + r) - a = (x**pb)**q * x**r - a =\n   794\t        c = igcdex(c, p)[0]\n   793\t        c = pow(b, q, p)\n   795\t        c = (c * a) % p\n   796\t        pa, pb = pb, r\n   798\t    if pa == 1:\n   799\t        if all_roots:\n   800\t            res = [a]\n   801\t        else:\n   802\t            res = a\n   804\t        return sqrt_mod(a, p , all_roots)\n   803\t    elif pa == 2:\n   805\t    else:\n   806\t        res = _nthroot_mod1(a, pa, p, all_roots)\n   807\t    return res\n   808\t\n   809\t\n   811\t    \"\"\"\n   810\tdef quadratic_residues(p):\n   812\t    Returns the list of quadratic residues.\n   813\t\n   814\t    Examples\n   815\t    ========\n   816\t\n   817\t    >>> from sympy.ntheory.residue_ntheory import quadratic_residues\n   819\t    [0, 1, 2, 4]\n   818\t    >>> quadratic_residues(7)\n   820\t    \"\"\"",
      "applied_operators": [
        "text_perturbation"
      ]
    },
    {
      "action": "python3 - <<'PY'\nfrom sympy.ntheory.residue_ntheory import nthroot_mod\nprint(nthroot_mod(17*17, 5, 17, all_roots=True))\nprint(nthroot_mod(17*17, 5, 17))\nPY",
      "original": "[0]\n0\n",
      "perturbed": "['0']\n'0'",
      "applied_operators": [
        "apr_change_type"
      ]
    },
    {
      "action": "pytest -q sympy/ntheory/tests/test_residue.py::test_residue -q",
      "original": "bash: line 1: pytest: command not found\n",
      "perturbed": "info: continuing execution\nbash: line 1: pytest: command not found",
      "applied_operators": [
        "text_perturbation"
      ]
    }
  ]
}