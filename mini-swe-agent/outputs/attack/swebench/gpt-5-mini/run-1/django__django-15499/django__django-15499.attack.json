{
  "info": {
    "total_observations": 9,
    "python_observations": 2,
    "text_observations": 7,
    "ast_operators_applied": 0,
    "text_perturbation_applied": 6,
    "skipped": 3
  },
  "perturbations": [
    {
      "action": "ls -la",
      "original": "total 188\ndrwxrwxrwx   1 root root  4096 Sep 10 12:40 .\ndrwxr-xr-x   1 root root  4096 Nov 29 21:43 ..\n-rw-r--r--   1 root root   806 Sep 10 12:31 .editorconfig\n-rw-r--r--   1 root root   120 Sep 10 12:31 .eslintignore\n-rw-r--r--   1 root root  1407 Sep 10 12:31 .eslintrc\ndrwxrwxrwx   8 root root  4096 Sep 10 12:40 .git\n-rw-r--r--   1 root root   164 Sep 10 12:31 .git-blame-ignore-revs\n-rw-r--r--   1 root root   297 Sep 10 12:31 .gitattributes\ndrwxrwxrwx   3 root root  4096 Sep 10 12:31 .github\n-rw-r--r--   1 root root   353 Sep 10 12:31 .gitignore\n-rw-r--r--   1 root root   388 Sep 10 12:31 .pre-commit-config.yaml\n-rw-r--r--   1 root root   385 Sep 10 12:31 .readthedocs.yml\ndrwxrwxrwx   2 root root  4096 Sep 10 12:31 .tx\n-rw-r--r--   1 root root 40150 Sep 10 12:31 AUTHORS\n-rw-r--r--   1 root root  1115 Sep 10 12:31 CONTRIBUTING.rst\ndrwxr-xr-x   2 root root  4096 Sep 10 12:40 Django.egg-info\n-rw-r--r--   1 root root   369 Sep 10 12:31 Gruntfile.js\n-rw-r--r--   1 root root   236 Sep 10 12:31 INSTALL\n-rw-r--r--   1 root root  1552 Sep 10 12:31 LICENSE\n-rw-r--r--   1 root root 14383 Sep 10 12:31 LICENSE.python\n-rw-r--r--   1 root root   276 Sep 10 12:31 MANIFEST.in\n-rw-r--r--   1 root root  2122 Sep 10 12:31 README.rst\ndrwxrwxrwx  18 root root  4096 Sep 10 12:40 django\ndrwxrwxrwx  13 root root  4096 Sep 10 12:31 docs\ndrwxrwxrwx   2 root root  4096 Sep 10 12:31 extras\ndrwxrwxrwx   4 root root  4096 Sep 10 12:31 js_tests\n-rw-r--r--   1 root root   334 Sep 10 12:31 package.json\n-rw-r--r--   1 root root   219 Sep 10 12:31 pyproject.toml\ndrwxrwxrwx   2 root root  4096 Sep 10 12:31 scripts\n-rw-r--r--   1 root root  2276 Sep 10 12:31 setup.cfg\n-rw-r--r--   1 root root  1633 Sep 10 12:31 setup.py\ndrwxrwxrwx 214 root root 12288 Sep 10 12:31 tests\n-rw-r--r--   1 root root  1702 Sep 10 12:31 tox.ini\n",
      "perturbed": "drwxrwxrwx   1 root root  4096 Sep 10 12:40 .\n-rw-r--r--   1 root root   120 Sep 10 12:31 .eslintignore\n-rw-r--r--   1 root root   164 Sep 10 12:31 .git-blame-ignore-revs\ndrwxrwxrwx   8 root root  4096 Sep 10 12:40 .git\n-rw-r--r--   1 root root   297 Sep 10 12:31 .gitattributes\n-rw-r--r--   1 root root   353 Sep 10 12:31 .gitignore\ndrwxrwxrwx   3 root root  4096 Sep 10 12:31 .github\n-rw-r--r--   1 root root   388 Sep 10 12:31 .pre-commit-config.yaml\n-rw-r--r--   1 root root   385 Sep 10 12:31 .readthedocs.yml\n-rw-r--r--   1 root root 40150 Sep 10 12:31 AUTHORS\n-rw-r--r--   1 root root  1115 Sep 10 12:31 CONTRIBUTING.rst\ndrwxr-xr-x   2 root root  4096 Sep 10 12:40 Django.egg-info\n-rw-r--r--   1 root root   369 Sep 10 12:31 Gruntfile.js\n-rw-r--r--   1 root root   236 Sep 10 12:31 INSTALL\n-rw-r--r--   1 root root  1552 Sep 10 12:31 LICENSE\n-rw-r--r--   1 root root  2122 Sep 10 12:31 README.rst\n-rw-r--r--   1 root root   276 Sep 10 12:31 MANIFEST.in\ndrwxrwxrwx  18 root root  4096 Sep 10 12:40 django\ndrwxrwxrwx   2 root root  4096 Sep 10 12:31 extras\ndrwxrwxrwx  13 root root  4096 Sep 10 12:31 docs\n-rw-r--r--   1 root root   334 Sep 10 12:31 package.json\n-rw-r--r--   1 root root   219 Sep 10 12:31 pyproject.toml\ndrwxrwxrwx   2 root root  4096 Sep 10 12:31 scripts\n-rw-r--r--   1 root root  2276 Sep 10 12:31 setup.cfg\n-rw-r--r--   1 root root  1702 Sep 10 12:31 tox.ini\ndrwxrwxrwx 214 root root 12288 Sep 10 12:31 tests",
      "applied_operators": [
        "text_perturbation"
      ]
    },
    {
      "action": "grep -R \"AlterModelManagers\" -n django || true",
      "original": "django/db/migrations/operations/__init__.py:6:    AlterModelManagers,\ndjango/db/migrations/operations/__init__.py:39:    \"AlterModelManagers\",\ndjango/db/migrations/operations/models.py:732:class AlterModelManagers(ModelOptionOperation):\ndjango/db/migrations/autodetector.py:1508:                    operations.AlterModelManagers(\n",
      "perturbed": "django/db/migrations/operations/__init__.py:39:    \"AlterModelManagers\",\ndjango/db/migrations/operations/__init__.py:6:    AlterModelManagers,\ndjango/db/migrations/operations/models.py:732:class AlterModelManagers(ModelOptionOperation):\ndjango/db/migrations/autodetector.py:1508:                    operations.AlterModelManagers(",
      "applied_operators": [
        "text_perturbation"
      ]
    },
    {
      "action": "nl -ba django/db/migrations/operations/models.py | sed -n '1,240p'",
      "original": "     1\tfrom django.db import models\n     2\tfrom django.db.migrations.operations.base import Operation\n     3\tfrom django.db.migrations.state import ModelState\n     4\tfrom django.db.migrations.utils import field_references, resolve_relation\n     5\tfrom django.db.models.options import normalize_together\n     6\tfrom django.utils.functional import cached_property\n     7\t\n     8\tfrom .fields import AddField, AlterField, FieldOperation, RemoveField, RenameField\n     9\t\n    10\t\n    11\tdef _check_for_duplicates(arg_name, objs):\n    12\t    used_vals = set()\n    13\t    for val in objs:\n    14\t        if val in used_vals:\n    15\t            raise ValueError(\n    16\t                \"Found duplicate value %s in CreateModel %s argument.\" % (val, arg_name)\n    17\t            )\n    18\t        used_vals.add(val)\n    19\t\n    20\t\n    21\tclass ModelOperation(Operation):\n    22\t    def __init__(self, name):\n    23\t        self.name = name\n    24\t\n    25\t    @cached_property\n    26\t    def name_lower(self):\n    27\t        return self.name.lower()\n    28\t\n    29\t    def references_model(self, name, app_label):\n    30\t        return name.lower() == self.name_lower\n    31\t\n    32\t    def reduce(self, operation, app_label):\n    33\t        return super().reduce(operation, app_label) or self.can_reduce_through(\n    34\t            operation, app_label\n    35\t        )\n    36\t\n    37\t    def can_reduce_through(self, operation, app_label):\n    38\t        return not operation.references_model(self.name, app_label)\n    39\t\n    40\t\n    41\tclass CreateModel(ModelOperation):\n    42\t    \"\"\"Create a model's table.\"\"\"\n    43\t\n    44\t    serialization_expand_args = [\"fields\", \"options\", \"managers\"]\n    45\t\n    46\t    def __init__(self, name, fields, options=None, bases=None, managers=None):\n    47\t        self.fields = fields\n    48\t        self.options = options or {}\n    49\t        self.bases = bases or (models.Model,)\n    50\t        self.managers = managers or []\n    51\t        super().__init__(name)\n    52\t        # Sanity-check that there are no duplicated field names, bases, or\n    53\t        # manager names\n    54\t        _check_for_duplicates(\"fields\", (name for name, _ in self.fields))\n    55\t        _check_for_duplicates(\n    56\t            \"bases\",\n    57\t            (\n    58\t                base._meta.label_lower\n    59\t                if hasattr(base, \"_meta\")\n    60\t                else base.lower()\n    61\t                if isinstance(base, str)\n    62\t                else base\n    63\t                for base in self.bases\n    64\t            ),\n    65\t        )\n    66\t        _check_for_duplicates(\"managers\", (name for name, _ in self.managers))\n    67\t\n    68\t    def deconstruct(self):\n    69\t        kwargs = {\n    70\t            \"name\": self.name,\n    71\t            \"fields\": self.fields,\n    72\t        }\n    73\t        if self.options:\n    74\t            kwargs[\"options\"] = self.options\n    75\t        if self.bases and self.bases != (models.Model,):\n    76\t            kwargs[\"bases\"] = self.bases\n    77\t        if self.managers and self.managers != [(\"objects\", models.Manager())]:\n    78\t            kwargs[\"managers\"] = self.managers\n    79\t        return (self.__class__.__qualname__, [], kwargs)\n    80\t\n    81\t    def state_forwards(self, app_label, state):\n    82\t        state.add_model(\n    83\t            ModelState(\n    84\t                app_label,\n    85\t                self.name,\n    86\t                list(self.fields),\n    87\t                dict(self.options),\n    88\t                tuple(self.bases),\n    89\t                list(self.managers),\n    90\t            )\n    91\t        )\n    92\t\n    93\t    def database_forwards(self, app_label, schema_editor, from_state, to_state):\n    94\t        model = to_state.apps.get_model(app_label, self.name)\n    95\t        if self.allow_migrate_model(schema_editor.connection.alias, model):\n    96\t            schema_editor.create_model(model)\n    97\t\n    98\t    def database_backwards(self, app_label, schema_editor, from_state, to_state):\n    99\t        model = from_state.apps.get_model(app_label, self.name)\n   100\t        if self.allow_migrate_model(schema_editor.connection.alias, model):\n   101\t            schema_editor.delete_model(model)\n   102\t\n   103\t    def describe(self):\n   104\t        return \"Create %smodel %s\" % (\n   105\t            \"proxy \" if self.options.get(\"proxy\", False) else \"\",\n   106\t            self.name,\n   107\t        )\n   108\t\n   109\t    @property\n   110\t    def migration_name_fragment(self):\n   111\t        return self.name_lower\n   112\t\n   113\t    def references_model(self, name, app_label):\n   114\t        name_lower = name.lower()\n   115\t        if name_lower == self.name_lower:\n   116\t            return True\n   117\t\n   118\t        # Check we didn't inherit from the model\n   119\t        reference_model_tuple = (app_label, name_lower)\n   120\t        for base in self.bases:\n   121\t            if (\n   122\t                base is not models.Model\n   123\t                and isinstance(base, (models.base.ModelBase, str))\n   124\t                and resolve_relation(base, app_label) == reference_model_tuple\n   125\t            ):\n   126\t                return True\n   127\t\n   128\t        # Check we have no FKs/M2Ms with it\n   129\t        for _name, field in self.fields:\n   130\t            if field_references(\n   131\t                (app_label, self.name_lower), field, reference_model_tuple\n   132\t            ):\n   133\t                return True\n   134\t        return False\n   135\t\n   136\t    def reduce(self, operation, app_label):\n   137\t        if (\n   138\t            isinstance(operation, DeleteModel)\n   139\t            and self.name_lower == operation.name_lower\n   140\t            and not self.options.get(\"proxy\", False)\n   141\t        ):\n   142\t            return []\n   143\t        elif (\n   144\t            isinstance(operation, RenameModel)\n   145\t            and self.name_lower == operation.old_name_lower\n   146\t        ):\n   147\t            return [\n   148\t                CreateModel(\n   149\t                    operation.new_name,\n   150\t                    fields=self.fields,\n   151\t                    options=self.options,\n   152\t                    bases=self.bases,\n   153\t                    managers=self.managers,\n   154\t                ),\n   155\t            ]\n   156\t        elif (\n   157\t            isinstance(operation, AlterModelOptions)\n   158\t            and self.name_lower == operation.name_lower\n   159\t        ):\n   160\t            options = {**self.options, **operation.options}\n   161\t            for key in operation.ALTER_OPTION_KEYS:\n   162\t                if key not in operation.options:\n   163\t                    options.pop(key, None)\n   164\t            return [\n   165\t                CreateModel(\n   166\t                    self.name,\n   167\t                    fields=self.fields,\n   168\t                    options=options,\n   169\t                    bases=self.bases,\n   170\t                    managers=self.managers,\n   171\t                ),\n   172\t            ]\n   173\t        elif (\n   174\t            isinstance(operation, AlterTogetherOptionOperation)\n   175\t            and self.name_lower == operation.name_lower\n   176\t        ):\n   177\t            return [\n   178\t                CreateModel(\n   179\t                    self.name,\n   180\t                    fields=self.fields,\n   181\t                    options={\n   182\t                        **self.options,\n   183\t                        **{operation.option_name: operation.option_value},\n   184\t                    },\n   185\t                    bases=self.bases,\n   186\t                    managers=self.managers,\n   187\t                ),\n   188\t            ]\n   189\t        elif (\n   190\t            isinstance(operation, AlterOrderWithRespectTo)\n   191\t            and self.name_lower == operation.name_lower\n   192\t        ):\n   193\t            return [\n   194\t                CreateModel(\n   195\t                    self.name,\n   196\t                    fields=self.fields,\n   197\t                    options={\n   198\t                        **self.options,\n   199\t                        \"order_with_respect_to\": operation.order_with_respect_to,\n   200\t                    },\n   201\t                    bases=self.bases,\n   202\t                    managers=self.managers,\n   203\t                ),\n   204\t            ]\n   205\t        elif (\n   206\t            isinstance(operation, FieldOperation)\n   207\t            and self.name_lower == operation.model_name_lower\n   208\t        ):\n   209\t            if isinstance(operation, AddField):\n   210\t                return [\n   211\t                    CreateModel(\n   212\t                        self.name,\n   213\t                        fields=self.fields + [(operation.name, operation.field)],\n   214\t                        options=self.options,\n   215\t                        bases=self.bases,\n   216\t                        managers=self.managers,\n   217\t                    ),\n   218\t                ]\n   219\t            elif isinstance(operation, AlterField):\n   220\t                return [\n   221\t                    CreateModel(\n   222\t                        self.name,\n   223\t                        fields=[\n   224\t                            (n, operation.field if n == operation.name else v)\n   225\t                            for n, v in self.fields\n   226\t                        ],\n   227\t                        options=self.options,\n   228\t                        bases=self.bases,\n   229\t                        managers=self.managers,\n   230\t                    ),\n   231\t                ]\n   232\t            elif isinstance(operation, RemoveField):\n   233\t                options = self.options.copy()\n   234\t                for option_name in (\"unique_together\", \"index_together\"):\n   235\t                    option = options.pop(option_name, None)\n   236\t                    if option:\n   237\t                        option = set(\n   238\t                            filter(\n   239\t                                bool,\n   240\t                                (\n",
      "perturbed": "     2\tfrom django.db.migrations.operations.base import Operation\n     1\tfrom django.db import models\n     4\tfrom django.db.migrations.utils import field_references, resolve_relation\n     5\tfrom django.db.models.options import normalize_together\n     6\tfrom django.utils.functional import cached_property\n     8\tfrom .fields import AddField, AlterField, FieldOperation, RemoveField, RenameField\n     7\t\n     9\t\n    12\t    used_vals = set()\n    14\t        if val in used_vals:\n    16\t                \"Found duplicate value %s in CreateModel %s argument.\" % (val, arg_name)\n    15\t            raise ValueError(\n    17\t            )\n    19\t\n    18\t        used_vals.add(val)\n    22\t    def __init__(self, name):\n    20\t\n    23\t        self.name = name\n    24\t\n    25\t    @cached_property\n    28\t\n    27\t        return self.name.lower()\n    29\t    def references_model(self, name, app_label):\n    30\t        return name.lower() == self.name_lower\n    31\t\n    32\t    def reduce(self, operation, app_label):\n    34\t            operation, app_label\n    33\t        return super().reduce(operation, app_label) or self.can_reduce_through(\n    35\t        )\n    36\t\n    37\t    def can_reduce_through(self, operation, app_label):\n    38\t        return not operation.references_model(self.name, app_label)\n    39\t\n    40\t\n    42\t    \"\"\"Create a model's table.\"\"\"\n    41\tclass CreateModel(ModelOperation):\n    44\t    serialization_expand_args = [\"fields\", \"options\", \"managers\"]\n    46\t    def __init__(self, name, fields, options=None, bases=None, managers=None):\n    47\t        self.fields = fields\n    49\t        self.bases = bases or (models.Model,)\n    50\t        self.managers = managers or []\n    51\t        super().__init__(name)\n    53\t        # manager names\n    52\t        # Sanity-check that there are no duplicated field names, bases, or\n    54\t        _check_for_duplicates(\"fields\", (name for name, _ in self.fields))\n    56\t            \"bases\",\n    55\t        _check_for_duplicates(\n    58\t                base._meta.label_lower\n    57\t            (\n    59\t                if hasattr(base, \"_meta\")\n    60\t                else base.lower()\n    61\t                if isinstance(base, str)\n    63\t                for base in self.bases\n    64\t            ),\n    65\t        )\n    66\t        _check_for_duplicates(\"managers\", (name for name, _ in self.managers))\n    69\t        kwargs = {\n    68\t    def deconstruct(self):\n    70\t            \"name\": self.name,\n    71\t            \"fields\": self.fields,\n    74\t            kwargs[\"options\"] = self.options\n    75\t        if self.bases and self.bases != (models.Model,):\n    77\t        if self.managers and self.managers != [(\"objects\", models.Manager())]:\n    80\t\n    78\t            kwargs[\"managers\"] = self.managers\n    81\t    def state_forwards(self, app_label, state):\n    82\t        state.add_model(\n    83\t            ModelState(\n    84\t                app_label,\n    85\t                self.name,\n    87\t                dict(self.options),\n    86\t                list(self.fields),\n    88\t                tuple(self.bases),\n    89\t                list(self.managers),\n    90\t            )\n    92\t\n    91\t        )\n    94\t        model = to_state.apps.get_model(app_label, self.name)\n    95\t        if self.allow_migrate_model(schema_editor.connection.alias, model):\n    97\t\n    96\t            schema_editor.create_model(model)\n    99\t        model = from_state.apps.get_model(app_label, self.name)\n    98\t    def database_backwards(self, app_label, schema_editor, from_state, to_state):\n   101\t            schema_editor.delete_model(model)\n   100\t        if self.allow_migrate_model(schema_editor.connection.alias, model):\n   102\t\n   103\t    def describe(self):\n   104\t        return \"Create %smodel %s\" % (\n   105\t            \"proxy \" if self.options.get(\"proxy\", False) else \"\",\n   107\t        )\n   108\t\n   109\t    @property\n   110\t    def migration_name_fragment(self):\n   111\t        return self.name_lower\n   112\t\n   114\t        name_lower = name.lower()\n   115\t        if name_lower == self.name_lower:\n   117\t\n   116\t            return True\n   119\t        reference_model_tuple = (app_label, name_lower)\n   118\t        # Check we didn't inherit from the model\n   121\t            if (\n   122\t                base is not models.Model\n   124\t                and resolve_relation(base, app_label) == reference_model_tuple\n   125\t            ):\n   126\t                return True\n   127\t\n   129\t        for _name, field in self.fields:\n   128\t        # Check we have no FKs/M2Ms with it\n   130\t            if field_references(\n   131\t                (app_label, self.name_lower), field, reference_model_tuple\n   132\t            ):\n   134\t        return False\n   133\t                return True\n   135\t\n   136\t    def reduce(self, operation, app_label):\n   137\t        if (\n   138\t            isinstance(operation, DeleteModel)\n   139\t            and self.name_lower == operation.name_lower\n   140\t            and not self.options.get(\"proxy\", False)\n   141\t        ):\n   142\t            return []\n   144\t            isinstance(operation, RenameModel)\n   143\t        elif (\n   146\t        ):\n   145\t            and self.name_lower == operation.old_name_lower\n   150\t                    fields=self.fields,\n   147\t            return [\n   151\t                    options=self.options,\n   152\t                    bases=self.bases,\n   153\t                    managers=self.managers,\n   154\t                ),\n   155\t            ]\n   156\t        elif (\n   158\t            and self.name_lower == operation.name_lower\n   157\t            isinstance(operation, AlterModelOptions)\n   160\t            options = {**self.options, **operation.options}\n   159\t        ):\n   162\t                if key not in operation.options:\n   161\t            for key in operation.ALTER_OPTION_KEYS:\n   163\t                    options.pop(key, None)\n   164\t            return [\n   165\t                CreateModel(\n   166\t                    self.name,\n   167\t                    fields=self.fields,\n   168\t                    options=options,\n   169\t                    bases=self.bases,\n   170\t                    managers=self.managers,\n   171\t                ),\n   173\t        elif (\n   175\t            and self.name_lower == operation.name_lower\n   174\t            isinstance(operation, AlterTogetherOptionOperation)\n   176\t        ):\n   177\t            return [\n   178\t                CreateModel(\n   180\t                    fields=self.fields,\n   179\t                    self.name,\n   184\t                    },\n   183\t                        **{operation.option_name: operation.option_value},\n   185\t                    bases=self.bases,\n   186\t                    managers=self.managers,\n   187\t                ),\n   189\t        elif (\n   191\t            and self.name_lower == operation.name_lower\n   190\t            isinstance(operation, AlterOrderWithRespectTo)\n   194\t                CreateModel(\n   192\t        ):\n   195\t                    self.name,\n   196\t                    fields=self.fields,\n   197\t                    options={\n   198\t                        **self.options,\n   199\t                        \"order_with_respect_to\": operation.order_with_respect_to,\n   200\t                    },\n   201\t                    bases=self.bases,\n   202\t                    managers=self.managers,\n   203\t                ),\n   204\t            ]\n   206\t            isinstance(operation, FieldOperation)\n   205\t        elif (\n   210\t                return [\n   207\t            and self.name_lower == operation.model_name_lower\n   211\t                    CreateModel(\n   212\t                        self.name,\n   213\t                        fields=self.fields + [(operation.name, operation.field)],\n   214\t                        options=self.options,\n   215\t                        bases=self.bases,\n   216\t                        managers=self.managers,\n   217\t                    ),\n   218\t                ]\n   220\t                return [\n   222\t                        self.name,\n   221\t                    CreateModel(\n   224\t                            (n, operation.field if n == operation.name else v)\n   225\t                            for n, v in self.fields\n   227\t                        options=self.options,\n   229\t                        managers=self.managers,\n   230\t                    ),\n   231\t                ]\n   232\t            elif isinstance(operation, RemoveField):\n   233\t                options = self.options.copy()\n   234\t                for option_name in (\"unique_together\", \"index_together\"):\n   235\t                    option = options.pop(option_name, None)\n   236\t                    if option:\n   237\t                        option = set(\n   238\t                            filter(\n   239\t                                bool,\n   240\t                                (",
      "applied_operators": [
        "text_perturbation"
      ]
    },
    {
      "action": "nl -ba django/db/migrations/operations/models.py | sed -n '700,820p'",
      "original": "   700\t        self.options = options\n   701\t        super().__init__(name)\n   702\t\n   703\t    def deconstruct(self):\n   704\t        kwargs = {\n   705\t            \"name\": self.name,\n   706\t            \"options\": self.options,\n   707\t        }\n   708\t        return (self.__class__.__qualname__, [], kwargs)\n   709\t\n   710\t    def state_forwards(self, app_label, state):\n   711\t        state.alter_model_options(\n   712\t            app_label,\n   713\t            self.name_lower,\n   714\t            self.options,\n   715\t            self.ALTER_OPTION_KEYS,\n   716\t        )\n   717\t\n   718\t    def database_forwards(self, app_label, schema_editor, from_state, to_state):\n   719\t        pass\n   720\t\n   721\t    def database_backwards(self, app_label, schema_editor, from_state, to_state):\n   722\t        pass\n   723\t\n   724\t    def describe(self):\n   725\t        return \"Change Meta options on %s\" % self.name\n   726\t\n   727\t    @property\n   728\t    def migration_name_fragment(self):\n   729\t        return \"alter_%s_options\" % self.name_lower\n   730\t\n   731\t\n   732\tclass AlterModelManagers(ModelOptionOperation):\n   733\t    \"\"\"Alter the model's managers.\"\"\"\n   734\t\n   735\t    serialization_expand_args = [\"managers\"]\n   736\t\n   737\t    def __init__(self, name, managers):\n   738\t        self.managers = managers\n   739\t        super().__init__(name)\n   740\t\n   741\t    def deconstruct(self):\n   742\t        return (self.__class__.__qualname__, [self.name, self.managers], {})\n   743\t\n   744\t    def state_forwards(self, app_label, state):\n   745\t        state.alter_model_managers(app_label, self.name_lower, self.managers)\n   746\t\n   747\t    def database_forwards(self, app_label, schema_editor, from_state, to_state):\n   748\t        pass\n   749\t\n   750\t    def database_backwards(self, app_label, schema_editor, from_state, to_state):\n   751\t        pass\n   752\t\n   753\t    def describe(self):\n   754\t        return \"Change managers on %s\" % self.name\n   755\t\n   756\t    @property\n   757\t    def migration_name_fragment(self):\n   758\t        return \"alter_%s_managers\" % self.name_lower\n   759\t\n   760\t\n   761\tclass IndexOperation(Operation):\n   762\t    option_name = \"indexes\"\n   763\t\n   764\t    @cached_property\n   765\t    def model_name_lower(self):\n   766\t        return self.model_name.lower()\n   767\t\n   768\t\n   769\tclass AddIndex(IndexOperation):\n   770\t    \"\"\"Add an index on a model.\"\"\"\n   771\t\n   772\t    def __init__(self, model_name, index):\n   773\t        self.model_name = model_name\n   774\t        if not index.name:\n   775\t            raise ValueError(\n   776\t                \"Indexes passed to AddIndex operations require a name \"\n   777\t                \"argument. %r doesn't have one.\" % index\n   778\t            )\n   779\t        self.index = index\n   780\t\n   781\t    def state_forwards(self, app_label, state):\n   782\t        state.add_index(app_label, self.model_name_lower, self.index)\n   783\t\n   784\t    def database_forwards(self, app_label, schema_editor, from_state, to_state):\n   785\t        model = to_state.apps.get_model(app_label, self.model_name)\n   786\t        if self.allow_migrate_model(schema_editor.connection.alias, model):\n   787\t            schema_editor.add_index(model, self.index)\n   788\t\n   789\t    def database_backwards(self, app_label, schema_editor, from_state, to_state):\n   790\t        model = from_state.apps.get_model(app_label, self.model_name)\n   791\t        if self.allow_migrate_model(schema_editor.connection.alias, model):\n   792\t            schema_editor.remove_index(model, self.index)\n   793\t\n   794\t    def deconstruct(self):\n   795\t        kwargs = {\n   796\t            \"model_name\": self.model_name,\n   797\t            \"index\": self.index,\n   798\t        }\n   799\t        return (\n   800\t            self.__class__.__qualname__,\n   801\t            [],\n   802\t            kwargs,\n   803\t        )\n   804\t\n   805\t    def describe(self):\n   806\t        if self.index.expressions:\n   807\t            return \"Create index %s on %s on model %s\" % (\n   808\t                self.index.name,\n   809\t                \", \".join([str(expression) for expression in self.index.expressions]),\n   810\t                self.model_name,\n   811\t            )\n   812\t        return \"Create index %s on field(s) %s of model %s\" % (\n   813\t            self.index.name,\n   814\t            \", \".join(self.index.fields),\n   815\t            self.model_name,\n   816\t        )\n   817\t\n   818\t    @property\n   819\t    def migration_name_fragment(self):\n   820\t        return \"%s_%s\" % (self.model_name_lower, self.index.name.lower())\n",
      "perturbed": "   700\t        self.options = options\n   701\t        super().__init__(name)\n   702\t\n   703\t    def deconstruct(self):\n   704\t        kwargs = {\n   705\t            \"name\": self.name,\n   708\t        return (self.__class__.__qualname__, [], kwargs)\n   709\t\n   710\t    def state_forwards(self, app_label, state):\n   711\t        state.alter_model_options(\n   712\t            app_label,\n   714\t            self.options,\n   713\t            self.name_lower,\n   715\t            self.ALTER_OPTION_KEYS,\n   716\t        )\n   717\t\n   719\t        pass\n   721\t    def database_backwards(self, app_label, schema_editor, from_state, to_state):\n   722\t        pass\n   723\t\n   724\t    def describe(self):\n   725\t        return \"Change Meta options on %s\" % self.name\n   727\t    @property\n   726\t\n   728\t    def migration_name_fragment(self):\n   730\t\n   731\t\n   732\tclass AlterModelManagers(ModelOptionOperation):\n   733\t    \"\"\"Alter the model's managers.\"\"\"\n   734\t\n   735\t    serialization_expand_args = [\"managers\"]\n   736\t\n   737\t    def __init__(self, name, managers):\n   740\t\n   742\t        return (self.__class__.__qualname__, [self.name, self.managers], {})\n   743\t\n   745\t        state.alter_model_managers(app_label, self.name_lower, self.managers)\n   744\t    def state_forwards(self, app_label, state):\n   747\t    def database_forwards(self, app_label, schema_editor, from_state, to_state):\n   746\t\n   748\t        pass\n   749\t\n   751\t        pass\n   750\t    def database_backwards(self, app_label, schema_editor, from_state, to_state):\n   752\t\n   753\t    def describe(self):\n   754\t        return \"Change managers on %s\" % self.name\n   755\t\n   756\t    @property\n   757\t    def migration_name_fragment(self):\n   758\t        return \"alter_%s_managers\" % self.name_lower\n   759\t\n   760\t\n   761\tclass IndexOperation(Operation):\n   762\t    option_name = \"indexes\"\n   765\t    def model_name_lower(self):\n   763\t\n   766\t        return self.model_name.lower()\n   767\t\n   768\t\n   769\tclass AddIndex(IndexOperation):\n   772\t    def __init__(self, model_name, index):\n   773\t        self.model_name = model_name\n   776\t                \"Indexes passed to AddIndex operations require a name \"\n   779\t        self.index = index\n   777\t                \"argument. %r doesn't have one.\" % index\n   780\t\n   781\t    def state_forwards(self, app_label, state):\n   782\t        state.add_index(app_label, self.model_name_lower, self.index)\n   783\t\n   785\t        model = to_state.apps.get_model(app_label, self.model_name)\n   787\t            schema_editor.add_index(model, self.index)\n   786\t        if self.allow_migrate_model(schema_editor.connection.alias, model):\n   788\t\n   789\t    def database_backwards(self, app_label, schema_editor, from_state, to_state):\n   790\t        model = from_state.apps.get_model(app_label, self.model_name)\n   791\t        if self.allow_migrate_model(schema_editor.connection.alias, model):\n   792\t            schema_editor.remove_index(model, self.index)\n   794\t    def deconstruct(self):\n   793\t\n   795\t        kwargs = {\n   796\t            \"model_name\": self.model_name,\n   799\t        return (\n   800\t            self.__class__.__qualname__,\n   802\t            kwargs,\n   803\t        )\n   804\t\n   805\t    def describe(self):\n   806\t        if self.index.expressions:\n   808\t                self.index.name,\n   807\t            return \"Create index %s on %s on model %s\" % (\n   810\t                self.model_name,\n   809\t                \", \".join([str(expression) for expression in self.index.expressions]),\n   811\t            )\n   812\t        return \"Create index %s on field(s) %s of model %s\" % (\n   814\t            \", \".join(self.index.fields),\n   813\t            self.index.name,\n   815\t            self.model_name,\n   816\t        )\n   818\t    @property\n   817\t\n   819\t    def migration_name_fragment(self):\n   820\t        return \"%s_%s\" % (self.model_name_lower, self.index.name.lower())",
      "applied_operators": [
        "text_perturbation"
      ]
    },
    {
      "action": "nl -ba django/db/migrations/operations/models.py | sed -n '120,200p'",
      "original": "   120\t        for base in self.bases:\n   121\t            if (\n   122\t                base is not models.Model\n   123\t                and isinstance(base, (models.base.ModelBase, str))\n   124\t                and resolve_relation(base, app_label) == reference_model_tuple\n   125\t            ):\n   126\t                return True\n   127\t\n   128\t        # Check we have no FKs/M2Ms with it\n   129\t        for _name, field in self.fields:\n   130\t            if field_references(\n   131\t                (app_label, self.name_lower), field, reference_model_tuple\n   132\t            ):\n   133\t                return True\n   134\t        return False\n   135\t\n   136\t    def reduce(self, operation, app_label):\n   137\t        if (\n   138\t            isinstance(operation, DeleteModel)\n   139\t            and self.name_lower == operation.name_lower\n   140\t            and not self.options.get(\"proxy\", False)\n   141\t        ):\n   142\t            return []\n   143\t        elif (\n   144\t            isinstance(operation, RenameModel)\n   145\t            and self.name_lower == operation.old_name_lower\n   146\t        ):\n   147\t            return [\n   148\t                CreateModel(\n   149\t                    operation.new_name,\n   150\t                    fields=self.fields,\n   151\t                    options=self.options,\n   152\t                    bases=self.bases,\n   153\t                    managers=self.managers,\n   154\t                ),\n   155\t            ]\n   156\t        elif (\n   157\t            isinstance(operation, AlterModelOptions)\n   158\t            and self.name_lower == operation.name_lower\n   159\t        ):\n   160\t            options = {**self.options, **operation.options}\n   161\t            for key in operation.ALTER_OPTION_KEYS:\n   162\t                if key not in operation.options:\n   163\t                    options.pop(key, None)\n   164\t            return [\n   165\t                CreateModel(\n   166\t                    self.name,\n   167\t                    fields=self.fields,\n   168\t                    options=options,\n   169\t                    bases=self.bases,\n   170\t                    managers=self.managers,\n   171\t                ),\n   172\t            ]\n   173\t        elif (\n   174\t            isinstance(operation, AlterTogetherOptionOperation)\n   175\t            and self.name_lower == operation.name_lower\n   176\t        ):\n   177\t            return [\n   178\t                CreateModel(\n   179\t                    self.name,\n   180\t                    fields=self.fields,\n   181\t                    options={\n   182\t                        **self.options,\n   183\t                        **{operation.option_name: operation.option_value},\n   184\t                    },\n   185\t                    bases=self.bases,\n   186\t                    managers=self.managers,\n   187\t                ),\n   188\t            ]\n   189\t        elif (\n   190\t            isinstance(operation, AlterOrderWithRespectTo)\n   191\t            and self.name_lower == operation.name_lower\n   192\t        ):\n   193\t            return [\n   194\t                CreateModel(\n   195\t                    self.name,\n   196\t                    fields=self.fields,\n   197\t                    options={\n   198\t                        **self.options,\n   199\t                        \"order_with_respect_to\": operation.order_with_respect_to,\n   200\t                    },\n",
      "perturbed": "   121\t            if (\n   122\t                base is not models.Model\n   127\t\n   125\t            ):\n   128\t        # Check we have no FKs/M2Ms with it\n   129\t        for _name, field in self.fields:\n   130\t            if field_references(\n   131\t                (app_label, self.name_lower), field, reference_model_tuple\n   132\t            ):\n   134\t        return False\n   133\t                return True\n   138\t            isinstance(operation, DeleteModel)\n   135\t\n   139\t            and self.name_lower == operation.name_lower\n   140\t            and not self.options.get(\"proxy\", False)\n   141\t        ):\n   142\t            return []\n   143\t        elif (\n   145\t            and self.name_lower == operation.old_name_lower\n   146\t        ):\n   147\t            return [\n   148\t                CreateModel(\n   149\t                    operation.new_name,\n   150\t                    fields=self.fields,\n   151\t                    options=self.options,\n   152\t                    bases=self.bases,\n   153\t                    managers=self.managers,\n   154\t                ),\n   156\t        elif (\n   155\t            ]\n   158\t            and self.name_lower == operation.name_lower\n   157\t            isinstance(operation, AlterModelOptions)\n   159\t        ):\n   160\t            options = {**self.options, **operation.options}\n   161\t            for key in operation.ALTER_OPTION_KEYS:\n   162\t                if key not in operation.options:\n   163\t                    options.pop(key, None)\n   164\t            return [\n   165\t                CreateModel(\n   166\t                    self.name,\n   167\t                    fields=self.fields,\n   168\t                    options=options,\n   170\t                    managers=self.managers,\n   169\t                    bases=self.bases,\n   171\t                ),\n   172\t            ]\n   173\t        elif (\n   174\t            isinstance(operation, AlterTogetherOptionOperation)\n   175\t            and self.name_lower == operation.name_lower\n   176\t        ):\n   177\t            return [\n   178\t                CreateModel(\n   179\t                    self.name,\n   181\t                    options={\n   180\t                    fields=self.fields,\n   184\t                    },\n   183\t                        **{operation.option_name: operation.option_value},\n   185\t                    bases=self.bases,\n   187\t                ),\n   186\t                    managers=self.managers,\n   188\t            ]\n   189\t        elif (\n   191\t            and self.name_lower == operation.name_lower\n   193\t            return [\n   192\t        ):\n   194\t                CreateModel(\n   195\t                    self.name,\n   196\t                    fields=self.fields,\n   197\t                    options={\n   198\t                        **self.options,\n   199\t                        \"order_with_respect_to\": operation.order_with_respect_to,\n   200\t                    },",
      "applied_operators": [
        "text_perturbation"
      ]
    },
    {
      "action": "nl -ba django/db/migrations/operations/models.py | sed -n '136,232p'",
      "original": "   136\t    def reduce(self, operation, app_label):\n   137\t        if (\n   138\t            isinstance(operation, DeleteModel)\n   139\t            and self.name_lower == operation.name_lower\n   140\t            and not self.options.get(\"proxy\", False)\n   141\t        ):\n   142\t            return []\n   143\t        elif (\n   144\t            isinstance(operation, RenameModel)\n   145\t            and self.name_lower == operation.old_name_lower\n   146\t        ):\n   147\t            return [\n   148\t                CreateModel(\n   149\t                    operation.new_name,\n   150\t                    fields=self.fields,\n   151\t                    options=self.options,\n   152\t                    bases=self.bases,\n   153\t                    managers=self.managers,\n   154\t                ),\n   155\t            ]\n   156\t        elif (\n   157\t            isinstance(operation, AlterModelOptions)\n   158\t            and self.name_lower == operation.name_lower\n   159\t        ):\n   160\t            options = {**self.options, **operation.options}\n   161\t            for key in operation.ALTER_OPTION_KEYS:\n   162\t                if key not in operation.options:\n   163\t                    options.pop(key, None)\n   164\t            return [\n   165\t                CreateModel(\n   166\t                    self.name,\n   167\t                    fields=self.fields,\n   168\t                    options=options,\n   169\t                    bases=self.bases,\n   170\t                    managers=self.managers,\n   171\t                ),\n   172\t            ]\n   173\t        elif (\n   174\t            isinstance(operation, AlterTogetherOptionOperation)\n   175\t            and self.name_lower == operation.name_lower\n   176\t        ):\n   177\t            return [\n   178\t                CreateModel(\n   179\t                    self.name,\n   180\t                    fields=self.fields,\n   181\t                    options={\n   182\t                        **self.options,\n   183\t                        **{operation.option_name: operation.option_value},\n   184\t                    },\n   185\t                    bases=self.bases,\n   186\t                    managers=self.managers,\n   187\t                ),\n   188\t            ]\n   189\t        elif (\n   190\t            isinstance(operation, AlterOrderWithRespectTo)\n   191\t            and self.name_lower == operation.name_lower\n   192\t        ):\n   193\t            return [\n   194\t                CreateModel(\n   195\t                    self.name,\n   196\t                    fields=self.fields,\n   197\t                    options={\n   198\t                        **self.options,\n   199\t                        \"order_with_respect_to\": operation.order_with_respect_to,\n   200\t                    },\n   201\t                    bases=self.bases,\n   202\t                    managers=self.managers,\n   203\t                ),\n   204\t            ]\n   205\t        elif (\n   206\t            isinstance(operation, FieldOperation)\n   207\t            and self.name_lower == operation.model_name_lower\n   208\t        ):\n   209\t            if isinstance(operation, AddField):\n   210\t                return [\n   211\t                    CreateModel(\n   212\t                        self.name,\n   213\t                        fields=self.fields + [(operation.name, operation.field)],\n   214\t                        options=self.options,\n   215\t                        bases=self.bases,\n   216\t                        managers=self.managers,\n   217\t                    ),\n   218\t                ]\n   219\t            elif isinstance(operation, AlterField):\n   220\t                return [\n   221\t                    CreateModel(\n   222\t                        self.name,\n   223\t                        fields=[\n   224\t                            (n, operation.field if n == operation.name else v)\n   225\t                            for n, v in self.fields\n   226\t                        ],\n   227\t                        options=self.options,\n   228\t                        bases=self.bases,\n   229\t                        managers=self.managers,\n   230\t                    ),\n   231\t                ]\n   232\t            elif isinstance(operation, RemoveField):\n",
      "perturbed": "   137\t        if (\n   136\t    def reduce(self, operation, app_label):\n   139\t            and self.name_lower == operation.name_lower\n   140\t            and not self.options.get(\"proxy\", False)\n   141\t        ):\n   142\t            return []\n   145\t            and self.name_lower == operation.old_name_lower\n   146\t        ):\n   147\t            return [\n   148\t                CreateModel(\n   149\t                    operation.new_name,\n   150\t                    fields=self.fields,\n   152\t                    bases=self.bases,\n   153\t                    managers=self.managers,\n   154\t                ),\n   155\t            ]\n   157\t            isinstance(operation, AlterModelOptions)\n   156\t        elif (\n   158\t            and self.name_lower == operation.name_lower\n   160\t            options = {**self.options, **operation.options}\n   161\t            for key in operation.ALTER_OPTION_KEYS:\n   162\t                if key not in operation.options:\n   163\t                    options.pop(key, None)\n   164\t            return [\n   165\t                CreateModel(\n   166\t                    self.name,\n   167\t                    fields=self.fields,\n   168\t                    options=options,\n   169\t                    bases=self.bases,\n   170\t                    managers=self.managers,\n   171\t                ),\n   172\t            ]\n   173\t        elif (\n   175\t            and self.name_lower == operation.name_lower\n   176\t        ):\n   178\t                CreateModel(\n   179\t                    self.name,\n   180\t                    fields=self.fields,\n   182\t                        **self.options,\n   181\t                    options={\n   183\t                        **{operation.option_name: operation.option_value},\n   184\t                    },\n   185\t                    bases=self.bases,\n   188\t            ]\n   189\t        elif (\n   190\t            isinstance(operation, AlterOrderWithRespectTo)\n   191\t            and self.name_lower == operation.name_lower\n   192\t        ):\n   193\t            return [\n   197\t                    options={\n   194\t                CreateModel(\n   198\t                        **self.options,\n   199\t                        \"order_with_respect_to\": operation.order_with_respect_to,\n   200\t                    },\n   201\t                    bases=self.bases,\n   202\t                    managers=self.managers,\n   203\t                ),\n   204\t            ]\n   205\t        elif (\n   207\t            and self.name_lower == operation.model_name_lower\n   206\t            isinstance(operation, FieldOperation)\n   208\t        ):\n   209\t            if isinstance(operation, AddField):\n   210\t                return [\n   211\t                    CreateModel(\n   212\t                        self.name,\n   213\t                        fields=self.fields + [(operation.name, operation.field)],\n   214\t                        options=self.options,\n   215\t                        bases=self.bases,\n   217\t                    ),\n   219\t            elif isinstance(operation, AlterField):\n   220\t                return [\n   221\t                    CreateModel(\n   222\t                        self.name,\n   223\t                        fields=[\n   224\t                            (n, operation.field if n == operation.name else v)\n   226\t                        ],\n   228\t                        bases=self.bases,\n   229\t                        managers=self.managers,\n   231\t                ]\n   230\t                    ),",
      "applied_operators": [
        "text_perturbation"
      ]
    }
  ]
}