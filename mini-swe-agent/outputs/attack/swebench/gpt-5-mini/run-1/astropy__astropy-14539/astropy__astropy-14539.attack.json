{
  "info": {
    "total_observations": 11,
    "python_observations": 0,
    "text_observations": 11,
    "ast_operators_applied": 0,
    "text_perturbation_applied": 3,
    "skipped": 8
  },
  "perturbations": [
    {
      "action": "ls -la",
      "original": "total 720\ndrwxrwxrwx  1 root root   4096 Sep 10 09:31 .\ndrwxr-xr-x  1 root root   4096 Nov 29 03:31 ..\n-rw-r--r--  1 root root      0 Sep 10 09:28 .astropy-root\ndrwxrwxrwx  2 root root   4096 Sep 10 09:28 .circleci\ndrwxrwxrwx  2 root root   4096 Sep 10 09:28 .devcontainer\ndrwxrwxrwx  8 root root   4096 Sep 10 09:32 .git\n-rw-r--r--  1 root root   1701 Sep 10 09:28 .git-blame-ignore-revs\n-rw-r--r--  1 root root     74 Sep 10 09:28 .gitattributes\ndrwxrwxrwx  4 root root   4096 Sep 10 09:28 .github\n-rw-r--r--  1 root root   1269 Sep 10 09:28 .gitignore\n-rw-r--r--  1 root root  21307 Sep 10 09:28 .mailmap\n-rw-r--r--  1 root root   3407 Sep 10 09:28 .pre-commit-config.yaml\ndrwxrwxrwx  3 root root   4096 Sep 10 09:28 .pyinstaller\n-rw-r--r--  1 root root    457 Sep 10 09:28 .readthedocs.yaml\n-rw-r--r--  1 root root 545738 Sep 10 09:28 CHANGES.rst\n-rw-r--r--  1 root root     66 Sep 10 09:28 CITATION\n-rw-r--r--  1 root root    139 Sep 10 09:28 CODE_OF_CONDUCT.md\n-rw-r--r--  1 root root   9569 Sep 10 09:28 CONTRIBUTING.md\n-rw-r--r--  1 root root    129 Sep 10 09:28 GOVERNANCE.md\n-rw-r--r--  1 root root   1496 Sep 10 09:28 LICENSE.rst\n-rw-r--r--  1 root root    178 Sep 10 09:28 MANIFEST.in\n-rw-r--r--  1 root root   5876 Sep 10 09:28 README.rst\ndrwxrwxrwx 23 root root   4096 Sep 10 09:32 astropy\ndrwxr-xr-x  2 root root   4096 Sep 10 09:31 astropy.egg-info\ndrwxrwxrwx  5 root root   4096 Sep 10 09:28 cextern\n-rw-r--r--  1 root root    244 Sep 10 09:28 codecov.yml\n-rw-r--r--  1 root root   2655 Sep 10 09:28 conftest.py\ndrwxrwxrwx 25 root root   4096 Sep 10 09:28 docs\ndrwxr-xr-x  5 root root   4096 Sep 10 09:28 examples\ndrwxrwxrwx  2 root root   4096 Sep 10 09:28 licenses\n-rw-r--r--  1 root root  19615 Sep 10 09:31 pyproject.toml\n-rw-r--r--  1 root root   6098 Sep 10 09:28 setup.cfg\n-rwxr-xr-x  1 root root   1647 Sep 10 09:28 setup.py\n-rw-r--r--  1 root root   6767 Sep 10 09:28 tox.ini\n",
      "perturbed": "drwxr-xr-x  1 root root   4096 Nov 29 03:31 ..\ntotal 720\ndrwxrwxrwx  2 root root   4096 Sep 10 09:28 .circleci\ndrwxrwxrwx  2 root root   4096 Sep 10 09:28 .devcontainer\ndrwxrwxrwx  8 root root   4096 Sep 10 09:32 .git\n-rw-r--r--  1 root root   1701 Sep 10 09:28 .git-blame-ignore-revs\n-rw-r--r--  1 root root     74 Sep 10 09:28 .gitattributes\ndrwxrwxrwx  4 root root   4096 Sep 10 09:28 .github\n-rw-r--r--  1 root root  21307 Sep 10 09:28 .mailmap\n-rw-r--r--  1 root root   3407 Sep 10 09:28 .pre-commit-config.yaml\ndrwxrwxrwx  3 root root   4096 Sep 10 09:28 .pyinstaller\n-rw-r--r--  1 root root    457 Sep 10 09:28 .readthedocs.yaml\n-rw-r--r--  1 root root 545738 Sep 10 09:28 CHANGES.rst\n-rw-r--r--  1 root root     66 Sep 10 09:28 CITATION\n-rw-r--r--  1 root root    139 Sep 10 09:28 CODE_OF_CONDUCT.md\n-rw-r--r--  1 root root   9569 Sep 10 09:28 CONTRIBUTING.md\n-rw-r--r--  1 root root    129 Sep 10 09:28 GOVERNANCE.md\n-rw-r--r--  1 root root   1496 Sep 10 09:28 LICENSE.rst\n-rw-r--r--  1 root root    178 Sep 10 09:28 MANIFEST.in\n-rw-r--r--  1 root root   5876 Sep 10 09:28 README.rst\ndrwxrwxrwx 23 root root   4096 Sep 10 09:32 astropy\ndrwxr-xr-x  2 root root   4096 Sep 10 09:31 astropy.egg-info\ndrwxrwxrwx  5 root root   4096 Sep 10 09:28 cextern\n-rw-r--r--  1 root root    244 Sep 10 09:28 codecov.yml\ndrwxrwxrwx 25 root root   4096 Sep 10 09:28 docs\n-rw-r--r--  1 root root  19615 Sep 10 09:31 pyproject.toml\ndrwxrwxrwx  2 root root   4096 Sep 10 09:28 licenses\n-rw-r--r--  1 root root   6767 Sep 10 09:28 tox.ini\n-rw-r--r--  1 root root   6098 Sep 10 09:28 setup.cfg",
      "applied_operators": [
        "text_perturbation"
      ]
    },
    {
      "action": "grep -nE \"variable|VLA|variable-length|object dtype|ndim|tolist\\(|len\\(|isinstance\\(|np\\.ndim\" astropy/io/fits/diff.py | sed -n '1,200p'",
      "original": "165:        if isinstance(fileobj, path_like):\n289:        if isinstance(a, (str, os.PathLike)):\n298:        if isinstance(b, (str, os.PathLike)):\n339:        if len(self.a) != len(self.b):\n340:            self.diff_hdu_count = (len(self.a), len(self.b))\n368:        for idx in range(min(len(self.a), len(self.b))):\n601:        elif isinstance(self.a, _TableLikeHDU) and isinstance(self.b, _TableLikeHDU):\n811:        if isinstance(a, str):\n813:        if isinstance(b, str):\n816:        if not (isinstance(a, Header) and isinstance(b, Header)):\n841:                if self.ignore_blanks and isinstance(value, str):\n856:        if len(cardsa) != len(cardsb):\n857:            self.diff_keyword_count = (len(cardsa), len(cardsb))\n890:            counta = len(valuesa[keyword])\n891:            countb = len(valuesb[keyword])\n1085:        self.diff_total = len(diffs[0])\n1100:        self.diff_ratio = float(self.diff_total) / float(len(self.a.flat))\n1350:        if len(colsa) != len(colsb):\n1351:            self.diff_column_count = (len(colsa), len(colsb))\n1409:        if len(self.a) != len(self.b):\n1410:            self.diff_rows = (len(self.a), len(self.b))\n1415:        if len(self.a) == len(self.b) == 0:\n1456:                        for idx in range(len(arra))\n1465:            self.diff_total += len(set(diffs[0]))\n1468:                if len(self.diff_values) >= self.numdiffs:\n1473:                max_diffs = self.numdiffs - len(self.diff_values)\n1475:                max_diffs = len(diffs[0])\n1487:        total_values = len(self.a) * len(self.a.dtype.fields)\n",
      "perturbed": "165:        if isinstance(fileobj, path_like):\n289:        if isinstance(a, (str, os.PathLike)):\n298:        if isinstance(b, (str, os.PathLike)):\n339:        if len(self.a) != len(self.b):\n340:            self.diff_hdu_count = (len(self.a), len(self.b))\n601:        elif isinstance(self.a, _TableLikeHDU) and isinstance(self.b, _TableLikeHDU):\n811:        if isinstance(a, str):\n816:        if not (isinstance(a, Header) and isinstance(b, Header)):\n813:        if isinstance(b, str):\n841:                if self.ignore_blanks and isinstance(value, str):\n856:        if len(cardsa) != len(cardsb):\n1085:        self.diff_total = len(diffs[0])\n891:            countb = len(valuesb[keyword])\n1100:        self.diff_ratio = float(self.diff_total) / float(len(self.a.flat))\n1350:        if len(colsa) != len(colsb):\n1409:        if len(self.a) != len(self.b):\n1410:            self.diff_rows = (len(self.a), len(self.b))\n1415:        if len(self.a) == len(self.b) == 0:\n1465:            self.diff_total += len(set(diffs[0]))\n1456:                        for idx in range(len(arra))\n1468:                if len(self.diff_values) >= self.numdiffs:\n1473:                max_diffs = self.numdiffs - len(self.diff_values)\n1475:                max_diffs = len(diffs[0])\n1487:        total_values = len(self.a) * len(self.a.dtype.fields)",
      "applied_operators": [
        "text_perturbation"
      ]
    },
    {
      "action": "cat <<'PY' > repro.py && python3 repro.py\nimport sys, os\nsys.path.insert(0, os.getcwd())\nfrom astropy.io import fits\ncol = fits.Column('a', format='QD', array=[[0], [0, 0]])\nhdu = fits.BinTableHDU.from_columns([col])\nhdu.writeto('diffbug.fits', overwrite=True)\nprint(fits.FITSDiff('diffbug.fits', 'diffbug.fits').identical)\nfits.printdiff('diffbug.fits', 'diffbug.fits')\nPY",
      "original": "Traceback (most recent call last):\n  File \"/testbed/repro.py\", line 7, in <module>\n    print(fits.FITSDiff('diffbug.fits', 'diffbug.fits').identical)\n  File \"/testbed/astropy/io/fits/diff.py\", line 331, in __init__\n    super().__init__(a, b)\n  File \"/testbed/astropy/io/fits/diff.py\", line 87, in __init__\n    self._diff()\n  File \"/testbed/astropy/io/fits/diff.py\", line 369, in _diff\n    hdu_diff = HDUDiff.fromdiff(self, self.a[idx], self.b[idx])\n  File \"/testbed/astropy/io/fits/diff.py\", line 120, in fromdiff\n    return cls(a, b, **kwargs)\n  File \"/testbed/astropy/io/fits/diff.py\", line 570, in __init__\n    super().__init__(a, b)\n  File \"/testbed/astropy/io/fits/diff.py\", line 87, in __init__\n    self._diff()\n  File \"/testbed/astropy/io/fits/diff.py\", line 603, in _diff\n    self.diff_data = TableDataDiff.fromdiff(self, self.a.data, self.b.data)\n  File \"/testbed/astropy/io/fits/diff.py\", line 120, in fromdiff\n    return cls(a, b, **kwargs)\n  File \"/testbed/astropy/io/fits/diff.py\", line 1342, in __init__\n    super().__init__(a, b)\n  File \"/testbed/astropy/io/fits/diff.py\", line 87, in __init__\n    self._diff()\n  File \"/testbed/astropy/io/fits/diff.py\", line 1463, in _diff\n    diffs = np.where(arra != arrb)\nValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()\n",
      "perturbed": "  File \"/testbed/repro.py\", line 7, in <module>\nTraceback (most recent call last):\n    print(fits.FITSDiff('diffbug.fits', 'diffbug.fits').identical)\n  File \"/testbed/astropy/io/fits/diff.py\", line 331, in __init__\n  File \"/testbed/astropy/io/fits/diff.py\", line 87, in __init__\n    self._diff()\n  File \"/testbed/astropy/io/fits/diff.py\", line 369, in _diff\n    hdu_diff = HDUDiff.fromdiff(self, self.a[idx], self.b[idx])\n  File \"/testbed/astropy/io/fits/diff.py\", line 120, in fromdiff\n  File \"/testbed/astropy/io/fits/diff.py\", line 570, in __init__\n    return cls(a, b, **kwargs)\n    super().__init__(a, b)\n    self._diff()\n  File \"/testbed/astropy/io/fits/diff.py\", line 603, in _diff\n    self.diff_data = TableDataDiff.fromdiff(self, self.a.data, self.b.data)\n  File \"/testbed/astropy/io/fits/diff.py\", line 120, in fromdiff\n  File \"/testbed/astropy/io/fits/diff.py\", line 1342, in __init__\n  File \"/testbed/astropy/io/fits/diff.py\", line 87, in __init__\n    self._diff()\n    diffs = np.where(arra != arrb)\nValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()",
      "applied_operators": [
        "text_perturbation"
      ]
    }
  ]
}